<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0092)https://web.archive.org/web/20100605140832/http://www.innodb.com:80/doc/embedded_innodb-1.0/ -->
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./user_guide_files/analytics.js" type="text/javascript"></script>
<script type="text/javascript">window.addEventListener('DOMContentLoaded',function(){var v=archive_analytics.values;v.service='wb';v.server_name='wwwb-app56.us.archive.org';v.server_ms=569;archive_analytics.send_pageview({});});</script>
<script type="text/javascript" src="./user_guide_files/ait-client-rewrite.js" charset="utf-8"></script>
<script type="text/javascript">
WB_wombat_Init('https://web.archive.org/web', '20100605140832', 'www.innodb.com:80');
</script>
<script type="text/javascript" src="./user_guide_files/wbhack.js" charset="utf-8"></script>
<script type="text/javascript">
__wbhack.init('https://web.archive.org/web');
</script>
<link rel="stylesheet" type="text/css" href="./user_guide_files/banner-styles.css">
<link rel="stylesheet" type="text/css" href="./user_guide_files/iconochive.css">
<!-- End Wayback Rewrite JS Include --><title>Embedded InnoDB 1.0 (Early Adopter Release) User’s Guide and Reference</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><meta name="description" content="Embedded InnoDB provides database capabilities that you can embed in an application, without any database installation or configuration."></head><body>

<div class="book" title="Embedded InnoDB 1.0 (Early Adopter Release) User’s Guide and Reference"><div class="titlepage"><div><div><h1 class="title"><a id="innodb_api"></a>Embedded InnoDB 1.0 (Early Adopter Release) User’s Guide and Reference
</h1></div><div><p class="releaseinfo">
This is the User’s Guide and Reference for the Embedded InnoDB 1.0,
generated on February 25, 2010 (rev 6762).
</p></div><div><p class="copyright">Copyright © 2009, 2010 Innobase Oy. All rights reserved.</p></div><div><p class="copyright">Copyright © 2009, 2010 Oracle. All rights reserved.</p></div><div><div class="legalnotice" title="Legal Notice"><a id="id286810100"></a><p>
Provided that you reproduce the above copyright notice,
this list of conditions and the following disclaimer on all copies of this documentation (the <span class="quote">“<span class="quote">Documentation</span>”</span>)
for Embedded InnoDB (the <span class="quote">“<span class="quote">Program</span>”</span>):
(a) permission is hereby given to make a reasonable number of complete copies of the Documentation
in formats of your choice, solely for your use with the Program, and
(b) you may copy and distribute unmodified and complete versions of the content
of this Documentation in format(s) of your choice,
but only in conjunction with your otherwise-authorized distribution of the Program.
</p><p>
THIS DOCUMENTATION IS PROVIDED BY INNOBASE OY AND ITS
CONTRIBUTORS <span class="quote">“<span class="quote">AS IS</span>”</span> AND ANY EXPRESS OR IMPLIED WARRANTIES,
INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL INNOBASE OY OR ITS CONTRIBUTORS BE
LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY,
OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT
OF THE USE OF THIS DOCUMENTATION, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.
</p></div></div><div><div class="abstract" title="Abstract"><p class="title"><b>Abstract</b></p><p>
Embedded InnoDB provides database capabilities that you can embed
in an application, without any database installation or configuration.
</p></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#concepts">1. Concepts and Architecture for Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#overview.product">1.1. Overview of Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#overview.dbappdev">1.1.1. 
Comparison with Database Application Development
</a></span></dt><dt><span class="section"><a href="#overview.plugin">1.1.2. 
Comparison with InnoDB Plugin
</a></span></dt><dt><span class="section"><a href="#overview.mysql">1.1.3. 
Comparison with MySQL
</a></span></dt></dl></dd><dt><span class="section"><a href="#tables">1.2. Overview of Tables and Table Data</a></span></dt><dd><dl><dt><span class="section"><a href="#id287624629">1.2.1. Overview of the Data Dictionary</a></span></dt><dt><span class="section"><a href="#data_files">1.2.2. Overview of Data Files</a></span></dt></dl></dd><dt><span class="section"><a href="#indexes">1.3. Overview of Indexes</a></span></dt><dt><span class="section"><a href="#queries">1.4. Overview of Queries and WHERE Clauses</a></span></dt><dd><dl><dt><span class="section"><a href="#id287624779">1.4.1. Overview of Cursors</a></span></dt><dt><span class="section"><a href="#id287624823">1.4.2. Overview of Tuples</a></span></dt></dl></dd><dt><span class="section"><a href="#id287624881">1.5. Overview of Transactions</a></span></dt><dd><dl><dt><span class="section"><a href="#id287624936">1.5.1. How Isolation Levels Affect Transactions</a></span></dt><dt><span class="section"><a href="#id287624993">1.5.2. Overview of Savepoints</a></span></dt></dl></dd><dt><span class="section"><a href="#security">1.6. Overview of Security</a></span></dt></dl></dd><dt><span class="chapter"><a href="#start">2. Getting Started with Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#id287625122">2.1. Downloading Embedded InnoDB</a></span></dt><dt><span class="section"><a href="#id287625136">2.2. Prerequisites for Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#id287625141">2.2.1. Prerequisites for Linux and UNIX Systems</a></span></dt><dt><span class="section"><a href="#id287625163">2.2.2. Prerequisites for Windows Systems</a></span></dt></dl></dd><dt><span class="section"><a href="#id287625313">2.3. Installing Embedded InnoDB</a></span></dt><dt><span class="section"><a href="#start.deploy">2.4. Starting the InnoDB Database Engine</a></span></dt><dt><span class="section"><a href="#start.config">2.5. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#start.config.int">2.5.1. Setting Integer Variables</a></span></dt><dt><span class="section"><a href="#start.config.bool">2.5.2. Setting Boolean Values</a></span></dt><dt><span class="section"><a href="#start.config.text">2.5.3. Setting Text Values</a></span></dt></dl></dd><dt><span class="section"><a href="#start.app">2.6. Application Usage</a></span></dt><dt><span class="section"><a href="#start.shutdown">2.7. Shutting Down the InnoDB Database Engine</a></span></dt><dd><dl><dt><span class="section"><a href="#start.shutdown.issues">2.7.1. Potential Shutdown Issues</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#ddl">3. Performing CREATE and DROP Operations (DDL) with Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#id287625597">3.1. Managing Databases</a></span></dt><dd><dl><dt><span class="section"><a href="#id287625624">3.1.1. Creating a Database</a></span></dt><dt><span class="section"><a href="#id287625649">3.1.2. Dropping a database</a></span></dt></dl></dd><dt><span class="section"><a href="#id287625659">3.2. Managing Tables</a></span></dt><dd><dl><dt><span class="section"><a href="#id287625669">3.2.1. Creating a Table</a></span></dt><dt><span class="section"><a href="#open-table">3.2.2. Opening a Table or Index</a></span></dt><dt><span class="section"><a href="#close-table">3.2.3. Closing a Table or Index</a></span></dt><dt><span class="section"><a href="#id287626460">3.2.4. Truncating a Table</a></span></dt></dl></dd><dt><span class="section"><a href="#id287626489">3.3. Managing Indexes</a></span></dt><dd><dl><dt><span class="section"><a href="#id287626510">3.3.1. Creating an Index</a></span></dt><dt><span class="section"><a href="#id287626537">3.3.2. Opening an Index</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#dml">4. Performing SELECT, INSERT, UPDATE, and DELETE (DML) Operations with Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#id287626595">4.1. Mapping MySQL Types to Embedded InnoDB Values</a></span></dt><dt><span class="section"><a href="#id287626633">4.2. Using Tuples</a></span></dt><dd><dl><dt><span class="section"><a href="#id287626660">4.2.1. Creating a Tuple</a></span></dt><dt><span class="section"><a href="#id287626702">4.2.2. Deleting a Tuple</a></span></dt><dt><span class="section"><a href="#id287626712">4.2.3. Column Metadata in a Tuple</a></span></dt><dt><span class="section"><a href="#scanning">4.2.4. Scanning and Positioning</a></span></dt><dt><span class="section"><a href="#id287626832">4.2.5. Reading a Column Value</a></span></dt><dt><span class="section"><a href="#id287626880">4.2.6. Setting a Column Value</a></span></dt><dt><span class="section"><a href="#id287626942">4.2.7. Copying the Columns from One Tuple to Another</a></span></dt><dt><span class="section"><a href="#id287626952">4.2.8. Checking if a Column Value is SQL NULL</a></span></dt></dl></dd><dt><span class="section"><a href="#id287626999">4.3. Working with Records</a></span></dt><dd><dl><dt><span class="section"><a href="#id287627004">4.3.1. Reading a Record</a></span></dt><dt><span class="section"><a href="#id287627077">4.3.2. Inserting a Record</a></span></dt><dt><span class="section"><a href="#id287627139">4.3.3. Updating a Record</a></span></dt><dt><span class="section"><a href="#id287627286">4.3.4. Deleting a Record</a></span></dt><dt><span class="section"><a href="#dml.where">4.3.5. Emulating a WHERE Clause</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#transactions">5. Managing Transactions with Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#id287627427">5.1. Creating a Transaction Handle</a></span></dt><dt><span class="section"><a href="#id287627447">5.2. Committing or Rolling Back a Transaction</a></span></dt><dt><span class="section"><a href="#trx.isolation">5.3. Setting the Transaction Isolation Level</a></span></dt><dt><span class="section"><a href="#id287627643">5.4. Nested Transactions</a></span></dt><dd><dl><dt><span class="section"><a href="#id287627653">5.4.1. Taking Savepoints</a></span></dt><dt><span class="section"><a href="#id287627662">5.4.2. Deleting a Savepoint</a></span></dt><dt><span class="section"><a href="#id287627676">5.4.3. Rollback to Savepoint</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#c-api">6. C API Reference for Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#constants">6.1. Constants</a></span></dt><dt><span class="section"><a href="#types">6.2. Data Types</a></span></dt><dd><dl><dt><span class="section"><a href="#types-base">6.2.1. Base Types</a></span></dt><dt><span class="section"><a href="#types-config">6.2.2. Configuration Variable Types</a></span></dt><dt><span class="section"><a href="#types-table-format">6.2.3. Table Format types</a></span></dt><dt><span class="section"><a href="#types-column">6.2.4. Column Types</a></span></dt><dt><span class="section"><a href="#types-col-attr">6.2.5. Column Attributes</a></span></dt><dt><span class="section"><a href="#ib_col_meta_t">6.2.6. Column Metadata</a></span></dt></dl></dd><dt><span class="section"><a href="#modes">6.3. Modes</a></span></dt><dd><dl><dt><span class="section"><a href="#modes-shutdown">6.3.1. Shutdown Modes</a></span></dt><dt><span class="section"><a href="#modes-lock">6.3.2. Lock Modes</a></span></dt><dt><span class="section"><a href="#modes-search">6.3.3. Cursor Search Modes</a></span></dt><dt><span class="section"><a href="#ib_match_mode_t">6.3.4. Cursor Match Modes</a></span></dt></dl></dd><dt><span class="section"><a href="#trx">6.4. Transactions</a></span></dt><dd><dl><dt><span class="section"><a href="#trx-isolation-levels">6.4.1. Transaction Isolation Levels</a></span></dt><dt><span class="section"><a href="#trx-states">6.4.2. Transaction States</a></span></dt></dl></dd><dt><span class="section"><a href="#id287630477">6.5. Handles (opaque types)</a></span></dt><dt><span class="section"><a href="#error-codes">6.6. Error and Status Codes</a></span></dt><dd><dl><dt><span class="section"><a href="#error-codes-warnings">6.6.1. Warnings</a></span></dt></dl></dd><dt><span class="section"><a href="#id287631003">6.7. API Function Reference</a></span></dt><dd><dl><dt><span class="section"><a href="#startup-functions">6.7.1. API Functions - Startup/Shutdown</a></span></dt><dt><span class="section"><a href="#cursor-functions">6.7.2. API Functions - Cursors</a></span></dt><dt><span class="section"><a href="#transaction-functions">6.7.3. API Functions - Transactions</a></span></dt><dt><span class="section"><a href="#configuration-functions">6.7.4. API Functions - Configuration</a></span></dt><dt><span class="section"><a href="#ddl-functions">6.7.5. API Functions - DDL</a></span></dt><dt><span class="section"><a href="#misc-functions">6.7.6. API Functions - DDL and DML Support</a></span></dt><dt><span class="section"><a href="#tuple-functions">6.7.7. API Functions - Tuples</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#limits">7. Embedded InnoDB Limits</a></span></dt><dt><span class="chapter"><a href="#config-vars">8. Embedded InnoDB Configuration Variables</a></span></dt><dt><span class="chapter"><a href="#status-vars">9. Embedded InnoDB Status variables</a></span></dt><dt><span class="chapter"><a href="#transfer">10. Transferring Databases between MySQL and Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#id287640022">10.1. 
Transferring Databases from MySQL to Embedded InnoDB
</a></span></dt><dt><span class="section"><a href="#id287640098">10.2. 
Transferring Databases from Embedded InnoDB to MySQL
</a></span></dt></dl></dd><dt><span class="chapter"><a href="#innodb-changes">11. Embedded InnoDB Change History</a></span></dt><dd><dl><dt><span class="section"><a href="#innodb-changes-4">11.1. Changes in API 1.0.6.6750</a></span></dt><dt><span class="section"><a href="#innodb-changes-3">11.2. Changes in API 1.0.4.5940 (Not Released)</a></span></dt><dt><span class="section"><a href="#innodb-changes-2">11.3. Changes in API 1.0.3.5325 (June 24, 2009)</a></span></dt><dt><span class="section"><a href="#innodb-changes-1">11.4. Embedded InnoDB 1.0.0 (April 21, 2009)</a></span></dt></dl></dd><dt><span class="appendix"><a href="#innodb-contrib">A. Third-Party Software</a></span></dt><dd><dl><dt><span class="section"><a href="#innodb-contrib-google">A.1. Google SMP Patch</a></span></dt><dt><span class="section"><a href="#innodb-contrib-percona">A.2. Multiple Background I/O Threads Patch from Percona</a></span></dt><dt><span class="section"><a href="#innodb-contrib-sun_microsystems">A.3. Performance Patches from Sun Microsystems</a></span></dt></dl></dd><dt><span class="appendix"><a href="#examples">B. Code Examples Supplied with Embedded InnoDB</a></span></dt><dt><span class="glossary"><a href="#glossary">Embedded InnoDB Glossary</a></span></dt><dt><span class="index"><a href="#api-ix">Index</a></span></dt></dl></div><div class="chapter" title="Chapter 1. Concepts and Architecture for Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title"><a id="concepts"></a>Chapter&nbsp;1.&nbsp;Concepts and Architecture for Embedded InnoDB</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#overview.product">1.1. Overview of Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#overview.dbappdev">1.1.1. 
Comparison with Database Application Development
</a></span></dt><dt><span class="section"><a href="#overview.plugin">1.1.2. 
Comparison with InnoDB Plugin
</a></span></dt><dt><span class="section"><a href="#overview.mysql">1.1.3. 
Comparison with MySQL
</a></span></dt></dl></dd><dt><span class="section"><a href="#tables">1.2. Overview of Tables and Table Data</a></span></dt><dd><dl><dt><span class="section"><a href="#id287624629">1.2.1. Overview of the Data Dictionary</a></span></dt><dt><span class="section"><a href="#data_files">1.2.2. Overview of Data Files</a></span></dt></dl></dd><dt><span class="section"><a href="#indexes">1.3. Overview of Indexes</a></span></dt><dt><span class="section"><a href="#queries">1.4. Overview of Queries and WHERE Clauses</a></span></dt><dd><dl><dt><span class="section"><a href="#id287624779">1.4.1. Overview of Cursors</a></span></dt><dt><span class="section"><a href="#id287624823">1.4.2. Overview of Tuples</a></span></dt></dl></dd><dt><span class="section"><a href="#id287624881">1.5. Overview of Transactions</a></span></dt><dd><dl><dt><span class="section"><a href="#id287624936">1.5.1. How Isolation Levels Affect Transactions</a></span></dt><dt><span class="section"><a href="#id287624993">1.5.2. Overview of Savepoints</a></span></dt></dl></dd><dt><span class="section"><a href="#security">1.6. Overview of Security</a></span></dt></dl></div><p>
Welcome to Embedded InnoDB, a general-purpose embedded
database engine that is capable of providing a wealth of data management services.
It is designed from the ground up for high-throughput applications requiring
in-process, bullet-proof management of mission-critical data. Embedded InnoDB can
gracefully scale from managing a few bytes to terabytes of data. For the most
part, Embedded InnoDB is limited only by your system's available physical resources.
</p><div class="section" title="1.1. Overview of Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="overview.product"></a>1.1.&nbsp;Overview of Embedded InnoDB</h2></div></div></div><p>
You use Embedded InnoDB through a series of programming APIs that give you the
ability to read and write your data, manage your database(s), and
perform other more advanced activities such as managing transactions. 
</p><p>
Because Embedded InnoDB is an embedded database engine, it is extremely fast.
You compile and link it into your application in the same way as you would any
third-party library.
This means that Embedded InnoDB runs in the same process space
as does your application, allowing you to avoid the high cost of
interprocess communications incurred by stand-alone database servers.
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Before going any further, it is important to mention that Embedded InnoDB is not
a relational database (although you could use it to build a relational 
database). Out of the box, Embedded InnoDB does not provide higher-level features
such as triggers, or a high-level query language such as SQL. 
Instead, Embedded InnoDB provides just those APIs required to store and retrieve your data as
efficiently as possible.
</p></div><p>
Embedded InnoDB lets you embed database processing within an application,
without the need for an actual installation of MySQL or another database.
The database operations are performed by an engine derived from the InnoDB plugin.
You can perform database operations such as queries returning result sets,
insert, update, and delete logic on database structures such as tables and columns, and transaction management.
You call C or C++
functions to perform these operations and process the results, rather than submitting SQL statements.
</p><div class="section" title="1.1.1.  Comparison with Database Application Development"><div class="titlepage"><div><div><h3 class="title"><a id="overview.dbappdev"></a>1.1.1.&nbsp;
Comparison with Database Application Development
</h3></div></div></div><p>
In comparison to other compact or embedded database systems you might be familiar with:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>You work with tables, columns, and indexes.</p></li><li class="listitem"><p>You can treat data as distinct types such as <code class="literal">VARCHAR</code>, <code class="literal">INTEGER</code>, and so on, or as raw bytes (similar to a <code class="literal">BLOB</code>).</p></li><li class="listitem"><p>All your application logic goes through API calls, not a SQL interface.</p></li><li class="listitem"><p>Your application requires zero installation and configuration other than providing your own executable program.
The library can be linked statically or dynamically into your application.
All configuration parameters have default values that apply if you do not set them explicitly.
All necessary files are created if they do not already exist, inside the application's current
working directory unless otherwise specified.
Currently, no environment variables are needed or used.
</p></li><li class="listitem"><p>
<a id="id287624024" class="indexterm"></a>
Your database work is done inside ACID-compliant transactions, with commit / rollback / savepoint capability.
</p><p>
Because DDL operations such as creating tables cause changes in the data dictionary,
you must enclose DDL operations within transactions.
The data dictionary must be locked in exclusive mode when creating tables
using the API function <code class="literal">ib_schema_lock_exclusive()</code>.
Although for safety you must enclose DDL operations within a transaction,
these operations cannot be rolled back.
</p></li><li class="listitem"><p>You retrieve query results by iterating through cursors.
The cursor moves in sequence through a set of index values; you must step through the cursor
and test the column values for each result, to determine when to stop reading.
</p></li><li class="listitem"><p>You manipulate column values through structures called <span class="emphasis"><em>tuples</em></span>.
Depending on the type of operation,
these structures represent different groups of indexed columns,
or all the columns of a table.</p></li><li class="listitem"><p>You have control over low-level details such as transaction isolation levels and lock modes for tables and cursors.</p></li><li class="listitem"><p>Your application should use a pre-planned, stable data model.
You cannot change column definitions after creating a table.</p></li><li class="listitem"><p>You can quickly look up data using a key value or range of values,
by referencing an index on any column.
To perform more complex kinds of queries using multiple conditions or tables, your application must
perform some of the logic and optimizations normally applied by a SQL parser.
</p></li><li class="listitem"><p>All data is written to and read from disk.
A certain amount of buffering and caching is handled by the InnoDB engine,
with recovery if something goes wrong before or during write operations.
</p></li><li class="listitem"><p>Indexes are based on B-tree data structures.
They can be unique (to represent a primary key) or can index values
that contain duplicates.
Indexes do represent null values, in contrast to
some database systems that leave nulls out of indexes.
</p></li><li class="listitem"><p>Each database is represented by its own directory.</p></li><li class="listitem"><p>
By default, all tables are stored in one data file.
When the <code class="literal">file_per_table</code> option is set,
each table is stored in a separate data file.
</p></li><li class="listitem"><p>Every table has a primary key. The primary key is referred to
as a clustered index, because the table data is stored within the index itself,
based on the primary key order.
(Similar to an Oracle index-organized table.)
If your application does not create a primary key, InnoDB creates one based on the row ID.</p></li><li class="listitem"><p>Indexes other than the primary key are referred to as secondary indexes.
They have the flexibility to allow duplicates and overlook nulls in the indexed columns.</p></li><li class="listitem"><p>The definition of each table or index is referred to as its schema.
You use a sequence of API calls to set up a table schema or index schema, and another
API call to create the table or index.
(As opposed to a <code class="literal">CREATE TABLE</code> or <code class="literal">CREATE INDEX</code>
statement in SQL, which performs those operations in a single step.)
</p></li></ul></div><p>
Examples are given throughout this book that are designed to illustrate API usage.
These examples build upon each other; for brevity, the later examples omit
some of the repetitive initialization code such as starting a transaction.
The sample programs, including all the required initialization, are
available in the Embedded InnoDB software distribution.
You can find them in:
</p><pre class="programlisting">share/innodb-release-version/examples</pre></div><div class="section" title="1.1.2.  Comparison with InnoDB Plugin"><div class="titlepage"><div><div><h3 class="title"><a id="overview.plugin"></a>1.1.2.&nbsp;
Comparison with InnoDB Plugin
</h3></div></div></div><p>
Being familiar with the InnoDB storage engine, and in particular the
latest InnoDB technology available through the InnoDB Plugin, can give you
a head start in developing Embedded InnoDB applications.
For information about the Plugin or to download it, see:
</p><pre class="screen"><a class="ulink" href="https://web.archive.org/web/20100605140832/http://www.innodb.com/products/innodb_plugin/" target="_top">http://www.innodb.com/products/innodb_plugin/</a>
</pre><p>
For InnoDB terminology that applies to Embedded InnoDB development,
see <a class="xref" href="#glossary" title="Embedded InnoDB Glossary">Embedded InnoDB Glossary</a>.
</p><p>
The version number of the Embedded InnoDB product reflects the version number of
the underlying InnoDB Plugin.
For example, Embedded InnoDB version 1.0.3.5325 was based on InnoDB Plugin version 1.0.3.
</p><p>
These features in particular are inherited from the InnoDB Plugin:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Index creation is much faster than historically has been the case in InnoDB.</p></li><li class="listitem"><p>Table data can be compressed on disk, for tables that use the
new <span class="quote">“<span class="quote">Barracuda</span>”</span> file format.</p></li><li class="listitem"><p>Data from multiple tables can be stored together in a single file
(the <span class="quote">“<span class="quote">system tablespace</span>”</span>), or in a separate
file for each table, or a combination of those approaches.</p></li></ul></div><p>
Some InnoDB Plugin features are not available:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Foreign key relationships are not supported.</p></li><li class="listitem"><p>Auto-increment columns are not available.</p></li><li class="listitem"><p>Semi-consistent read is not available.</p></li><li class="listitem"><p>Descending indexes are not available.</p></li></ul></div></div><div class="section" title="1.1.3.  Comparison with MySQL"><div class="titlepage"><div><div><h3 class="title"><a id="overview.mysql"></a>1.1.3.&nbsp;
Comparison with MySQL
</h3></div></div></div><p>
If you like, you can develop and deploy Embedded InnoDB applications without using MySQL at all.
</p><p>
You might find it helpful to be familiar with the capabilities of MySQL and
the InnoDB storage engine to help design your application logic,
tune your data-manipulation code, and debug any problems.
For example, if you have existing MySQL table definitions, you can see how the
types are mapped to Embedded InnoDB constant values, as explained in <a class="xref" href="#types-column" title="6.2.4. Column Types">Section&nbsp;6.2.4, “Column Types”</a>.
</p><p>
For even faster prototyping and debugging, you can transfer data directories
back and forth between a MySQL installation
and an Embedded InnoDB application.
For example, you could create a set of InnoDB tables using SQL in MySQL, then perform all the
data manipulation through an Embedded InnoDB program.
Or you could set up data through an Embedded InnoDB program, then verify the data by
running queries from MySQL.
For details about this process, see <a class="xref" href="#transfer" title="Chapter 10. Transferring Databases between MySQL and Embedded InnoDB">Chapter&nbsp;10, <i>Transferring Databases between MySQL and Embedded InnoDB</i></a>.
</p><p>
Features from MySQL that require higher-level interfaces are not available in Embedded InnoDB programs, for example:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The <code class="literal">INFORMATION_SCHEMA</code> tables.</p></li><li class="listitem"><p><code class="literal">.FRM</code> files.</p></li><li class="listitem"><p>Partitioned tables.</p></li><li class="listitem"><p>Replication.</p></li><li class="listitem"><p>Auto-commit.</p></li></ul></div></div></div><div class="section" title="1.2. Overview of Tables and Table Data"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="tables"></a>1.2.&nbsp;Overview of Tables and Table Data</h2></div></div></div><p>
InnoDB databases contain tables.
Tables have the familiar structure of rows, columns, and datatypes for the columns.
</p><p>
Tables contain records.
(You can think of records as rows.
We refer to records only to be precise,
because some of the DML operations use
structures that are a little different
than traditional table rows.)
</p><p>
The column values for each record are represented in memory by a tuple.
When you insert a record, you fill a set of column values into a tuple.
When you update a record, you read the set of current column values into a tuple,
modify one or more columns, then store that tuple back into the same record.
When you retrieve data from a table, the columns come back through a tuple.
</p><p>
For fuller definitions of these terms and the relationships between them,
see <a class="link" href="#glossary" title="Embedded InnoDB Glossary">the Glossary</a>.
</p><div class="section" title="1.2.1. Overview of the Data Dictionary"><div class="titlepage"><div><div><h3 class="title"><a id="id287624629"></a>1.2.1.&nbsp;Overview of the Data Dictionary</h3></div></div></div><a id="id287624632" class="indexterm"></a><p>
Embedded InnoDB, being based on the underlying InnoDB storage engine, keeps track of tables, indexes,
and table columns.
This information is stored in a set of system tables called
the <a class="link" href="#glos_data_dictionary" title="data dictionary">data dictionary</a>.
Embedded InnoDB applications are not prevented from writing to these tables as in regular MySQL usage;
however, you must treat these tables as read-only.
</p><p>
The system tables are: 
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">SYS_TABLES</code> - Contains all the tables</p></li><li class="listitem"><p><code class="literal">SYS_COLUMNS</code> - Contains all the columns for all the tables</p></li><li class="listitem"><p><code class="literal">SYS_INDEXES</code> - Contains all the indexes defined on all the tables</p></li><li class="listitem"><p><code class="literal">SYS_FIELDS</code> - Contains all the columns for all the indexes</p></li></ul></div><p>
For efficiency in setting up multiple data structures,
Embedded InnoDB does not wrap each table or index creation operation within a transaction.
You must wrap these operations within calls to lock and unlock the data dictionary,
and to start and commit transactions.
You will see examples of the proper sequences of function calls later on.
</p><p>
Each separate program using the Embedded InnoDB library must use its own data dictionary
and data files.
</p></div><div class="section" title="1.2.2. Overview of Data Files"><div class="titlepage"><div><div><h3 class="title"><a id="data_files"></a>1.2.2.&nbsp;Overview of Data Files</h3></div></div></div><p>
Data files are stored by default underneath the current working directory of the application.
You can specify a different location by <a class="link" href="#start.config" title="2.5. Configuration">calling the configuration APIs</a>.
</p><p>
The system tablespace, which holds the tables of the data dictionary
and by default all the tables
used by your application, is a single large file.
If you change the configuration settings to use the file-per-table option,
each table created afterwards is stored in a separate file.
</p></div></div><div class="section" title="1.3. Overview of Indexes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="indexes"></a>1.3.&nbsp;Overview of Indexes</h2></div></div></div><a id="id287624696" class="indexterm"></a><p>
A table can have one or more <a class="link" href="#glos_index" title="index">indexes</a> defined on it.
</p><p>
InnoDB requires that every table must have a primary key defined on it,
which we refer to as the <a class="link" href="#glos_clustered_index" title="clustered index">clustered index</a>.
InnoDB automatically creates a clustered index you do not specify one.
The table records are physically organized to be in the order specified by this index.
In fact, all the table data is stored in the index itself.
(Thus, you should choose primary key columns that have relatively stable values,
to avoid records moving around to maintain the index order.)
</p><p>
You use the clustered index when performing write operations,
when accessing columns that are not covered by other indexes,
and typically for your most important queries.
</p><p>
All other indexes are referred to as <a class="link" href="#glos_secondary_index" title="secondary index">secondary indexes</a>.
These indexes include a subset of the table columns (the indexed columns,
plus the primary key columns), making them more suitable for data that is
frequently inserted, updated, and deleted.
You can retrieve the values for indexed columns directly from these indexes.
</p><p>
When you use a secondary index to find records, but need to retrieve
columns that are not part of the secondary index: set the <span class="quote">“<span class="quote">need access to
clustered index</span>”</span> flag in the secondary index cursor (by calling
<code class="literal">ib_cursor_set_cluster_access()</code> on the secondary index cursor),
find the relevant entry in the secondary index, then use the secondary index cursor
to read the complete record with a clustered index read tuple.
</p><p>
For either kind of index, the index key can be a single column, or a
composite key derived from multiple columns.
When you use a composite index,
the first column in the index is the most important from a query perspective.
The other indexed columns are primarily to help retrieve results in order
by those columns.
</p><p>
For fuller definitions of these terms and the relationships between them,
see <a class="link" href="#glossary" title="Embedded InnoDB Glossary">the Glossary</a>.
</p></div><div class="section" title="1.4. Overview of Queries and WHERE Clauses"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="queries"></a>1.4.&nbsp;Overview of Queries and WHERE Clauses</h2></div></div></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Pay close attention to this section!
The details of how you position and move cursors,
and translate SQL <code class="literal">WHERE</code> clauses into your own application logic,
are probably the most challenging concepts to
grasp when coming from a SQL background with a full-fledged database.
</p></div><p>
High-end databases process complex SQL queries and produce a result set,
representing exactly those rows that match all the query conditions.
Embedded databases typically allow for simpler queries, such as
looking up a single item by searching for a unique key.
</p><p>
Embedded InnoDB occupies a middle ground.
When you position a cursor, you supply a single comparison operator
that works on a single column.
Embedded InnoDB puts the cursor at the appropriate starting place within the table.
You can read forward or backward, examining other columns as you go.
By coding your own application logic, you can emulate more complicated queries.
Coding queries at such a low level avoids some of the usual SQL parsing
overhead, and allows you to choose your own optimization techniques.
</p><p>
For fuller definitions of these terms and the relationships between them,
see <a class="link" href="#glossary" title="Embedded InnoDB Glossary">the Glossary</a>.
</p><p>
For the information needed to use these APIs,
after learning the background information in this section,
see:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="#dml.where" title="4.3.5. Emulating a WHERE Clause">Section&nbsp;4.3.5, “Emulating a WHERE Clause”</a></p></li><li class="listitem"><p><a class="xref" href="#tuple-functions" title="6.7.7. API Functions - Tuples">Section&nbsp;6.7.7, “API Functions - Tuples”</a></p></li><li class="listitem"><p><a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a></p></li></ul></div><div class="section" title="1.4.1. Overview of Cursors"><div class="titlepage"><div><div><h3 class="title"><a id="id287624779"></a>1.4.1.&nbsp;Overview of Cursors</h3></div></div></div><a id="id287624782" class="indexterm"></a><p>
<a class="link" href="#glos_cursor" title="cursor">Cursors</a> provide a mechanism to iterate over the records in a table. 
Using cursors, you can read, write, and delete database records. 
You perform all cursor operations by passing a handle (an opaque type) to
the relevant functions. As each cursor is created, it is attached to a transaction.
All changes to the database using the cursor are part of
that same transaction; you must make sure that you are finished using
the cursor before the transaction ends.
Once a transaction is committed or rolled back, the cursor handle is considered invalid.
All subsequent results from using the stale cursor handle are undefined.
You receive a cursor handle by opening an existing table or index,
using the ID or the name of the applicable table or index.
(The relevant API calls are 
<code class="literal">ib_cursor_open_table</code>,
<code class="literal">ib_cursor_open_table_using_id</code>,
<code class="literal">ib_cursor_open_index_using_name</code>,
and
<code class="literal">ib_cursor_open_index_using_id</code>.)
</p><p>
You can reuse a cursor by calling <code class="literal">ib_cursor_reset</code>
on the cursor handle and attaching it to a running transaction.
You close a cursor by calling <code class="literal">ib_cursor_close</code>.
</p></div><div class="section" title="1.4.2. Overview of Tuples"><div class="titlepage"><div><div><h3 class="title"><a id="id287624823"></a>1.4.2.&nbsp;Overview of Tuples</h3></div></div></div><a id="id287624826" class="indexterm"></a><p>
<a class="link" href="#glos_tuple" title="tuple">Tuples</a> are memory structures that represent different sets of columns,
You use them for all kinds of DML operations.
In a DML operation, they represent the columns of a record being inserted or updated.
In a query, they represent columns from a record pointed to be a cursor.
</p><p>
There are different kinds of tuples derived from the clustered index or a secondary index.
There is also a distinction between tuples used for simply searching for a record,
and for reading back the columns of the record.
In all, you work with four different kinds of tuples based on the above combinations.
</p><div class="section" title="1.4.2.1. The “Search” Tuple"><div class="titlepage"><div><div><h4 class="title"><a id="id287624839"></a>1.4.2.1.&nbsp;The <span class="quote">“<span class="quote">Search</span>”</span> Tuple</h4></div></div></div><p>
A <a class="link" href="#glos_search_tuple" title="search tuple">search tuple</a> is
a fast, compact structure that only contains the columns
needed to perform a search.
You use this kind of tuple to perform queries where the answer
requires only the columns from a single index.
</p></div><div class="section" title="1.4.2.2. The “Read” and “Read/Write” Tuples"><div class="titlepage"><div><div><h4 class="title"><a id="id287624852"></a>1.4.2.2.&nbsp;The <span class="quote">“<span class="quote">Read</span>”</span> and <span class="quote">“<span class="quote">Read/Write</span>”</span> Tuples</h4></div></div></div><p>
A <a class="link" href="#glos_read_tuple" title="read tuple">read tuple</a> is a
larger structure containing extra columns so that you
can get back values not just from indexed columns. When inserting or
updating row you use a <span class="quote">“<span class="quote">read</span>”</span> tuple.
</p><p>
When this tuple comes from the clustered index (that is, the
primary key), it contains all the columns of the table.
</p><p>
When this tuple comes from a secondary index, in addition to
the columns from the index, it also contains the primary key columns.
If the query can be satisfied with the columns from the secondary
index and the clustered index, this tuple is all you need.
If you need more columns that are not covered by those two indexes,
you can set the <span class="quote">“<span class="quote">clustered index access flag</span>”</span>
before searching,
and use a clustered index read tuple to read the columns from the cluster
index using the secondary index cursor that was used for searching.
</p></div></div></div><div class="section" title="1.5. Overview of Transactions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287624881"></a>1.5.&nbsp;Overview of Transactions</h2></div></div></div><a id="id287624884" class="indexterm"></a><p>
All database operations need to be covered by <a class="link" href="#glos_transaction" title="transaction">transactions</a>.
You start by acquiring a transaction handle by calling the
<code class="literal">ib_trx_begin()</code> function and passing an isolation level for the transaction.
</p><pre class="screen">ib_trx_t   ib_trx = ib_trx_begin(IB_TRX_SERIALIZABLE);</pre><p>
When a transaction is committed, all changes made within that transaction are
made permanent.
For example:
</p><pre class="screen">err = ib_trx_commit(ib_trx);</pre><p>
When a transaction is rolled back, all changes made within that transaction are discarded.
For example:
</p><pre class="screen">err = ib_trx_rollback(ib_trx);</pre><p>
Once a transaction is committed or rolled back, the cursor handle is considered invalid.
All subsequent results from using the stale cursor handle are undefined.
</p><p>
There is one special case to consider with transactions.
When the InnoDB deadlock monitor selects a victim (an active transaction)
to roll back, the selected transaction is rolled back by InnoDB.
You cannot commit or roll back this transaction using the above commit/rollback functions.
The handle can either be freed or reused to start a new transaction.
The function calls for this special case are:
</p><pre class="screen">ib_trx_release(ib_trx)</pre><p>
and
</p><pre class="screen">ib_trx_start(ib_trx)</pre><p>
To query the transaction state you can use:
</p><pre class="screen">ib_trx_state_t trx_state = ib_trx_state(ib_trx)</pre><p>
and examine the state returned by this function.
</p><p>
For fuller definitions of these terms and the relationships between them,
see <a class="link" href="#glossary" title="Embedded InnoDB Glossary">the Glossary</a>.
</p><div class="section" title="1.5.1. How Isolation Levels Affect Transactions"><div class="titlepage"><div><div><h3 class="title"><a id="id287624936"></a>1.5.1.&nbsp;How Isolation Levels Affect Transactions</h3></div></div></div><p>
Each transaction has a property called the <span class="emphasis"><em>isolation level</em></span>
that controls how strictly the InnoDB engine protects different transactions from
<span class="quote">“<span class="quote">seeing</span>”</span> uncommitted changes made by other transactions.
For maximum correctness and reliability, you should typically choose the
<code class="literal">IB_REPEATABLE_READ</code> isolation level.
For maximum performance in advanced applications,
where you can ensure that this level of strictness is not required,
you might choose a different isolation level,
as explained in <a class="xref" href="#trx.isolation" title="5.3. Setting the Transaction Isolation Level">Section&nbsp;5.3, “Setting the Transaction Isolation Level”</a>.
</p></div><div class="section" title="1.5.2. Overview of Savepoints"><div class="titlepage"><div><div><h3 class="title"><a id="id287624993"></a>1.5.2.&nbsp;Overview of Savepoints</h3></div></div></div><a id="id287624996" class="indexterm"></a><p>
Savepoints help to implement nested transactions. 
They can be used to provide scope to operations on tables that are part of a larger transaction.
For example, scheduling a trip in a reservation system might involve booking several different flights;
if a desired flight is unavailable, you might roll back the changes involved in booking that one leg,
without rolling back the earlier flights that were successfully booked.
Embedded InnoDB provides these functions for savepoints:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><code class="literal">ib_savepoint_take</code></p><p>
Creates a named savepoint. 
If the transaction is not yet started, starts it. 
If there is already a savepoint of the same name, this call erases that old savepoint and replaces it with a new one.
Savepoints are deleted in a transaction commit or rollback.
</p></li><li class="listitem"><p><code class="literal">ib_savepoint_release</code></p><p>
Releases only the named savepoint.
Any savepoints that were set after this savepoint are left as-is.
</p></li><li class="listitem"><p><code class="literal">ib_savepoint_rollback</code></p><p>
Rolls back a transaction back to a named savepoint. 
Modifications after the savepoint are undone, but Embedded InnoDB
does <span class="bold"><strong>not</strong></span> release the corresponding locks that are stored in memory. 
If a lock is <span class="quote">“<span class="quote">implicit</span>”</span>, that is, a new inserted row holds a lock
where the lock information is carried by the transaction ID stored in the row,
these locks are naturally released in the rollback. 
Any savepoints that were set after this savepoint are deleted.
If name equals <code class="literal">NULL</code> (the C NULL value), then all the savepoints are rolled back.
</p></li></ul></div></div></div><div class="section" title="1.6. Overview of Security"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="security"></a>1.6.&nbsp;Overview of Security</h2></div></div></div><p>
Any data encryption or protection for the data files must be provided
by your application.
There is no security provided by Embedded InnoDB and no encryption.
It does not have any notion of authentication or authorization.
</p></div></div><div class="chapter" title="Chapter 2. Getting Started with Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title"><a id="start"></a>Chapter&nbsp;2.&nbsp;Getting Started with Embedded InnoDB</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id287625122">2.1. Downloading Embedded InnoDB</a></span></dt><dt><span class="section"><a href="#id287625136">2.2. Prerequisites for Embedded InnoDB</a></span></dt><dd><dl><dt><span class="section"><a href="#id287625141">2.2.1. Prerequisites for Linux and UNIX Systems</a></span></dt><dt><span class="section"><a href="#id287625163">2.2.2. Prerequisites for Windows Systems</a></span></dt></dl></dd><dt><span class="section"><a href="#id287625313">2.3. Installing Embedded InnoDB</a></span></dt><dt><span class="section"><a href="#start.deploy">2.4. Starting the InnoDB Database Engine</a></span></dt><dt><span class="section"><a href="#start.config">2.5. Configuration</a></span></dt><dd><dl><dt><span class="section"><a href="#start.config.int">2.5.1. Setting Integer Variables</a></span></dt><dt><span class="section"><a href="#start.config.bool">2.5.2. Setting Boolean Values</a></span></dt><dt><span class="section"><a href="#start.config.text">2.5.3. Setting Text Values</a></span></dt></dl></dd><dt><span class="section"><a href="#start.app">2.6. Application Usage</a></span></dt><dt><span class="section"><a href="#start.shutdown">2.7. Shutting Down the InnoDB Database Engine</a></span></dt><dd><dl><dt><span class="section"><a href="#start.shutdown.issues">2.7.1. Potential Shutdown Issues</a></span></dt></dl></dd></dl></div><div class="section" title="2.1. Downloading Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287625122"></a>2.1.&nbsp;Downloading Embedded InnoDB</h2></div></div></div><p>
Download Embedded InnoDB (source, or binaries for supported platforms)
by visiting the Embedded InnoDB download page: 
</p><pre class="screen"><a class="ulink" href="https://web.archive.org/web/20100605140832/http://www.innodb.com/products/embedded-innodb/download/" target="_top">http://www.innodb.com/products/embedded-innodb/download/</a>
</pre><p>
</p></div><div class="section" title="2.2. Prerequisites for Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287625136"></a>2.2.&nbsp;Prerequisites for Embedded InnoDB</h2></div></div></div><p>
Ensure that your development systems have the appropriate
operating systems, libraries, and development tools needed
to build Embedded InnoDB applications.
</p><div class="section" title="2.2.1. Prerequisites for Linux and UNIX Systems"><div class="titlepage"><div><div><h3 class="title"><a id="id287625141"></a>2.2.1.&nbsp;Prerequisites for Linux and UNIX Systems</h3></div></div></div><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
You must have the GNU Compiler Collection and
GNU <code class="literal">autotools</code> package installed.
</p></li><li class="listitem"><p>
By default, you must have root privileges so that you can install the
shared libraries in system directories such as
<code class="literal">/usr/local/lib</code>.
You can also change the shared library location as part of the build
process, to store the library in a directory that you own.
</p></li></ul></div></div><div class="section" title="2.2.2. Prerequisites for Windows Systems"><div class="titlepage"><div><div><h3 class="title"><a id="id287625163"></a>2.2.2.&nbsp;Prerequisites for Windows Systems</h3></div></div></div><p>
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
To build from source, you must have the <code class="literal">cmake</code> command, available
as part of the CMake open source package from:
</p><pre class="screen"><a class="ulink" href="https://web.archive.org/web/20100605140832/http://www.cmake.org/" target="_top">http://www.cmake.org/</a>
</pre><p>
</p></li><li class="listitem"><p>
You must have the Microsoft Visual Studio product.
(See the <code class="literal">README</code> file for the build options
corresponding to different levels of the
Microsoft Visual Studio product.)
</p></li><li class="listitem"><p>
To build a Embedded InnoDB library that includes the table compression
feature, you must have the open source <code class="literal">zlib</code>
library on your system.
This library is included by default on most Linux and UNIX systems;
Windows users can download it from:

</p><pre class="screen"><a class="ulink" href="https://web.archive.org/web/20100605140832/http://www.zlib.net/" target="_top">http://www.zlib.net</a>
</pre><p>
</p></li></ul></div></div></div><div class="section" title="2.3. Installing Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287625313"></a>2.3.&nbsp;Installing Embedded InnoDB</h2></div></div></div><p>
To install Embedded InnoDB:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Untar or unzip the distribution to the directory of
your choice.
</p></li><li class="listitem"><p>
If you downloaded the source distribution,
build the product binaries.
For information on building Embedded InnoDB, see 
<code class="literal">README</code> in the top-level directory in the source
distribution.
</p><p>
In particular, if you want to create a smaller shared library or remove
the dependency on the <code class="literal">zlib</code>, you can turn off the
InnoDB compression feature by including the option
<code class="literal">--disable-compression</code> when running the
<code class="literal">configure</code> command.
You can also turn off the
XA support by including the option
<code class="literal">--disable-xa</code> when running the
<code class="literal">configure</code> command.
</p></li><li class="listitem"><p>
Set up your application build environment to link in the Embedded InnoDB
library, whose file name starts with <code class="literal">libinnodb</code>.
On Linux and UNIX systems, include the directory name in the value of the
<code class="literal">$LIBPATH</code> variable.
On Windows systems, put the library in a directory that is listed in the
<code class="literal">%PATH%</code> variable.
</p></li></ul></div><p>
Consult the Embedded InnoDB sample programs to see the outline and
common operations for an Embedded InnoDB application.
On Linux and UNIX systems, these sample programs are installed under
<code class="literal">/usr/local/share/embedded_innodb-1.0/examples</code>.
On Windows systems, these sample programs are installed under
<code class="literal">embedded_innodb-1.0\examples</code>.
See <a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a>
for details about each one.
</p></div><div class="section" title="2.4. Starting the InnoDB Database Engine"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="start.deploy"></a>2.4.&nbsp;Starting the InnoDB Database Engine</h2></div></div></div><p>
Each time your program that uses the Embedded InnoDB libraries starts,
it must start the InnoDB engine; the startup process creates
I/O and background threads. 
Once control returns from the <code class="literal">ib_startup</code> function,
it is safe to use InnoDB for normal database operations.
</p><p>
When InnoDB is run for the first time
with a particular data directory, it creates the system tablespaces and the log files. 
</p><p>
When InnoDB is started on a previous instance of a database,
InnoDB may perform recovery first, depending on whether it was shut down cleanly or not.
</p><pre class="screen">ib_err_t	err;
ib_u64_t	version;

/* Check the API version. */
version = ib_api_version();

/* The format of version is:
   | 16 bits future use | 16 bits current | 16 bits revision | 16 bits age | */

/* Initialize the memory sub-system. */
ib_init();

/* Call the ib_cfg_*() functions to setup the directory etc. */

/* Create system files if this is the first time
or do recovery if starting an existing instance. */
err = ib_startup("barracuda");
/* File format "barracuda" supports all
the currently available table formats. */

if (err == DB_SUCCESS) {
	printf("InnoDB started!\n");
} else {
	printf("Error starting up InnoDB: %s\n", ib_strerror(err));
}

err = ib_shutdown(IB_SHUTDOWN_NORMAL);

if (err == DB_SUCCESS) {
	printf("InnoDB shutdown succeed!\n");
} else {
	printf("InnoDB shutdown failed: err %s\n", ib_strerror(err));
}

</pre><p>
For further information, see <a class="xref" href="#startup-functions" title="6.7.1. API Functions - Startup/Shutdown">Section&nbsp;6.7.1, “API Functions - Startup/Shutdown”</a>.
</p></div><div class="section" title="2.5. Configuration"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="start.config"></a>2.5.&nbsp;Configuration</h2></div></div></div><p>
InnoDB operates under the control of a set of configuration variables,
for example, to turn particular features on and off, or to specify
the locations of data files.
Embedded InnoDB uses API calls to modify these settings.
</p><p>
The Embedded InnoDB configuration variables are listed and described in <a class="xref" href="#config-vars" title="Chapter 8. Embedded InnoDB Configuration Variables">Chapter&nbsp;8, <i>Embedded InnoDB Configuration Variables</i></a>.
</p><p>
The values, scope, and workings of all the InnoDB configuration options are documented in the
<a class="ulink" href="https://web.archive.org/web/20100605140832/http://dev.mysql.com/doc/refman/5.1/en/innodb-configuration.html" target="_top">MySQL manual</a>.
</p><p>
There are three types of configuration variables: integer, text and boolean.
All three types can be set using either a generic function call:
</p><pre class="screen">ib_cfg_set(const char*, ...)</pre><p> or by using the macros
listed below.
We recommend that you use the macros, for readability without sacrificing performance.
</p><p>
For information on the data types used with the configuration APIs, see <a class="xref" href="#types-config" title="6.2.2. Configuration Variable Types">Section&nbsp;6.2.2, “Configuration Variable Types”</a>.
For information on the configuration APIs themselves, see <a class="xref" href="#configuration-functions" title="6.7.4. API Functions - Configuration">Section&nbsp;6.7.4, “API Functions - Configuration”</a>.
</p><div class="section" title="2.5.1. Setting Integer Variables"><div class="titlepage"><div><div><h3 class="title"><a id="start.config.int"></a>2.5.1.&nbsp;Setting Integer Variables</h3></div></div></div><p>
In this example, we set the InnoDB buffer pool size to 128 megabytes.
</p><pre class="screen">ib_err_t	err;

err = ib_cfg_set_int("buffer_pool_size", 134217728)

if (err != DB_SUCCESS) {
	fprintf(stderr, "Error setting InnoDB buffer pool size: %s\n",
		ib_strerror(err));
}
</pre><p>
</p></div><div class="section" title="2.5.2. Setting Boolean Values"><div class="titlepage"><div><div><h3 class="title"><a id="start.config.bool"></a>2.5.2.&nbsp;Setting Boolean Values</h3></div></div></div><p>
In this example we enable the file-per-table setting:
</p><pre class="screen">err = ib_cfg_set_bool_on("file_per_table");
/* Check whether we were successful in enabling the setting or not. */
</pre><p>
In this example we disable the file per table setting:
</p><pre class="screen">err = ib_cfg_set_bool_off("file_per_table");
/* Check whether we were successful in disabling the setting or not. */
</pre><p>
</p></div><div class="section" title="2.5.3. Setting Text Values"><div class="titlepage"><div><div><h3 class="title"><a id="start.config.text"></a>2.5.3.&nbsp;Setting Text Values</h3></div></div></div><p>
In this example we set the InnoDB data file path:
</p><pre class="screen">err = ib_cfg_set_text("data_file_path", "ibdata1:32M:autoextend");
/* Check whether we were successful in setting the data file path. */
</pre><p>
</p></div></div><div class="section" title="2.6. Application Usage"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="start.app"></a>2.6.&nbsp;Application Usage</h2></div></div></div><p>
In between the startup and shutdown operations, your application
performs its data management and data processing.
Those operations are the focus of the remainder of this book:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
<a class="xref" href="#ddl" title="Chapter 3. Performing CREATE and DROP Operations (DDL) with Embedded InnoDB">Chapter&nbsp;3, <i>Performing CREATE and DROP Operations (DDL) with Embedded InnoDB</i></a>
</p></li><li class="listitem"><p>
<a class="xref" href="#dml" title="Chapter 4. Performing SELECT, INSERT, UPDATE, and DELETE (DML) Operations with Embedded InnoDB">Chapter&nbsp;4, <i>Performing SELECT, INSERT, UPDATE, and DELETE (DML) Operations with Embedded InnoDB</i></a>
</p></li><li class="listitem"><p>
<a class="xref" href="#transactions" title="Chapter 5. Managing Transactions with Embedded InnoDB">Chapter&nbsp;5, <i>Managing Transactions with Embedded InnoDB</i></a>
</p></li><li class="listitem"><p>
<a class="xref" href="#c-api" title="Chapter 6. C API Reference for Embedded InnoDB">Chapter&nbsp;6, <i>C API Reference for Embedded InnoDB</i></a>
</p></li></ul></div></div><div class="section" title="2.7. Shutting Down the InnoDB Database Engine"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="start.shutdown"></a>2.7.&nbsp;Shutting Down the InnoDB Database Engine</h2></div></div></div><p>
Once your program is finished with the InnoDB engine, shut it down cleanly
using the <a class="link" href="#ib_shutdown" title="6.7.1.4. ib_shutdown"><code class="literal">ib_shutdown</code></a> function,
specifying one of the constants listed in <a class="xref" href="#modes-shutdown" title="6.3.1. Shutdown Modes">Section&nbsp;6.3.1, “Shutdown Modes”</a>.
There must be no active transactions when shutdown is initiated. 
All transactions must either be committed or rolled back. 
It is always good practice to shut down the engine once you are done with it;
shutting down cleanly avoids any recovery processing the next time you start the engine.
</p><div class="section" title="2.7.1. Potential Shutdown Issues"><div class="titlepage"><div><div><h3 class="title"><a id="start.shutdown.issues"></a>2.7.1.&nbsp;Potential Shutdown Issues</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Sometimes shutdown may take longer than expected,
because data may be buffered during <code class="literal">INSERT</code> operations.
The buffered data is written to disk before the engine shuts down.
The engine also may need to complete outstanding <code class="literal">DELETE</code> operations
where the records are marked for removal from the table, but not removed immediately;
this is known as the <span class="quote">“<span class="quote">purge</span>”</span> step.
</p></li></ul></div></div></div></div><div class="chapter" title="Chapter 3. Performing CREATE and DROP Operations (DDL) with Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title"><a id="ddl"></a>Chapter&nbsp;3.&nbsp;Performing CREATE and DROP Operations (DDL) with Embedded InnoDB</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id287625597">3.1. Managing Databases</a></span></dt><dd><dl><dt><span class="section"><a href="#id287625624">3.1.1. Creating a Database</a></span></dt><dt><span class="section"><a href="#id287625649">3.1.2. Dropping a database</a></span></dt></dl></dd><dt><span class="section"><a href="#id287625659">3.2. Managing Tables</a></span></dt><dd><dl><dt><span class="section"><a href="#id287625669">3.2.1. Creating a Table</a></span></dt><dt><span class="section"><a href="#open-table">3.2.2. Opening a Table or Index</a></span></dt><dt><span class="section"><a href="#close-table">3.2.3. Closing a Table or Index</a></span></dt><dt><span class="section"><a href="#id287626460">3.2.4. Truncating a Table</a></span></dt></dl></dd><dt><span class="section"><a href="#id287626489">3.3. Managing Indexes</a></span></dt><dd><dl><dt><span class="section"><a href="#id287626510">3.3.1. Creating an Index</a></span></dt><dt><span class="section"><a href="#id287626537">3.3.2. Opening an Index</a></span></dt></dl></dd></dl></div><p>
This section discusses how to perform the equivalent of SQL
<code class="literal">CREATE</code> and <code class="literal">DROP</code>
operations with the Embedded InnoDB APIs.
<code class="literal">ALTER</code> operations are currently not supported.
</p><p>
This section refers to tables, indexes, and other database terminology that may have
special nuances within Embedded InnoDB; familiarize yourself with these nuances by reading
<a class="xref" href="#concepts" title="Chapter 1. Concepts and Architecture for Embedded InnoDB">Chapter&nbsp;1, <i>Concepts and Architecture for Embedded InnoDB</i></a> first,
and consult
<a class="xref" href="#glossary" title="Embedded InnoDB Glossary">Embedded InnoDB Glossary</a> for definitions of any unfamiliar terms.
</p><p>
Throughout this section, we refer to functions and constants that are defined later, in <a class="xref" href="#c-api" title="Chapter 6. C API Reference for Embedded InnoDB">Chapter&nbsp;6, <i>C API Reference for Embedded InnoDB</i></a>,
and especially in <a class="xref" href="#ddl-functions" title="6.7.5. API Functions - DDL">Section&nbsp;6.7.5, “API Functions - DDL”</a>.
</p><div class="section" title="3.1. Managing Databases"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287625597"></a>3.1.&nbsp;Managing Databases</h2></div></div></div><p>
InnoDB maps a database to a file system directory. 
To create a table in a particular database, use the following naming scheme:
<span class="quote">“<span class="quote"><code class="literal"><em class="replaceable"><code>database_name</code></em>/<em class="replaceable"><code>table_name</code></em></code></span>”</span>.
(Always pass this fully qualified form of the name to APIs that require a
table name.)
</p><p>
If the <span class="strong"><strong>file_per_table</strong></span> configuration variable
is set, InnoDB creates the underlying directory,
in a location relative to the <span class="strong"><strong>data_home_dir</strong></span>
configuration setting.
</p><p></p><div class="section" title="3.1.1. Creating a Database"><div class="titlepage"><div><div><h3 class="title"><a id="id287625624"></a>3.1.1.&nbsp;Creating a Database</h3></div></div></div><p>
If <span class="strong"><strong>file_per_table</strong></span> configuration variable is set,
InnoDB uses one data file per table.
Otherwise, all user tables and indexes are stored in one <span class="emphasis"><em>data</em></span> tablespace.
The underlying directory must exist, or it can be created by the <code class="literal">ib_database_create</code> function:
</p><pre class="screen">ib_err_t err = ib_database_create("test");</pre><p>
This name must be a simple database name, not a path.
</p></div><div class="section" title="3.1.2. Dropping a database"><div class="titlepage"><div><div><h3 class="title"><a id="id287625649"></a>3.1.2.&nbsp;Dropping a database</h3></div></div></div><p>
Dropping a database drops all tables in the database
and then deletes the underlying directory. 
</p><pre class="screen">ib_err_t err = ib_database_drop("test"); </pre></div></div><div class="section" title="3.2. Managing Tables"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287625659"></a>3.2.&nbsp;Managing Tables</h2></div></div></div><p>
The primary kind of object that you work with in a database is
the <a class="link" href="#glos_table" title="table">table</a>.</p><div class="section" title="3.2.1. Creating a Table"><div class="titlepage"><div><div><h3 class="title"><a id="id287625669"></a>3.2.1.&nbsp;Creating a Table</h3></div></div></div><p>
Creating a table involves a sequence of API calls to set up the table
and its related objects:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>The data structures for the table itself.</p></li><li class="listitem"><p>Each column.</p></li><li class="listitem"><p>The clustered index, representing the primary key.</p></li></ul></div><p>
When all the structures are set up and connected together,
a final API call actually creates the table.
</p><p>
For example, imagine that you want to create a table with the following structure:
</p><pre class="screen">CREATE TABLE T(c1 VARCHAR(32), c2 VARCHAR(32), c3 INT UNSIGNED, PRIMARY KEY (c1, c2));</pre><p>
</p><p>
The steps involved are:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Create a handle for the table schema (its column structure)
by calling the function <code class="literal">ib_table_schema_create()</code>.
</p></li><li class="listitem"><p>
Add column type information to the table schema by calling
the function <code class="literal">ib_table_schema_add_col()</code>.
Repeat for each column in the table.
</p></li><li class="listitem"><p>
Add an index schema to the table instance by calling function
<code class="literal">ib_table_schema_add_index()</code>.
</p></li><li class="listitem"><p>
Define each index column by calling function
<code class="literal">ib_index_schema_add_col()</code>.
</p></li><li class="listitem"><p>
Set the index type to cluster, using the function
<code class="literal">ib_index_schema_set_clustered()</code>.
Every table must have a clustered index that represents its primary key.
</p></li><li class="listitem"><p>
Request access to the data dictionary, by starting a transaction
(<code class="literal">ib_trx_begin()</code>) and requesting a lock
(<code class="literal">ib_schema_lock_exclusive()</code>).
</p></li><li class="listitem"><p>
Create the table in InnoDB’s data dictionary by calling function
<code class="literal">ib_table_create()</code>.
</p></li><li class="listitem"><p>
Commit the transaction by calling function <code class="literal">ib_trx_commit()</code>.
(The commit function also releases the lock on the data dictionary.)
</p></li><li class="listitem"><p>
Destroy the table schema handle by calling function
<code class="literal">ib_table_schema_delete()</code>, to avoid memory leaks.
</p></li></ul></div><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Error checking has been omitted from the example to make it easier
to follow the code.
The API functions can return the error codes that are defined in
<a class="xref" href="#error-codes" title="6.6. Error and Status Codes">Section&nbsp;6.6, “Error and Status Codes”</a>.
</p></div><pre class="screen">ib_trx_t        ib_trx;
ib_id_t         table_id = 0;
ib_tbl_sch_t    ib_tbl_sch = NULL;
ib_idx_sch_t    ib_idx_sch = NULL;
char            table_name[IB_MAX_TABLE_NAME_LEN];

snprintf(table_name, sizeof(table_name), "%s/%s", database_name, name);

/* Pass a table page size of 0, ie., use default page size. */
ib_table_schema_create(table_name, &amp;ib_tbl_sch, IB_TBL_COMPACT, 0);

/* The fifth argument is currently not used. */
ib_table_schema_add_col(ib_tbl_sch, "c1", IB_VARCHAR, IB_COL_NONE, 0, 32);
ib_table_schema_add_col(ib_tbl_sch, "c2", IB_VARCHAR, IB_COL_NONE, 0, 32);
ib_table_schema_add_col(ib_tbl_sch, "c3", IB_INT, IB_COL_UNSIGNED, 0, 4);

/* Index schema handle is "owned" by the table schema handle in this
case and will be deleted when the table schema handle is deleted. */

ib_table_schema_add_index(ib_tbl_sch, "PRIMARY_KEY", &amp;ib_idx_sch);

/* Set prefix length to 0. */
ib_index_schema_add_col(ib_idx_sch, "c1", 0);

/* Set prefix length to 0. */
ib_index_schema_add_col(ib_idx_sch, "c2", 0);

ib_index_schema_set_clustered(ib_idx_sch);

/* Create the transaction that will cover data dictionary update. */
ib_trx = ib_trx_begin(IB_TRX_SERIALIZABLE);

/* Lock the data dictionary in exclusive mode */
ib_schema_lock_exclusive(ib_trx);

/* Create the actual table from the schema. The table id of the new
table will be returned in table_id. */
ib_table_create(ib_trx, ib_tbl_sch, &amp;table_id);

/* Commit the transaction */
ib_trx_commit(ib_trx);

ib_table_schema_delete(ib_tbl_sch);
</pre><div class="section" title="3.2.1.1. Mapping MySQL Types to Embedded InnoDB Values"><div class="titlepage"><div><div><h4 class="title"><a id="id287625814"></a>3.2.1.1.&nbsp;Mapping MySQL Types to Embedded InnoDB Values</h4></div></div></div><p>
Whether you are adapting existing SQL code into an Embedded InnoDB program, writing a program that works
with a existing MySQL tables, or approaching the application design from a database background,
you must be able to map from MySQL column datatypes to the corresponding Embedded InnoDB data structures and values:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
When creating a table, you use the constant values from <a class="xref" href="#types-column" title="6.2.4. Column Types">Section&nbsp;6.2.4, “Column Types”</a>
to define the type of each column, through the
<a class="link" href="#ib_table_schema_add_col" title="6.7.5.3. ib_table_schema_add_col"><code class="literal">ib_table_schema_add_col()</code></a> function.
</p></li><li class="listitem"><p>
For every column that you read or write,
you create a data structure of type <code class="literal">ib_col_meta_t</code>,
as described in <a class="xref" href="#ib_col_meta_t" title="6.2.6. Column Metadata">Section&nbsp;6.2.6, “Column Metadata”</a>,
and assign a type value to the <code class="literal">ib_col_type_t</code> field, using one of the
constant values from <a class="xref" href="#types-column" title="6.2.4. Column Types">Section&nbsp;6.2.4, “Column Types”</a>.
</p></li></ul></div></div></div><div class="section" title="3.2.2. Opening a Table or Index"><div class="titlepage"><div><div><h3 class="title"><a id="open-table"></a>3.2.2.&nbsp;Opening a Table or Index</h3></div></div></div><p>
Before you can search, read, or write records, you need to open either a table or an index.  
Because every table has a primary key (either one you specified,
or a default one supplied by
the Embedded InnoDB engine), <span class="quote">“<span class="quote">opening a table</span>”</span> is shorthand for opening
the table’s primary key index, also known as the clustered index.
</p><p>
The open operation creates a cursor handle that is then used to
position, search, read, write, and delete records. 
All table and index operations require one of these cursor handles. 
(Subsequent sections explain the considerations for exactly which index to use,
depending on the columns involved in the operation.)
</p><p>
To open a table, you specify its name.
You must have an active transaction.
The cursor is attached to this transaction,
to prevent any further read, write, or retrieve operations
using the cursor after the transaction is committed or rolled back.
</p><pre class="screen">ib_trx_t   ib_trx;
ib_crsr_t  ib_crsr;

ib_trx = ib_trx_begin(IB_TRX_REPEATABLE_READ);
ib_cursor_open_table(table_name, ib_trx, &amp;ib_crsr);
</pre><p>
Opening an index is very similar to opening a table.
Instead of the table name, you specify the index name:
</p><pre class="screen">/* Open the secondary index "SEC_1" which is defined on the
table to which the cursor is attached. */
err = ib_cursor_open_index_using_name(crsr, "SEC_1", &amp;index_crsr);
</pre><p>
Or you can specify the index ID:
</p><pre class="screen">ib_trx_t   ib_trx;
ib_crsr_t  ib_crsr;

ib_trx = ib_trx_begin(IB_TRX_REPEATABLE_READ);
ib_cursor_open_index_using_id(index_id, ib_trx, &amp;ib_crsr);
</pre><p>
</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
To keep the sample code succinct, later examples may start at a point where you are expected to
already have a transaction <code class="literal">ib_trx</code> open and a cursor <code class="literal">crsr</code>
attached to it.
</p></div></div><div class="section" title="3.2.3. Closing a Table or Index"><div class="titlepage"><div><div><h3 class="title"><a id="close-table"></a>3.2.3.&nbsp;Closing a Table or Index</h3></div></div></div><p>
While performing operations on a table or index, you pass a cursor handle to each function.
When finished with the operations, close the cursor by
calling the <code class="literal">ib_cursor_close()</code> function.
Once the cursor is closed, its memory is freed and it is unusable.
There is no garbage collection of open cursors
when transactions are committed or rolled back; you must explicitly close each cursor.
</p><pre class="screen">ib_cursor_close(ib_crsr); </pre><p>
You can call the function <code class="literal">ib_cursor_reset</code> to use the same cursor handle again.
(Remember to attach the cursor to a running transaction after calling
the reset function.)
</p></div><div class="section" title="3.2.4. Truncating a Table"><div class="titlepage"><div><div><h3 class="title"><a id="id287626460"></a>3.2.4.&nbsp;Truncating a Table</h3></div></div></div><p>
When you want to keep a table, but delete all the data in the table,
you can <span class="emphasis"><em>truncate</em></span> the table by calling the
<code class="literal">ib_cursor_truncate</code> or <code class="literal">ib_table_truncate</code> function.
This operation is faster and more convenient than deleting all the records. If the operation is successful it will close the cursor and set it to NULL.
</p><pre class="screen">ib_cursor_truncate(&amp;ib_crsr, &amp;table_id); </pre><p>
</p><pre class="screen">ib_table_truncate(table_name, &amp;table_id); </pre><p>
</p></div></div><div class="section" title="3.3. Managing Indexes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287626489"></a>3.3.&nbsp;Managing Indexes</h2></div></div></div><p>InnoDB supports two types of indexes:
</p><div class="variablelist"><dl><dt><span class="term">Clustered index</span></dt><dd>
Every table must have one and only one clustered index, equivalent to a primary key.
The column with the clustered index cannot
have any null or duplicate values, so that it can be used to uniquely
identify every record in the table.
If your code does not create one, InnoDB creates one automatically
based on the system <code class="literal">DB_ROWID</code> column.
</dd><dt><span class="term">Secondary index</span></dt><dd>There can be many secondary indexes.  Columns with secondary indexes can contain nulls and duplicate values.  Unique secondary indexes cannot contain duplicate values.</dd></dl></div><div class="section" title="3.3.1. Creating an Index"><div class="titlepage"><div><div><h3 class="title"><a id="id287626510"></a>3.3.1.&nbsp;Creating an Index</h3></div></div></div><p>
There are two ways to create an index within InnoDB:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Add indexes to the table schema when a new table is being created.</p></li><li class="listitem"><p>Create an index schema (a representation of the index columns) and call <code class="literal">ib_index_create</code>.
This option is used to add secondary indexes to an existing table.
</p></li></ol></div><div class="section" title="3.3.1.1. Recreating a Clustered Index"><div class="titlepage"><div><div><h4 class="title"><a id="id287626530"></a>3.3.1.1.&nbsp;Recreating a Clustered Index</h4></div></div></div><p>
If you recreate the clustered index,
for example to use your own definition instead of the system generated one,
or to change the primary key,
InnoDB creates a new table with the new clustered index.
If any secondary indexes are defined on the original table,
InnoDB creates new versions of those indexes on the new table.
This operation results in new table and index IDs, since the old versions are dropped once the operation is complete.
Once the old table is dropped, the new table is renamed to take its place.
</p></div></div><div class="section" title="3.3.2. Opening an Index"><div class="titlepage"><div><div><h3 class="title"><a id="id287626537"></a>3.3.2.&nbsp;Opening an Index</h3></div></div></div><p>
This operation is covered
in <a class="xref" href="#open-table" title="3.2.2. Opening a Table or Index">Section&nbsp;3.2.2, “Opening a Table or Index”</a>.
</p></div></div></div><div class="chapter" title="Chapter 4. Performing SELECT, INSERT, UPDATE, and DELETE (DML) Operations with Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title"><a id="dml"></a>Chapter&nbsp;4.&nbsp;Performing SELECT, INSERT, UPDATE, and DELETE (DML) Operations with Embedded InnoDB</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id287626595">4.1. Mapping MySQL Types to Embedded InnoDB Values</a></span></dt><dt><span class="section"><a href="#id287626633">4.2. Using Tuples</a></span></dt><dd><dl><dt><span class="section"><a href="#id287626660">4.2.1. Creating a Tuple</a></span></dt><dt><span class="section"><a href="#id287626702">4.2.2. Deleting a Tuple</a></span></dt><dt><span class="section"><a href="#id287626712">4.2.3. Column Metadata in a Tuple</a></span></dt><dt><span class="section"><a href="#scanning">4.2.4. Scanning and Positioning</a></span></dt><dt><span class="section"><a href="#id287626832">4.2.5. Reading a Column Value</a></span></dt><dt><span class="section"><a href="#id287626880">4.2.6. Setting a Column Value</a></span></dt><dt><span class="section"><a href="#id287626942">4.2.7. Copying the Columns from One Tuple to Another</a></span></dt><dt><span class="section"><a href="#id287626952">4.2.8. Checking if a Column Value is SQL NULL</a></span></dt></dl></dd><dt><span class="section"><a href="#id287626999">4.3. Working with Records</a></span></dt><dd><dl><dt><span class="section"><a href="#id287627004">4.3.1. Reading a Record</a></span></dt><dt><span class="section"><a href="#id287627077">4.3.2. Inserting a Record</a></span></dt><dt><span class="section"><a href="#id287627139">4.3.3. Updating a Record</a></span></dt><dt><span class="section"><a href="#id287627286">4.3.4. Deleting a Record</a></span></dt><dt><span class="section"><a href="#dml.where">4.3.5. Emulating a WHERE Clause</a></span></dt></dl></dd></dl></div><p>
This section discusses how to perform the equivalent of SQL
<code class="literal">SELECT</code>,
<code class="literal">INSERT</code>,
<code class="literal">UPDATE</code>,
and <code class="literal">DELETE</code>
operations with the Embedded InnoDB APIs.
</p><p>
This section refers to tables, indexes, and other database terminology that may have
special nuances within Embedded InnoDB; familiarize yourself with these nuances by reading
<a class="xref" href="#concepts" title="Chapter 1. Concepts and Architecture for Embedded InnoDB">Chapter&nbsp;1, <i>Concepts and Architecture for Embedded InnoDB</i></a> first,
and consult
<a class="xref" href="#glossary" title="Embedded InnoDB Glossary">Embedded InnoDB Glossary</a> for definitions of any unfamiliar terms.
This section assumes that the required tables, indexes, and so on already exist;
see <a class="xref" href="#ddl" title="Chapter 3. Performing CREATE and DROP Operations (DDL) with Embedded InnoDB">Chapter&nbsp;3, <i>Performing CREATE and DROP Operations (DDL) with Embedded InnoDB</i></a> for instructions on creating these kinds of objects.
</p><p>
Throughout this section, we refer to functions and constants that are defined later, in <a class="xref" href="#c-api" title="Chapter 6. C API Reference for Embedded InnoDB">Chapter&nbsp;6, <i>C API Reference for Embedded InnoDB</i></a>,
and especially in <a class="xref" href="#misc-functions" title="6.7.6. API Functions - DDL and DML Support">Section&nbsp;6.7.6, “API Functions - DDL and DML Support”</a>.
</p><div class="section" title="4.1. Mapping MySQL Types to Embedded InnoDB Values"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287626595"></a>4.1.&nbsp;Mapping MySQL Types to Embedded InnoDB Values</h2></div></div></div><p>
Whether you are adapting existing SQL code into an Embedded InnoDB program, writing a program that works
with a existing MySQL tables, or approaching the application design from a database background,
you must be able to map from MySQL column datatypes to the corresponding Embedded InnoDB data structures and values:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
When creating a table, you use the constant values from <a class="xref" href="#types-column" title="6.2.4. Column Types">Section&nbsp;6.2.4, “Column Types”</a>
to define the type of each column, through the
<a class="link" href="#ib_table_schema_add_col" title="6.7.5.3. ib_table_schema_add_col"><code class="literal">ib_table_schema_add_col()</code></a> function.
</p></li><li class="listitem"><p>
For every column that you read or write,
you create a data structure of type <code class="literal">ib_col_meta_t</code>,
as described in <a class="xref" href="#ib_col_meta_t" title="6.2.6. Column Metadata">Section&nbsp;6.2.6, “Column Metadata”</a>,
and assign a type value to the <code class="literal">ib_col_type_t</code> field, using one of the
constant values from <a class="xref" href="#types-column" title="6.2.4. Column Types">Section&nbsp;6.2.4, “Column Types”</a>.
</p></li></ul></div></div><div class="section" title="4.2. Using Tuples"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287626633"></a>4.2.&nbsp;Using Tuples</h2></div></div></div><p>
The <a class="link" href="#glos_tuple" title="tuple">tuple</a> is an in-memory data structure that represents the columns from a table record,
or the key values for an index record.
Whenever you call functions to perform the equivalents of SQL
<code class="literal">SELECT</code>, <code class="literal">INSERT</code>, <code class="literal">UPDATE</code>, or <code class="literal">DELETE</code>
statements, you use tuples to specify the column values you are looking for, retrieve current
column values, or store a new set of column values.
</p><div class="section" title="4.2.1. Creating a Tuple"><div class="titlepage"><div><div><h3 class="title"><a id="id287626660"></a>4.2.1.&nbsp;Creating a Tuple</h3></div></div></div><p>
Currently, there are two basic types of tuples:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Tuple to read table rows.</p></li><li class="listitem"><p>Tuple to search index keys.</p></li></ul></div><p>

</p><p>
The operations are a little different depending on whether you are working through a clustered index
or a secondary index.
Thus, you might create and work with each of these kinds of tuples:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Tuple to read or write a row, from or to a clustered index.</p></li><li class="listitem"><p>Tuple to read a row from a secondary index.</p></li><li class="listitem"><p>Tuple to search a clustered index.</p></li><li class="listitem"><p>Tuple to search a secondary index.</p></li></ul></div><pre class="screen">         ib_tpl_t   ib_tpl;</pre><p></p><p>
When doing substantial data processing, you will probably work with several tuples at a time.
For example, to update a record, you read the original values into one tuple, then write updated
values back to the table using another tuple.
</p><pre class="screen">/* Create a tuple for searching a clustered index. */
ib_tpl = ib_clust_search_tuple_create(crsr);

/* Create a tuple for searching a secondary index. */
ib_tpl = ib_sec_search_tuple_create(crsr);

/* Create a tuple for reading/writing a row from/to a clustered index. */
ib_tpl = ib_clust_read_tuple_create(crsr);

/* Create a tuple for reading a row from a secondary index. */
ib_tpl = ib_sec_read_tuple_create(crsr);
</pre></div><div class="section" title="4.2.2. Deleting a Tuple"><div class="titlepage"><div><div><h3 class="title"><a id="id287626702"></a>4.2.2.&nbsp;Deleting a Tuple</h3></div></div></div><p>
There is a single call to delete all four tuple types from above:
</p><pre class="screen">ib_tuple_delete(ib_tpl); </pre></div><div class="section" title="4.2.3. Column Metadata in a Tuple"><div class="titlepage"><div><div><h3 class="title"><a id="id287626712"></a>4.2.3.&nbsp;Column Metadata in a Tuple</h3></div></div></div><p>
All the metadata about a column is contained in each tuple.
You can read the values of columns in the tuples by using either of these techniques,
either copying the values or accessing the contents via a pointer:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Reading typed values,
using functions such as <code class="literal">ib_tuple_read_u8</code> to read an unsigned 8-byte integer.
You ask explicitly for a data value of a particular type.
This technique makes for reliable, readable code,
but involves some extra overhead.
</p></li><li class="listitem"><p>
Reading raw bytes,
using functions such as <code class="literal">ib_col_copy_value</code> (copy data into a temporary variable)
or <code class="literal">ib_col_get_value</code> (return a pointer to the data).
This technique gives maximum performance, but you must handle the length calculations,
endianness issues, and pointer manipulation yourself.
</p></li></ul></div></div><div class="section" title="4.2.4. Scanning and Positioning"><div class="titlepage"><div><div><h3 class="title"><a id="scanning"></a>4.2.4.&nbsp;Scanning and Positioning</h3></div></div></div><p>
Whenever you would use a query or any kind of <code class="literal">WHERE</code> clause in SQL,
with Embedded InnoDB you will position a cursor and scan forward or
backward through the records.
</p><div class="section" title="4.2.4.1. Getting the Cursor Handle"><div class="titlepage"><div><div><h4 class="title"><a id="id287626753"></a>4.2.4.1.&nbsp;Getting the Cursor Handle</h4></div></div></div><p>
All table and index operations are via cursor handles that are obtained
using the steps outlined in the section <a class="xref" href="#open-table" title="3.2.2. Opening a Table or Index">Section&nbsp;3.2.2, “Opening a Table or Index”</a>.
The cursor can be positioned by searching for a key, or by calling one of
<code class="literal">ib_cursor_first</code> or <code class="literal">ib_cursor_last</code> functions
to position the cursor at the first record or the last record in the table or index.
</p></div><div class="section" title="4.2.4.2. Full Table Scan"><div class="titlepage"><div><div><h4 class="title"><a id="id287626771"></a>4.2.4.2.&nbsp;Full Table Scan</h4></div></div></div><a id="id287626774" class="indexterm"></a><a id="id287626778" class="indexterm"></a><p>
To iterate over <span class="emphasis"><em>all</em></span> the records in a table,
open the table or index to get a cursor handle,
then use code like the following.
</p><pre class="screen">ib_err_t err;
ib_tpl_t ib_tpl;

/* Assuming we are iterating over the table, we would create
a tuple to read the data like so: */

ib_tpl = ib_clust_read_tuple_create(ib_crsr);
if (ib_tpl == NULL) {
	/* Handle out of memory error. */
} else {
	err = ib_cursor_first(ib_crsr);

	while (err == DB_SUCCESS) {
		/* Read the record and process it. */
		err = ib_cursor_read_row(ib_crsr, ib_tpl);

		/* Check for errors from the read ignored for brevity. */
		/* Do something with the tuple here. */

		err = ib_cursor_next(ib_crsr);
		/* Check for errors from the next ignored for brevity. */

		…
		/* Remember to reset the tuple that was used to
		read the record from the cursor. */
		ib_tpl = ib_tuple_clear(ib_tpl);
	}

	ib_tuple_delete(ib_tpl);
}
</pre><p>
To process the records in a particular order, choose a column with that order,
define an index using that column as the first column,
and then open a cursor on that index.
(Usually, the primary key for a table is defined using the
most logical or common sort order for query results.
That way, you can open the table as opposed to a specific index,
and get results back in primary key order.)
</p></div><div class="section" title="4.2.4.3. Searching for Records"><div class="titlepage"><div><div><h4 class="title"><a id="id287626794"></a>4.2.4.3.&nbsp;Searching for Records</h4></div></div></div><p>
You search tables and indexes using the cursor interface functions.
The search key can contain all the columns of the key, or a subset of the key columns.

The columns must be set starting from the first column.
The steps for searching for a record are as follows:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Create a key tuple handle by calling the function <code class="literal">ib_key_search_tuple_create()</code>.
</li><li class="listitem">
Set the columns in the tuple handle by calling the function <code class="literal">ib_col_set_value()</code>
one or more times.
</li><li class="listitem">
Position the cursor by calling <code class="literal">ib_cursor_moveto()</code>.
</li></ol></div><p>
Example code:

</p><pre class="screen">int       res;
ib_tpl_t  key;
ib_err_t  err;

key = ib_sec_search_tuple_create(crsr);
ib_col_set_value(key, 0, "a", strlen("a"));
ib_col_set_value(key, 1, "x", strlen("x"));

/* res will contain the result from comparing key and the user
record that the cursor is positioned on. The result is undefined
if the function returns DB_END_OF_INDEX or error. */
err = ib_cursor_moveto(crsr, key, IB_CUR_GE, &amp;res);

...
ib_tuple_delete(key);
</pre><p>
</p></div></div><div class="section" title="4.2.5. Reading a Column Value"><div class="titlepage"><div><div><h3 class="title"><a id="id287626832"></a>4.2.5.&nbsp;Reading a Column Value</h3></div></div></div><p>
Once the cursor is positioned on a particular record, you can read the columns
from that record.
What you do after reading the columns depends on the type of operation:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
In a query with a <code class="literal">WHERE</code> clause,
you read the columns, check whether you could stop
processing records yet,
and do the appropriate output or manipulation of the column values.
</p></li><li class="listitem"><p>
For a <code class="literal">DELETE</code> with a <code class="literal">WHERE</code> clause,
you read the columns and decide whether or not to delete that particular record.
</p></li><li class="listitem"><p>
For an <code class="literal">UPDATE</code> with a <code class="literal">WHERE</code> clause,
you read the columns and decide whether or not to update that particular record.
If the record should be updated,
you make a new data structure (tuple) with a copy of the original column values,
update the appropriate columns,
and write the new record back to the table.
</p></li></ul></div><p>
Here is an example to read values from a tuple, that also handles <code class="literal">NULL</code> values in columns.
It assumes that you have already created a tuple holding a set of column values.
</p><pre class="screen">int             i;
int             n_cols = ib_tuple_get_n_cols(tpl);

for (i = 0; i &lt; n_cols; ++i) {
	ib_ulint_t      data_len;
	ib_col_meta_t   ib_col_meta;

	/* Get the meta data for the ith column. */
	data_len = ib_col_get_meta(tpl, i, &amp;ib_col_meta);

	/* Skip system columns. */
	if (ib_col_meta.type == IB_SYS) {
		continue;
	/* Nothing to print. Check for NULL values. */
	} else if (data_len == IB_SQL_NULL) {
		fprintf(stream, "|");
		continue;
	} else {
		switch (ib_col_meta.type) {
		case IB_INT: {
			/* You can either read the raw bytes and do the
			conversion yourself by twiddling the bits or use
			the typed interface of the InnoDB API to read the
			int values.  

			The general strategy will be to determine the INT
			size from the column meta data size (type_len)
			along with the sign flag. Then call the appropriate
			API function to read the int type. */
			...

			switch (ib_col_meta.type_len) {
			case 1:
			case 2:
			...
			case 4: {
				ib_u32_t	v;

				ib_tuple_read_i32(tpl, i, &amp;v);
				fprintf(stream, "%d\n", v);
			}
			...
			case 8:
			...
			default:
				/* Data dictionary is corrupt! */
				assert(IB_FALSE);
			}
			break;
		}
		case IB_FLOAT: {
			float   v;

			ib_tuple_read_float(tpl, i, &amp;v);
			fprintf(stream, "%f", v);
			break;
		}
		case IB_DOUBLE: {
			double  v;

			ib_tuple_read_double(tpl, i, &amp;v);
			fprintf(stream, "%lf", v);
			break;
		}
		case IB_CHAR:
		case IB_BLOB:
		case IB_DECIMAL:
		case IB_VARCHAR: {
			const char*     ptr;

			/* Get access to the raw data via a pointer. */
			ptr = ib_col_get_value(tpl, i);
			fprintf(stream, "%.*s", (int) data_len, ptr);
			break;
		}
		default:
			assert(IB_FALSE);
			break;
		}
	}
	fprintf(stream, "|");
}

fprintf(stream, "\n");
</pre></div><div class="section" title="4.2.6. Setting a Column Value"><div class="titlepage"><div><div><h3 class="title"><a id="id287626880"></a>4.2.6.&nbsp;Setting a Column Value</h3></div></div></div><p>
The API function for setting a column value is <code class="literal">ib_col_set_value()</code>. 
You specify a target tuple, the column number to set, a pointer to the data bytes,
and the length of the raw data bytes.
InnoDB does no type checking when setting the value of a column.

</p><p>
The column values are only stored in a table when you call a function
to perform an insert or update using this tuple.
</p><pre class="screen">char*   c = "some value";

ib_col_set_value(tpl, col_no, c, strlen(c));
</pre><div class="section" title="4.2.6.1. Setting a Column Value to SQL NULL"><div class="titlepage"><div><div><h4 class="title"><a id="id287626897"></a>4.2.6.1.&nbsp;Setting a Column Value to SQL NULL</h4></div></div></div><p>
When a new tuple is created, the column values are all set to <code class="literal">IB_SQL_NULL</code>.
Thus, for <code class="literal">INSERT</code> operations, you only need to fill in those columns that should be
non-<code class="literal">NULL</code>.
</p><p>
To explicitly set the value of a column in a tuple to <code class="literal">IB_SQL_NULL</code>,
for example during an <code class="literal">UPDATE</code> operation,
call <code class="literal">ib_col_set_value</code>
and set the <em class="replaceable"><code>data_len</code></em> parameter to <code class="literal">IB_SQL_NULL</code>.
</p><pre class="screen">ib_col_set_value(tpl, col_no, NULL, IB_SQL_NULL);
</pre></div></div><div class="section" title="4.2.7. Copying the Columns from One Tuple to Another"><div class="titlepage"><div><div><h3 class="title"><a id="id287626942"></a>4.2.7.&nbsp;Copying the Columns from One Tuple to Another</h3></div></div></div><p>
You can copy the contents of one tuple to another,
as long as the tuple types are the same type (search or read),
and are defined on the same table or index.
</p><pre class="screen">ib_tpl_t  src_tpl;
ib_tpl_t  dst_tpl;

Create the two tuples
…
Read or set column values of src tpl from somewhere
…

/* Copy the old contents to the new tuple. */
err = ib_tuple_copy(dst_tpl, src_tpl);
</pre></div><div class="section" title="4.2.8. Checking if a Column Value is SQL NULL"><div class="titlepage"><div><div><h3 class="title"><a id="id287626952"></a>4.2.8.&nbsp;Checking if a Column Value is SQL NULL</h3></div></div></div><p>
There are two ways to test for SQL <code class="literal">NULL</code> values: one using the column metadata,
and the other by accessing the value directly. 
The recommended method is to check the column metadata.
The destination tuple is first <span class="quote">“<span class="quote">cleared</span>”</span> and then the data is copied.
</p><pre class="screen">ib_col_meta_t   ib_col_meta;

/* Get the meta data for the ith column. */
data_len = ib_col_get_meta(tpl, i, &amp;ib_col_meta);

/* Skip system columns. */
if (ib_col_meta.type == IB_SYS) {
	continue;
/* Nothing to print. Check for NULL values. */
} else if (data_len == IB_SQL_NULL) {
	/* Do something. */
}
</pre><p>
The function <code class="literal">ib_col_get_value</code> returns <code class="literal">NULL</code>
if the column value is <code class="literal">IB_SQL_NULL</code>.
The function <code class="literal">ib_col_copy_value</code> returns <code class="literal">IB_SQL_NULL</code>
if the column value is <code class="literal">NULL</code> .
</p></div></div><div class="section" title="4.3. Working with Records"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287626999"></a>4.3.&nbsp;Working with Records</h2></div></div></div><p>
Remember, Embedded InnoDB works with table data at a low level,
so we refer to records to distinguish them from table rows,
although conceptually those notions are similar.
</p><div class="section" title="4.3.1. Reading a Record"><div class="titlepage"><div><div><h3 class="title"><a id="id287627004"></a>4.3.1.&nbsp;Reading a Record</h3></div></div></div><p>
To read a record from the clustered index,
create a cursor handle for that table,
then position the cursor on the record to read.
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Create cursor handle.
</p></li><li class="listitem"><p>
Create a tuple into which to read the row data, using this function:
</p><pre class="screen">ib_clust_read_tuple_create()</pre><p>

</p></li><li class="listitem"><p>
Position the cursor on the record to read.
For a full table scan, you first call <code class="literal">ib_cursor_first()</code> or <code class="literal">ib_cursor_last()</code>,
and then <code class="literal">ib_cursor_next()</code> or <code class="literal">ib_cursor_prev()</code> for each subsequent record.
To process a subset of rows, you first call <code class="literal">ib_cursor_moveto()</code>, and again
<code class="literal">ib_cursor_next()</code> or <code class="literal">ib_cursor_prev()</code> for each subsequent record.
</p></li><li class="listitem"><p>
Read the tuple by calling the function <code class="literal">ib_cursor_read_row()</code>.
</p></li><li class="listitem"><p>
Delete the tuple handle when finished.
</p></li><li class="listitem"><p>
Close cursor when finished.
</p></li></ul></div><p>
Example code:
</p><pre class="screen">ib_err_t        err;
ib_tpl_t        tpl;

tpl = ib_clust_read_tuple_create(crsr);

/* Scan the entire table and print all rows. */
err = ib_cursor_first(crsr);

while (err == DB_SUCCESS) {
	err = ib_cursor_read_row(crsr, tpl);

	/* Possible handle locking and timeout errors too
	in multi-threaded applications. */
	if (err == DB_RECORD_NOT_FOUND || err == DB_END_OF_INDEX) {
		break;
	}

	…
	/* Do something with the tuple */
	…

	err = ib_cursor_next(crsr);

	/* Possible handle locking and timeout errors too
	in multi-threaded applications. */
	if (err == DB_RECORD_NOT_FOUND || err == DB_END_OF_INDEX) {
		break;
	}

	tpl = ib_tuple_clear(tpl);
}

ib_tuple_delete(tpl);
</pre><p>
</p></div><div class="section" title="4.3.2. Inserting a Record"><div class="titlepage"><div><div><h3 class="title"><a id="id287627077"></a>4.3.2.&nbsp;Inserting a Record</h3></div></div></div><p>
To insert a record, perform the following steps:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Create a cursor handle by calling function <code class="literal">ib_cursor_open_table()</code>
or <code class="literal">ib_cursor_open_table_using_id()</code>.
</p></li><li class="listitem"><p>
Create a tuple handle by calling function <code class="literal">ib_clust_read_tuple_create()</code>.
(Since the insert can affect all the columns of the table, the operation requires a tuple
that contains all those columns.)
</p></li><li class="listitem"><p>
Set the column values in the tuple by calling function <code class="literal">ib_col_set_value()</code>.
Any columns you do not set, remain as SQL <code class="literal">NULL</code> values by default.
For string

values,
you specify the numeric index of the column, a pointer to the bytes of the data value,
and the length of the data.
For numeric

values,
you pass the numeric index of the column and the value itself.
The values are copied into the tuple.

</p></li><li class="listitem"><p>
Insert the record into the table by calling function <code class="literal">ib_cursor_insert_row()</code>.

</p></li><li class="listitem"><p>
Delete the tuple handle instance by calling function <code class="literal">ib_tuple_delete()</code>.
</p></li></ul></div><p>
Example code:
</p><pre class="screen">ib_err_t        err;
ib_tpl_t        tpl;

tpl = ib_clust_read_tuple_create(crsr);

ib_col_set_value(tpl, 0, "a", strlen("a"));
ib_col_set_value(tpl, 1, "b", strlen("b"));
ib_tuple_write_i32(tpl, 2, 100);

err = ib_cursor_insert_row(crsr, tpl);

/* Check err and handle potential errors here ... */

ib_tuple_delete(tpl);
</pre><p>
</p></div><div class="section" title="4.3.3. Updating a Record"><div class="titlepage"><div><div><h3 class="title"><a id="id287627139"></a>4.3.3.&nbsp;Updating a Record</h3></div></div></div><p>
To update a record, perform the following steps:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Create a cursor handle by calling function <code class="literal">ib_cursor_open_table()</code>
or <code class="literal">ib_cursor_open_table_using_id()</code>.
</p></li><li class="listitem"><p>
Position the cursor on the record to update by calling function <code class="literal">ib_cursor_moveto()</code>,
or any of the <code class="literal">ib_cursor_first()</code>, <code class="literal">ib_cursor_next()</code>, <code class="literal">ib_cursor_last()</code>, <code class="literal">ib_cursor_prev()</code> functions.
</p></li><li class="listitem"><p>
Create a tuple handle to read the old values by calling function <code class="literal">ib_clust_read_tuple_create()</code>.
</p></li><li class="listitem"><p>
Create a tuple handle to write the new values by calling function <code class="literal">ib_clust_read_tuple_create()</code>.
(The same kind of tuple data structure is used for both reading and writing.)
</p></li><li class="listitem"><p>
Read the values from the row into old tuple by calling function <code class="literal">ib_cursor_read_row()</code>.
</p></li><li class="listitem"><p>
Copy the value from the old tuple to the new tuple by calling function <code class="literal">ib_tuple_copy()</code>.
(You must pass both the old and new tuples as parameters when you call the function
to do the update.)
</p></li><li class="listitem"><p>
Set the column values in the new tuple by calling function <code class="literal">ib_col_set_value()</code>
one or more times.
</p></li><li class="listitem"><p>
Write the updated record back into the table by calling function <code class="literal">ib_table_update_row()</code>.
</p></li><li class="listitem"><p>
Delete the old and new tuple handles by calling function <code class="literal">ib_tuple_delete()</code>
for each one.
</p></li></ul></div><p>Example code, from the <a class="link" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">sample program</a> <code class="literal">ib_test1.c</code>:
</p><pre class="screen">char*           c1;
int             c1_len;
int             c3_len;
ib_col_meta_t   col_meta;
ib_tpl_t        old_tpl = NULL;
ib_tpl_t        new_tpl = NULL;

/* Create the tuple instance that we will use to update the
table. old_tpl is used for reading the existing row and
new_tpl will contain the update row data. */

old_tpl = ib_clust_read_tuple_create(crsr);
new_tpl = ib_clust_read_tuple_create(crsr);

ib_cursor_read_row(crsr, old_tpl);

/* Get the first column value. c1 will be NULL if
the column value is SQL_NULL. */
c1 = ib_col_get_value(old_tpl, 0);
c1_len = ib_col_get_meta(old_tpl, 0, &amp;col_meta);

/* Copy the old contents to the new tuple. */
ib_tuple_copy(new_tpl, old_tpl);

/* Set the new value of column c3 in the new tuple. */
ib_tuple_write_i32(new_tpl, 2, 10);

err = ib_cursor_update_row(crsr, old_tpl, new_tpl);
/* Check err status etc. */

ib_tuple_delete(old_tpl);
ib_tuple_delete(new_tpl);
</pre><p>
</p></div><div class="section" title="4.3.4. Deleting a Record"><div class="titlepage"><div><div><h3 class="title"><a id="id287627286"></a>4.3.4.&nbsp;Deleting a Record</h3></div></div></div><p>
To delete a record, perform the following steps:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
Obtain a cursor handle to a table.
</p></li><li class="listitem"><p>
Position the cursor on the record to delete.
</p></li><li class="listitem"><p>
Delete the row by calling function <code class="literal">ib_table_delete_row()</code>.
</p></li></ul></div><p>
Below is an example of searching for the record to delete,
from the <a class="link" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">sample program</a> <code class="literal">ib_test1.c</code>:
</p><pre class="screen">ib_err_t        err;
int             res = ~0;
ib_tpl_t        key = NULL;

/* Create a tuple for searching an index. */
key_tpl = ib_sec_search_tuple_create(crsr);

/* Set the value to delete. */
ib_col_set_value(key, 0, "b", strlen("b"));
ib_col_set_value(key, 1, "z", strlen("z"));

/* Search for the key using the clustered index (PK) */
err = ib_cursor_moveto(crsr, key, IB_CUR_GE, &amp;res);

/* Must be positioned on the record to delete, since
we've specified an exact match. */
/* res will tell us whether there was an exact
match found or not, res == 0 means cursor positioned
on a record that matches exactly. */

ib_tuple_delete(key);

/* InnoDB handles the updating of all secondary indexes. */
if (res == 0) {
	err = ib_cursor_delete_row(crsr);
}

/* Check err status etc. */ 
</pre><p>
</p></div><div class="section" title="4.3.5. Emulating a WHERE Clause"><div class="titlepage"><div><div><h3 class="title"><a id="dml.where"></a>4.3.5.&nbsp;Emulating a WHERE Clause</h3></div></div></div><p>
To emulate a <code class="literal">WHERE</code> clause, which lets you operate on multiple rows
with a single
<code class="literal">INSERT</code>,
<code class="literal">UPDATE</code>, or
<code class="literal">DELETE</code>
statement, use the techniques from <a class="xref" href="#scanning" title="4.2.4. Scanning and Positioning">Section&nbsp;4.2.4, “Scanning and Positioning”</a> to
loop through all the relevant records from your result set, and
perform the appropriate operation on each one as demonstrated
in the preceding sections.
</p></div></div></div><div class="chapter" title="Chapter 5. Managing Transactions with Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title"><a id="transactions"></a>Chapter&nbsp;5.&nbsp;Managing Transactions with Embedded InnoDB</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id287627427">5.1. Creating a Transaction Handle</a></span></dt><dt><span class="section"><a href="#id287627447">5.2. Committing or Rolling Back a Transaction</a></span></dt><dt><span class="section"><a href="#trx.isolation">5.3. Setting the Transaction Isolation Level</a></span></dt><dt><span class="section"><a href="#id287627643">5.4. Nested Transactions</a></span></dt><dd><dl><dt><span class="section"><a href="#id287627653">5.4.1. Taking Savepoints</a></span></dt><dt><span class="section"><a href="#id287627662">5.4.2. Deleting a Savepoint</a></span></dt><dt><span class="section"><a href="#id287627676">5.4.3. Rollback to Savepoint</a></span></dt></dl></dd></dl></div><p>
All DDL and DML operations must be covered by <a class="link" href="#glos_transaction" title="transaction">transactions</a>. 
</p><p>
This section refers to transactions, isolation levels, savepoints, and other database terminology that may have
special nuances within Embedded InnoDB; familiarize yourself with these nuances first, by reading:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="#concepts" title="Chapter 1. Concepts and Architecture for Embedded InnoDB">Chapter&nbsp;1, <i>Concepts and Architecture for Embedded InnoDB</i></a>.</p></li><li class="listitem"><p><a class="xref" href="#glossary" title="Embedded InnoDB Glossary">Embedded InnoDB Glossary</a>.</p></li></ul></div><p>
For instructions for performing DDL and DML operations, see
<a class="xref" href="#ddl" title="Chapter 3. Performing CREATE and DROP Operations (DDL) with Embedded InnoDB">Chapter&nbsp;3, <i>Performing CREATE and DROP Operations (DDL) with Embedded InnoDB</i></a> and <a class="xref" href="#dml" title="Chapter 4. Performing SELECT, INSERT, UPDATE, and DELETE (DML) Operations with Embedded InnoDB">Chapter&nbsp;4, <i>Performing SELECT, INSERT, UPDATE, and DELETE (DML) Operations with Embedded InnoDB</i></a>.
</p><p>
Throughout this section, we refer to functions and constants that are defined later, in <a class="xref" href="#c-api" title="Chapter 6. C API Reference for Embedded InnoDB">Chapter&nbsp;6, <i>C API Reference for Embedded InnoDB</i></a>,
and especially in <a class="xref" href="#transaction-functions" title="6.7.3. API Functions - Transactions">Section&nbsp;6.7.3, “API Functions - Transactions”</a>.
</p><div class="section" title="5.1. Creating a Transaction Handle"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287627427"></a>5.1.&nbsp;Creating a Transaction Handle</h2></div></div></div><p>
You first create a transaction handle of type <code class="literal">ib_trx_t</code> .
You do this by calling the <code class="literal">ib_trx_begin()</code> API function
and specifying the transaction isolation level for that transaction.
</p><p>
If the transaction is not started, or has already been committed or rolled back,
using the transaction handle for other operations produces undefined results
(which could include a crash).
</p><pre class="screen">ib_trx_t  ib_trx;

ib_trx = ib_trx_begin(IB_REPEATABLE_READ);

...
/* Do some operations on tables */
...

ib_trx_commit(ib_trx);
</pre></div><div class="section" title="5.2. Committing or Rolling Back a Transaction"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287627447"></a>5.2.&nbsp;Committing or Rolling Back a Transaction</h2></div></div></div><p>
<a class="link" href="#glos_commit" title="commit">Committing</a> the transaction with the <code class="literal">ib_trx_commit()</code> function
makes permanent any changes to tables, and releases any locks you have acquired. 
To <a class="link" href="#glos_rollback" title="rollback">roll</a> back the changes instead,
call the <code class="literal">ib_trx_rollback()</code> function,
which undoes any changes made to tables, and also releases all locks.
</p><p>
Although you must wrap DDL operations such as <code class="literal">CREATE</code> and <code class="literal">DROP</code>
inside a transaction also, the changes that these operations make to the system tables
cannot be rolled back.
</p></div><div class="section" title="5.3. Setting the Transaction Isolation Level"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="trx.isolation"></a>5.3.&nbsp;Setting the Transaction Isolation Level</h2></div></div></div><p>
Transaction <a class="link" href="#glos_isolation_level" title="isolation level">isolation levels</a> can only be set when a new transaction is started
with <code class="literal">ib_trx_begin()</code>.
</p><div class="variablelist"><dl><dt><span class="term"><code class="literal">IB_READ_UNCOMMITTED</code></span></dt><dd><p>Dirty read: non-locking <code class="literal">SELECT</code> operations are performed
so that we do not look at a possible earlier version of a record;
thus they are not <span class="quote">“<span class="quote">consistent</span>”</span> reads under this isolation level;
otherwise like level <code class="literal">IB_REPEATABLE_READ</code>.</p></dd><dt><span class="term"><code class="literal">IB_READ_COMMITTED</code></span></dt><dd><p>Somewhat Oracle-like isolation,
where a transaction can see data committed by other transactions
since the start of the current transaction.
<code class="literal">UPDATE</code> and <code class="literal">DELETE</code> operations
with <code class="literal">WHERE</code> clauses specifying a range of values,
prevent other transactions from affecting rows within the same range.
Other transactions are even prevented from inserting new rows with values
that would fall within the same range.
<code class="literal">SELECT ... FOR UPDATE</code> and <code class="literal">... LOCK IN SHARE MODE</code>
use a conservative locking strategy that does not prevent other transactions from inserting
rows with particular values.
Each consistent read reads its own snapshot.
</p></dd><dt><span class="term"><code class="literal">IB_REPEATABLE_READ</code></span></dt><dd><p>All consistent reads in the same transaction read the same
snapshot; full next-key locking is used in locking reads to block
insertions into gaps.</p></dd><dt><span class="term"><code class="literal">IB_SERIALIZABLE</code></span></dt><dd><p>All plain <code class="literal">SELECT</code> operations are converted to
<code class="literal">LOCK IN SHARE MODE</code> reads.</p></dd></dl></div></div><div class="section" title="5.4. Nested Transactions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287627643"></a>5.4.&nbsp;Nested Transactions</h2></div></div></div><p>
Nested transactions can be emulated using <a class="link" href="#glos_savepoint" title="savepoint">savepoints</a>. 
By dividing up the work into separate units,
you can take savepoints of the state of the current transaction at various stages
that you choose.
Savepoints cannot be committed, but can be rolled back.
Rolling back to a savepoint also rolls back any savepoints taken after that savepoint. 
Savepoints have tags (or names) and can be referred to by these tags. 
InnoDB simply treats the tag as a sequence of raw bytes and attaches no other special meaning to it. 
Savepoints are deleted in a transaction commit or rollback.
</p><div class="section" title="5.4.1. Taking Savepoints"><div class="titlepage"><div><div><h3 class="title"><a id="id287627653"></a>5.4.1.&nbsp;Taking Savepoints</h3></div></div></div><p>
To take a savepoint, you must already have an active transaction.
If there is already a savepoint of the same name,
this call erases that old savepoint and replaces it with a new one.
</p><pre class="screen">ib_trx_t  ib_trx;

ib_trx = ib_trx_begin(IB_REPEATABLE_READ);
...
/* Make some changes. */
ib_savepoint_take(ib_trx, savepoint_tag, savepoint_tag_len);
</pre></div><div class="section" title="5.4.2. Deleting a Savepoint"><div class="titlepage"><div><div><h3 class="title"><a id="id287627662"></a>5.4.2.&nbsp;Deleting a Savepoint</h3></div></div></div><p>
Releases only the named savepoint. 
Any savepoints that were set after this savepoint are left as-is.
This does not undo any changes but only deletes the internal housekeeping data of the savepoint.
If the savepoint does not exist, the function returns <code class="literal">DB_NO_SAVEPOINT</code>.
</p><pre class="screen"> ib_savepoint_release(ib_trx, savepoint_tag, savepoint_tag_len); </pre></div><div class="section" title="5.4.3. Rollback to Savepoint"><div class="titlepage"><div><div><h3 class="title"><a id="id287627676"></a>5.4.3.&nbsp;Rollback to Savepoint</h3></div></div></div><p>
You can either roll back to a specific named savepoint to undo the changes made after a certain point,
or roll back all the savepoints to undo all changes made in that transaction.
The savepoints are deleted once they are rolled back. 
Modifications after the savepoint are undone, but InnoDB does <span class="bold"><strong>not</strong></span> release the corresponding locks that are stored in memory.
If a lock is <span class="quote">“<span class="quote">implicit</span>”</span>, that is,
a new inserted row holds a lock where the lock information
is carried by the transaction ID stored in the row,
these locks are naturally released in the rollback. 
Any savepoints that were set after this savepoint are deleted.
If name equals NULL (that is, a C null pointer),
all the savepoints are rolled back.
</p><p>
For example, the following call rolls back all the savepoints and deletes them.</p><pre class="screen">ib_savepoint_rollback(ib_trx, NULL, 0); </pre><p>
and this call rolls back the named savepoint and all the savepoints taken after the named savepoint and deletes them.
</p><pre class="screen"> ib_savepoint_rollback(ib_trx, savepoint_tag, savepoint_tag_len); </pre></div></div></div><div class="chapter" title="Chapter 6. C API Reference for Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title"><a id="c-api"></a>Chapter&nbsp;6.&nbsp;C API Reference for Embedded InnoDB</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#constants">6.1. Constants</a></span></dt><dt><span class="section"><a href="#types">6.2. Data Types</a></span></dt><dd><dl><dt><span class="section"><a href="#types-base">6.2.1. Base Types</a></span></dt><dt><span class="section"><a href="#types-config">6.2.2. Configuration Variable Types</a></span></dt><dt><span class="section"><a href="#types-table-format">6.2.3. Table Format types</a></span></dt><dt><span class="section"><a href="#types-column">6.2.4. Column Types</a></span></dt><dt><span class="section"><a href="#types-col-attr">6.2.5. Column Attributes</a></span></dt><dt><span class="section"><a href="#ib_col_meta_t">6.2.6. Column Metadata</a></span></dt></dl></dd><dt><span class="section"><a href="#modes">6.3. Modes</a></span></dt><dd><dl><dt><span class="section"><a href="#modes-shutdown">6.3.1. Shutdown Modes</a></span></dt><dt><span class="section"><a href="#modes-lock">6.3.2. Lock Modes</a></span></dt><dt><span class="section"><a href="#modes-search">6.3.3. Cursor Search Modes</a></span></dt><dt><span class="section"><a href="#ib_match_mode_t">6.3.4. Cursor Match Modes</a></span></dt></dl></dd><dt><span class="section"><a href="#trx">6.4. Transactions</a></span></dt><dd><dl><dt><span class="section"><a href="#trx-isolation-levels">6.4.1. Transaction Isolation Levels</a></span></dt><dt><span class="section"><a href="#trx-states">6.4.2. Transaction States</a></span></dt></dl></dd><dt><span class="section"><a href="#id287630477">6.5. Handles (opaque types)</a></span></dt><dt><span class="section"><a href="#error-codes">6.6. Error and Status Codes</a></span></dt><dd><dl><dt><span class="section"><a href="#error-codes-warnings">6.6.1. Warnings</a></span></dt></dl></dd><dt><span class="section"><a href="#id287631003">6.7. API Function Reference</a></span></dt><dd><dl><dt><span class="section"><a href="#startup-functions">6.7.1. API Functions - Startup/Shutdown</a></span></dt><dt><span class="section"><a href="#cursor-functions">6.7.2. API Functions - Cursors</a></span></dt><dt><span class="section"><a href="#transaction-functions">6.7.3. API Functions - Transactions</a></span></dt><dt><span class="section"><a href="#configuration-functions">6.7.4. API Functions - Configuration</a></span></dt><dt><span class="section"><a href="#ddl-functions">6.7.5. API Functions - DDL</a></span></dt><dt><span class="section"><a href="#misc-functions">6.7.6. API Functions - DDL and DML Support</a></span></dt><dt><span class="section"><a href="#tuple-functions">6.7.7. API Functions - Tuples</a></span></dt></dl></dd></dl></div><a id="id287627708" class="indexterm"></a><a id="id287627713" class="indexterm"></a><a id="id287627717" class="indexterm"></a><div class="section" title="6.1. Constants"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="constants"></a>6.1.&nbsp;Constants</h2></div></div></div><a id="id287627725" class="indexterm"></a><p>The following constants are used by the Embedded InnoDB API.</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Constant name</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_true"></a><code class="literal">IB_TRUE</code></td><td align="left">Boolean true.</td></tr><tr><td align="left"><a id="ib_false"></a><code class="literal">IB_FALSE</code></td><td align="left">Boolean false.</td></tr><tr><td align="left"><a id="ib_sql_null"></a><code class="literal">IB_SQL_NULL</code></td><td align="left">Special data length value that signifies a <a class="link" href="#glos_null" title="NULL">NULL</a> column value.</td></tr><tr><td align="left"><a id="ib_n_sys_cols"></a><code class="literal">IB_N_SYS_COLS</code></td><td align="left">The number of system columns in a key or row.
These are columns that are used internally by InnoDB,
such as <code class="literal">DB_TRX_ID</code>.</td></tr></tbody></table></div></div><div class="section" title="6.2. Data Types"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="types"></a>6.2.&nbsp;Data Types</h2></div></div></div><a id="id287627867" class="indexterm"></a><p>The data structures and type definitions used by Embedded InnoDB.</p><div class="section" title="6.2.1. Base Types"><div class="titlepage"><div><div><h3 class="title"><a id="types-base"></a>6.2.1.&nbsp;Base Types</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Type Name</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_err_t"></a><code class="literal">ib_err_t</code></td><td align="left">The type used for all the <a class="link" href="#error-codes" title="6.6. Error and Status Codes">error and status codes</a>.</td></tr><tr><td align="left"><a id="ib_byte_t"></a><code class="literal">ib_byte_t</code></td><td align="left">The type of a byte on the target platform.</td></tr><tr><td align="left"><a id="ib_id_t"></a><code class="literal">ib_id_t</code></td><td align="left">Table and index IDs.</td></tr><tr><td align="left"><a id="ib_bool_t"></a><code class="literal">ib_bool_t</code></td><td align="left">Boolean type; can be <code class="literal">IB_TRUE</code> or <code class="literal">IB_FALSE</code>.</td></tr><tr><td align="left"><a id="ib_ulint_t"></a><code class="literal">ib_ulint_t</code></td><td align="left">The type of an unsigned long integer on the target platform.</td></tr><tr><td align="left"><a id="ib_opaque_t"></a><code class="literal">ib_opaque_t</code></td><td align="left">Opaque type, whose details are hidden.</td></tr><tr><td align="left"><a id="ib_charset_t"></a><code class="literal">ib_charset_t</code></td><td align="left">Not currently used.

</td></tr><tr><td align="left"><a id="ib_i8_t"></a><code class="literal">ib_i8_t</code></td><td align="left">8-bit signed integer.</td></tr><tr><td align="left"><a id="ib_u8_t"></a><code class="literal">ib_u8_t</code></td><td align="left">8-bit unsigned integer.</td></tr><tr><td align="left"><a id="ib_i16_t"></a><code class="literal">ib_i16_t</code></td><td align="left">16-bit signed integer.</td></tr><tr><td align="left"><a id="ib_u16_t"></a><code class="literal">ib_u16_t</code></td><td align="left">16-bit unsigned integer.</td></tr><tr><td align="left"><a id="ib_i32_t"></a><code class="literal">ib_i32_t</code></td><td align="left">32-bit signed integer.</td></tr><tr><td align="left"><a id="ib_u32_t"></a><code class="literal">ib_u32_t</code></td><td align="left">32-bit unsigned integer.</td></tr><tr><td align="left"><a id="ib_i64_t"></a><code class="literal">ib_i64_t</code></td><td align="left">64-bit signed integer.</td></tr><tr><td align="left"><a id="ib_u64_t"></a><code class="literal">ib_u64_t</code></td><td align="left">64-bit unsigned integer.</td></tr></tbody></table></div></div><div class="section" title="6.2.2. Configuration Variable Types"><div class="titlepage"><div><div><h3 class="title"><a id="types-config"></a>6.2.2.&nbsp;Configuration Variable Types</h3></div></div></div><p>InnoDB supports various <a class="link" href="#config-vars" title="Chapter 8. Embedded InnoDB Configuration Variables">configuration variables</a>.
The types of these variables are listed below: </p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Type Name</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_cfg_ibool"></a><code class="literal">IB_CFG_IBOOL</code></td><td align="left">The configuration parameter is of type <code class="literal">ibool</code>.</td></tr><tr><td align="left"><a id="ib_cfg_ulint"></a><code class="literal">IB_CFG_ULINT</code></td><td align="left">The configuration parameter is of type <code class="literal">ulint</code>.</td></tr><tr><td align="left"><a id="ib_cfg_ulong"></a><code class="literal">IB_CFG_ULONG</code></td><td align="left">The configuration parameter is of type <code class="literal">ulong</code>.</td></tr><tr><td align="left"><a id="ib_cfg_text"></a><code class="literal">IB_CFG_TEXT</code></td><td align="left">The configuration parameter is of type <code class="literal">char*</code>.</td></tr><tr><td align="left"><a id="ib_cfg_cb"></a><code class="literal">IB_CFG_CB</code></td><td align="left">The configuration parameter is a callback parameter.</td></tr></tbody></table></div></div><div class="section" title="6.2.3. Table Format types"><div class="titlepage"><div><div><h3 class="title"><a id="types-table-format"></a>6.2.3.&nbsp;Table Format types</h3></div></div></div><p>InnoDB supports various <a class="link" href="#glos_row_format" title="row format">table format</a> types.
You must specify the appropriate type when creating the table.

All the supported types are listed below:
</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Table Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_tbl_redundant"></a><code class="literal">IB_TBL_REDUNDANT</code></td><td align="left"><a class="link" href="#glos_redundant_row_format" title="redundant row format">Redundant row format.</a></td></tr><tr><td align="left"><a id="ib_tbl_compact"></a><code class="literal">IB_TBL_COMPACT</code></td><td align="left">
<a id="id287628282" class="indexterm"></a>
<a class="link" href="#glos_compact_row_format" title="compact row format">Compact row format.</a>
</td></tr><tr><td align="left"><a id="ib_tbl_dynamic"></a><code class="literal">IB_TBL_DYNAMIC</code></td><td align="left">
<a class="link" href="#glos_dynamic_row_format" title="dynamic row format">Dynamic row format.</a>
<a id="id287628408" class="indexterm"></a>
BLOB prefixes are not stored in the clustered index.
</td></tr><tr><td align="left"><a id="ib_tbl_compressed"></a><code class="literal">IB_TBL_COMPRESSED</code></td><td align="left">
<a id="id287628422" class="indexterm"></a>
<a class="link" href="#glos_compressed_row_format" title="compressed row format">Compressed row format.</a>
Similar to dynamic format, but with pages compressed.
</td></tr></tbody></table></div></div><div class="section" title="6.2.4. Column Types"><div class="titlepage"><div><div><h3 class="title"><a id="types-column"></a>6.2.4.&nbsp;Column Types</h3></div></div></div><p>
The column type <code class="literal">ib_col_type_t</code> can have the following possible values.
Typically, you read columns one by one out of a tuple, and use a <code class="literal">switch</code> construct
to decide how to process each column based on its type.
</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Type Name</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_varchar"></a><code class="literal">IB_VARCHAR</code></td><td align="left">Character varying length.</td></tr><tr><td align="left"><a id="ib_char"></a><code class="literal">IB_CHAR</code></td><td align="left">Fixed-length character string.</td></tr><tr><td align="left"><a id="ib_binary"></a><code class="literal">IB_BINARY</code></td><td align="left">Fixed length binary, similar to IB_CHAR but the column is not padded to the right.</td></tr><tr><td align="left"><a id="ib_varbinary"></a><code class="literal">IB_BINARY</code></td><td align="left">Variable length binary.</td></tr><tr><td align="left"><a id="ib_varchar_anycharset"></a><code class="literal">IB_VARCHAR_ANYCHARSET</code></td><td align="left">Variable-length column using any character set.</td></tr><tr><td align="left"><a id="ib_char_anycharset"></a><code class="literal">IB_CHAR_ANYCHARSET</code></td><td align="left">Fixed-length column using any character set.</td></tr><tr><td align="left"><a id="ib_blob"></a><code class="literal">IB_BLOB</code></td><td align="left">Binary large object, or a TEXT type.</td></tr><tr><td align="left"><a id="ib_int"></a><code class="literal">IB_INT</code></td><td align="left">Integer: can be any size 1 to 8 bytes.</td></tr><tr><td align="left"><a id="ib_sys"></a><code class="literal">IB_SYS</code></td><td align="left">
System column (read-only).  For example, InnoDB adds some system columns to each clustered index, for housekeeping purposes.  When stepping through the columns of a result set, ignore any column with this type.
</td></tr><tr><td align="left"><a id="ib_float"></a><code class="literal">IB_FLOAT</code></td><td align="left">C <code class="code">float</code>.</td></tr><tr><td align="left"><a id="ib_double"></a><code class="literal">IB_DOUBLE</code></td><td align="left">C <code class="code">double</code>.</td></tr><tr><td align="left"><a id="ib_decimal"></a><code class="literal">IB_DECIMAL</code></td><td align="left">Decimal stored as an ASCII string.</td></tr></tbody></table></div><div class="section" title="6.2.4.1.  Mapping MySQL Types to Embedded InnoDB"><div class="titlepage"><div><div><h4 class="title"><a id="id287628646"></a>6.2.4.1.&nbsp;
Mapping MySQL Types to Embedded InnoDB
</h4></div></div></div><p>
Here is the reverse mapping, showing how to convert from any MySQL column type
to the equivalent <code class="literal">ib_col_type_t</code> value.
In particular, note:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>
To create a column with an unsigned type, you pass the <code class="literal">IB_COL_UNSIGNED</code> value
as a separate parameter from the type itself when setting up the column metadata.
</p></li><li class="listitem"><p>
Only the <code class="literal">Latin1</code> character set is supported.
UTF-8 encoding is not currently supported.
(Of course, you can store any bytes you want in the table;
this restriction applies to comparison operations that
happen internally in the Embedded InnoDB APIs.)
The <code class="literal">Latin1</code> character set maps to the Embedded InnoDB
types <code class="literal">IB_CHAR</code> and <code class="literal">IB_VARCHAR</code>,
while other character sets map to the
types <code class="literal">IB_CHAR_ANYCHARSET</code> and <code class="literal">IB_VARCHAR_ANYCHARSET</code>.
</p></li><li class="listitem"><p>
Some MySQL types map to different Embedded InnoDB types depending on the
precision of the type.
</p></li><li class="listitem"><p>
Some different MySQL types map to the same Embedded InnoDB type.
For example, the MySQL integer types all map to <code class="literal">IB_INT</code>,
and when setting up the column metadata you pass different values
for the length parameter to account for the different MySQL types.
</p></li><li class="listitem"><p>
Some MySQL attributes, such as <code class="literal">ZEROFILL</code>, are for
presentation only and are not represented or significant
in the Embedded InnoDB metadata.
</p></li><li class="listitem"><p>
Certain attributes that are not recognized or supported by Embedded InnoDB
are passed to your code in the <code class="literal">IB_CUSTOM1</code>, <code class="literal">2</code>,
and <code class="literal">3</code> fields if you open a table that was created with MySQL.
(If you are interacting with MySQL data at that level, you should already be
an expert in the MySQL source code.)
</p></li></ul></div><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">MySQL Type</th><th align="left">Value for ib_col_type_t</th></tr></thead><tbody><tr><td align="left"><code class="literal">BIGINT</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">BINARY(M)</code></td><td align="left">
<p>
<code class="literal">IB_CHAR</code>
or <code class="literal">IB_CHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">BIT</code></td><td align="left">
<p>
<code class="literal">IB_CHAR</code>
or <code class="literal">IB_CHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">BLOB</code></td><td align="left">
<p>
<code class="literal">IB_BLOB</code>
</p>
</td></tr><tr><td align="left"><code class="literal">BOOL, BOOLEAN</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">CHAR</code></td><td align="left">
<p>
<code class="literal">IB_CHAR</code>
or <code class="literal">IB_CHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">CHAR BYTE</code> (an alias for the BINARY data type)</td><td align="left">
<p>
<code class="literal">IB_CHAR</code>
or <code class="literal">IB_CHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">DATE</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">DATETIME</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">DECIMAL</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
</p>
</td></tr><tr><td align="left"><code class="literal">DEC</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
</p>
</td></tr><tr><td align="left"><code class="literal">DOUBLE PRECISION, REAL</code></td><td align="left">
<p>
<code class="literal">IB_DOUBLE</code>
</p>
</td></tr><tr><td align="left"><code class="literal">DOUBLE</code></td><td align="left">
<p>
<code class="literal">IB_DOUBLE</code>
</p>
</td></tr><tr><td align="left"><code class="literal">ENUM('value1','value2',...)</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
or <code class="literal">IB_VARCHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">FIXED</code></td><td align="left">
<p>
<code class="literal">IB_FLOAT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">FLOAT(p)</code></td><td align="left">
<p>
<code class="literal">IB_FLOAT</code>
or <code class="literal">IB_DOUBLE</code>
</p>
</td></tr><tr><td align="left"><code class="literal">FLOAT</code></td><td align="left">
<p>
<code class="literal">IB_FLOAT</code>
or <code class="literal">IB_DOUBLE</code>
</p>
</td></tr><tr><td align="left"><code class="literal">INTEGER</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">INT</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">LONGBLOB</code></td><td align="left">
<p>
<code class="literal">IB_BLOB</code>
</p>
</td></tr><tr><td align="left"><code class="literal">LONGTEXT</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
or <code class="literal">IB_VARCHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">MEDIUMBLOB</code></td><td align="left">
<p>
<code class="literal">IB_BLOB</code>
</p>
</td></tr><tr><td align="left"><code class="literal">MEDIUMINT</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">MEDIUMTEXT</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
or <code class="literal">IB_VARCHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">NUMERIC</code></td><td align="left">
<p>
<code class="literal">IB_FLOAT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">SERIAL</code></td><td align="left">
<p>
<code class="literal">IB_INT (unsigned)</code>
</p>
</td></tr><tr><td align="left"><code class="literal">SET('value1','value2',...)</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
or <code class="literal">IB_VARCHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">SMALLINT</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">TEXT</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
or <code class="literal">IB_VARCHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">TIME</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">TIMESTAMP</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">TINYBLOB</code></td><td align="left">
<p>
<code class="literal">IB_BLOB</code>
</p>
</td></tr><tr><td align="left"><code class="literal">TINYINT</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr><tr><td align="left"><code class="literal">TINYTEXT</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
or <code class="literal">IB_VARCHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">VARBINARY</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
or <code class="literal">IB_VARCHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">VARCHAR</code></td><td align="left">
<p>
<code class="literal">IB_VARCHAR</code>
or <code class="literal">IB_VARCHAR_ANYCHARSET</code>
</p>
</td></tr><tr><td align="left"><code class="literal">YEAR</code></td><td align="left">
<p>
<code class="literal">IB_INT</code>
</p>
</td></tr></tbody></table></div></div></div><div class="section" title="6.2.5. Column Attributes"><div class="titlepage"><div><div><h3 class="title"><a id="types-col-attr"></a>6.2.5.&nbsp;Column Attributes</h3></div></div></div><p>The column type <code class="literal">ib_col_attr_t</code> can have the following attributes:
</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Attribute Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_col_none"></a><code class="literal">IB_COL_NONE</code></td><td align="left">No special attributes.</td></tr><tr><td align="left"><a id="ib_col_not_null"></a><code class="literal">IB_COL_NOT_NULL</code></td><td align="left">Column cannot be <a class="link" href="#glos_null" title="NULL">NULL</a>.</td></tr><tr><td align="left"><a id="ib_col_unsigned"></a><code class="literal">IB_COL_UNSIGNED</code></td><td align="left">Column
is <a class="link" href="#ib_int"><code class="literal">IB_INT</code></a> and
unsigned.</td></tr><tr><td align="left"><a id="ib_col_custom1"></a><code class="literal">IB_COL_CUSTOM1</code></td><td align="left">Custom precision type.
You can use this and the following custom fields as bit flags to store your own information about column attributes.
Embedded InnoDB does not use these fields itself; InnoDB ignores any values they contain.
</td></tr><tr><td align="left"><a id="ib_col_custom2"></a><code class="literal">IB_COL_CUSTOM2</code></td><td align="left">Custom precision type.</td></tr><tr><td align="left"><a id="ib_col_custom3"></a><code class="literal">IB_COL_CUSTOM3</code></td><td align="left">Custom precision type.</td></tr></tbody></table></div></div><div class="section" title="6.2.6. Column Metadata"><div class="titlepage"><div><div><h3 class="title"><a id="ib_col_meta_t"></a>6.2.6.&nbsp;Column Metadata</h3></div></div></div><p>Every column definition is represented by the data structure <code class="literal">ib_col_meta_t</code>:</p><pre class="screen">typedef struct ib_col_meta_t {
  ib_col_type_t   type;        /* Type of the column */
  ib_col_attr_t   attr;        /* Column attributes */
  ib_ulint_t      type_len;    /* Length of type in bytes, can
                               be IB_SQL_NULL */
  ib_u16_t        client_type; /* 16 bits of data relevant only to the
                               client. InnoDB ignores this attribute */
  ib_charset_t*   charset;     /* Column charset */
} ib_col_meta_t;
</pre></div></div><div class="section" title="6.3. Modes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="modes"></a>6.3.&nbsp;Modes</h2></div></div></div><div class="section" title="6.3.1. Shutdown Modes"><div class="titlepage"><div><div><h3 class="title"><a id="modes-shutdown"></a>6.3.1.&nbsp;Shutdown Modes</h3></div></div></div><p>There are several modes for <a class="link" href="#glos_shutdown" title="shutdown">shutdown</a>,
that control what actions InnoDB should perform when a shutdown of the storage engine is requested.</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Shutdown Mode</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_shutdown_normal"></a><code class="literal">IB_SHUTDOWN_NORMAL</code></td><td align="left">Normal shutdown. Do insert buffer merge and purge before complete shutdown. Depending on the state of the server, this can take several minutes.</td></tr><tr><td align="left"><a id="ib_shutdown_no_ibufmerge_purge"></a><code class="literal">IB_SHUTDOWN_NO_IBUFMERGE_PURGE</code></td><td align="left">Do not do a purge and index buffer merge at shutdown. Note that InnoDB will do the insert buffer merge and purge on the next startup.</td></tr><tr><td align="left"><a id="ib_shutdown_no_bufpool_flush"></a><code class="literal">IB_SHUTDOWN_NO_BUFPOOL_FLUSH</code></td><td align="left">Same as <code class="literal">IB_SHUTDOWN_NO_IBUFMERGE_PURGE</code>,
and in addition do not even flush the buffer pool to data files.
No committed transactions are lost.
Note that this is the equivalent of crashing the server.</td></tr></tbody></table></div></div><div class="section" title="6.3.2. Lock Modes"><div class="titlepage"><div><div><h3 class="title"><a id="modes-lock"></a>6.3.2.&nbsp;Lock Modes</h3></div></div></div><a id="id287629756" class="indexterm"></a><a id="id287629763" class="indexterm"></a><a id="id287629769" class="indexterm"></a><p>InnoDB supports the following <a class="link" href="#glos_lock_mode" title="lock mode">lock modes</a>.
You specify the degree to which you need exclusive access to a resource (for example, while writing)
or shared access (for example, while reading).
Embedded InnoDB controls access to the appropriate tables, rows, and so on based on the locks you acquire,
and returns error codes if a deadlock or timeout condition occurs.
(Thus, it is important to always check return codes.)
</p><p>
Some lock modes can only be used to lock tables;
for example, the lock modes <code class="literal">IB_LOCK_IS</code> and <code class="literal">IB_LOCK_IX</code>.
</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Table type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_lock_is"></a><code class="literal">IB_LOCK_IS</code></td><td align="left"><a class="link" href="#glos_intention_shared_lock" title="intention shared lock">Intention shared</a> (can only be used for locking tables).</td></tr><tr><td align="left"><a id="ib_lock_ix"></a><code class="literal">IB_LOCK_IX</code></td><td align="left"><a class="link" href="#glos_intention_exclusive_lock" title="intention exclusive lock">Intention exclusive</a> (can only be used for locking tables).</td></tr><tr><td align="left"><a id="ib_lock_s"></a><code class="literal">IB_LOCK_S</code></td><td align="left"><a class="link" href="#glos_shared_lock" title="shared lock">Shared</a>.</td></tr><tr><td align="left"><a id="ib_lock_x"></a><code class="literal">IB_LOCK_X</code></td><td align="left"><a class="link" href="#glos_exclusive_lock" title="exclusive lock">Exclusive</a>.</td></tr></tbody></table></div></div><div class="section" title="6.3.3. Cursor Search Modes"><div class="titlepage"><div><div><h3 class="title"><a id="modes-search"></a>6.3.3.&nbsp;Cursor Search Modes</h3></div></div></div><a id="id287629864" class="indexterm"></a><p>
The <a class="link" href="#glos_cursor_search_mode" title="cursor search mode">cursor search modes</a>
represent conditional tests that you would specify
in a SQL <code class="literal">WHERE</code> clause, for example to position the cursor on a row that is
greater or less than some value.
The search mode setting is used by
<a class="link" href="#ib_cursor_moveto" title="6.7.2.23. ib_cursor_moveto"><code class="literal">ib_cursor_moveto()</code></a> to position the
cursor when searching for a key.
</p><p>
Embedded InnoDB currently supports the following search modes:
</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Search Mode</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_cur_g"></a><code class="literal">IB_CUR_G</code></td><td align="left">
<p>
This search mode lets you implement the equivalent of a SQL comparison
<code class="literal">WHERE <em class="replaceable"><code>column</code></em> &gt; <em class="replaceable"><code>value</code></em></code>.
The cursor is positioned on a record that is greater than the search key.
</p>
<p>
If no record has a value that is greater than the search key,
the cursor is positioned on the last record in the table.
</p>
<p>
You can also use this search mode to search in descending order.
Position the cursor using IB_CUR_G, then call <code class="literal">ib_cursor_prev()</code> to
move through the records in descending order.
</p>
</td></tr><tr><td align="left"><a id="ib_cur_ge"></a><code class="literal">IB_CUR_GE</code></td><td align="left">
<p>
This search mode lets you implement the equivalent of a SQL comparison
<code class="literal">WHERE <em class="replaceable"><code>column</code></em> &gt;= <em class="replaceable"><code>value</code></em></code>.
If the search key is found, the cursor is positioned on the first row that is equal to the search key. 
If the search key is not found, the cursor is positioned on the first record that is greater than the search key.
</p>
<p>
Because there is no search mode that requires an exact match, use this search mode also to implement the equivalent
of a SQL comparison <code class="literal">WHERE <em class="replaceable"><code>column</code></em> = <em class="replaceable"><code>value</code></em></code>.
Position the cursor using <code class="literal">IB_CUR_GE</code>, then keep reading and processing records until the key value
is different from the search key.
</p>
</td></tr><tr><td align="left"><a id="ib_cur_l"></a><code class="literal">IB_CUR_L</code></td><td align="left">
This search mode lets you implement the equivalent of a SQL comparison
<code class="literal">WHERE <em class="replaceable"><code>column</code></em> &lt; <em class="replaceable"><code>value</code></em></code>.
The cursor is positioned on a record that is less than the search key.
If no record has a value that is less than the search key,
the cursor is positioned on the first record in the table.
</td></tr><tr><td align="left"><a id="ib_cur_le"></a><code class="literal">IB_CUR_LE</code></td><td align="left">
This search mode lets you implement the equivalent of a SQL comparison
<code class="literal">WHERE <em class="replaceable"><code>column</code></em> &lt;= <em class="replaceable"><code>value</code></em></code>.
If the key is found, the cursor is positioned on the first row that is equal to the search key.
If the search key is not found, the cursor is positioned on the first
record that is less than the search key.
If no record has a value that is less than the search key,
the cursor is positioned on the first record in the table.
</td></tr></tbody></table></div></div><div class="section" title="6.3.4. Cursor Match Modes"><div class="titlepage"><div><div><h3 class="title"><a id="ib_match_mode_t"></a>6.3.4.&nbsp;Cursor Match Modes</h3></div></div></div><a id="id287630124" class="indexterm"></a><p>
These <a class="link" href="#glos_cursor_match_mode" title="cursor match mode">cursor match modes</a> affect the state of the cursor.
The match modes control these things: the positioning of the cursor;
whether or not its state needs to be made persistent;
whether the next N records need to be fetched into the row cache,
on the assumption that the program will do cursor next/prev operations.
Storing the cursor state is an expensive operation and should be minimized and for that reason.
Embedded InnoDB fetches the next N records to avoid unnecessary persistent cursor operations.
Embedded InnoDB currently supports the following match modes:
</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Match Mode</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_closest_match"></a><code class="literal">IB_CLOSEST_MATCH</code></td><td align="left">
Closest match possible.
Note that if you do a search with a full
key value from a unique index, Embedded InnoDB does not store the cursor
position and the program must not call <a class="link" href="#ib_cursor_next" title="6.7.2.6. ib_cursor_next"><code class="literal">ib_cursor_next()</code></a> or
<a class="link" href="#ib_cursor_prev" title="6.7.2.8. ib_cursor_prev"><code class="literal">ib_cursor_prev()</code></a> on the cursor.
</td></tr><tr><td align="left"><a id="ib_exact_match"></a><code class="literal">IB_EXACT_MATCH</code></td><td align="left">
Search using a complete value.
If an exact match is not found, InnoDB returns <code class="literal">DB_RECORD_NOT_FOUND</code>.
<code class="literal">IB_EXACT_MATCH</code> does not store the cursor state and does not fetch the next N records to the row cache,
making it ideal for single-record lookups.
</td></tr><tr><td align="left"><a id="ib_exact_prefix"></a><code class="literal">IB_EXACT_PREFIX</code></td><td align="left">Search using a key prefix which must match to rows: the prefix may contain an incomplete field (the last field in prefix may be just a prefix of a fixed length column).</td></tr></tbody></table></div></div></div><div class="section" title="6.4. Transactions"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="trx"></a>6.4.&nbsp;Transactions</h2></div></div></div><div class="section" title="6.4.1. Transaction Isolation Levels"><div class="titlepage"><div><div><h3 class="title"><a id="trx-isolation-levels"></a>6.4.1.&nbsp;Transaction Isolation Levels</h3></div></div></div><p>
You can specify the following values when starting a transaction.
Each value represents an <a class="link" href="#glos_isolation_level" title="isolation level">isolation level</a>.
The values are listed here in descending order of frequency of use in typical applications.
(In fact, the only design decision needed for most applications is whether
to use <code class="literal">IB_REPEATABLE_READ</code>, which is the default for regular MySQL and InnoDB applications,
or switch to <code class="literal">IB_READ_COMMITTED</code>.

</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Isolation Level</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_repeatable_read"></a><code class="literal">IB_REPEATABLE_READ</code></td><td align="left">
The <a class="link" href="#glos_repeatable_read" title="repeatable read">repeatable read</a> isolation level.
All <a class="link" href="#glos_consistent_read" title="consistent read">consistent reads</a> in the same transaction read the same snapshot.
Full next-key locking is used in locking reads to block insertions into <a class="link" href="#glos_gap" title="gap">gaps</a>.
This is the default isolation level for the InnoDB storage engine when running
under the MySQL database.
</td></tr><tr><td align="left"><a id="ib_read_committed"></a><code class="literal">IB_READ_COMMITTED</code></td><td align="left">
The <a class="link" href="#glos_read_committed" title="read committed">read committed</a> isolation level,
a somewhat Oracle-like mode.
It represents a tradeoff between concurrency and reliability that leans more
towards concurrency; a transaction can see data that was changed by another
transaction and committed, rather than strictly seeing the data as it
existed at the transaction start time.
One difference from Oracle: in range <code class="literal">UPDATE</code> and <code class="literal">DELETE</code>
operations, the engine

blocks the insertion of <span class="quote">“<span class="quote">phantom rows</span>”</span> with next-key locks.
The API equivalents of <code class="literal">SELECT FOR UPDATE</code> and <code class="literal">LOCK IN SHARE MODE</code> only lock the index records,
<span class="bold"><strong>not</strong></span> the <a class="link" href="#glos_gap" title="gap">gaps</a> before them, and thus allow free inserting.
Each <a class="link" href="#glos_consistent_read" title="consistent read">consistent read</a> gets data from its own snapshot.
</td></tr><tr><td align="left"><a id="ib_read_uncommitted"></a><code class="literal">IB_READ_UNCOMMITTED</code></td><td align="left">
<a id="id287630358" class="indexterm"></a>
The <a class="link" href="#glos_read_committed" title="read committed">read uncommitted</a> isolation level,
which allows <a class="link" href="#glos_dirty_read" title="dirty read">dirty reads</a>.
<code class="literal">SELECT</code> operations do not acquire locks,
but also do not reconstruct the original data for rows that are being changed
by other transactions, even changes that have not been committed yet.
Otherwise, this isolation level is like level <code class="literal">IB_REPEATABLE_READ</code>.
Because this mode leans so heavily towards concurrency at the expense of repeatable results, it is
rarely used.
</td></tr><tr><td align="left"><a id="ib_serializable"></a><code class="literal">IB_SERIALIZABLE</code></td><td align="left">
The <a class="link" href="#glos_serializable_read" title="serializable read">serializable read</a> isolation level.
All plain <code class="literal">SELECT</code> operations are converted to <code class="literal">LOCK IN SHARE MODE</code> reads.
Because this mode leans so heavily towards deterministic results at the expense of concurrency, it is
rarely used.
</td></tr></tbody></table></div></div><div class="section" title="6.4.2. Transaction States"><div class="titlepage"><div><div><h3 class="title"><a id="trx-states"></a>6.4.2.&nbsp;Transaction States</h3></div></div></div><p> A transaction can be in one of the following states, which you can check by
using the <a class="link" href="#ib_trx_state" title="6.7.3.3. ib_trx_state"><code class="literal">ib_trx_state()</code></a> function.
The InnoDB deadlock monitor can roll back a transaction, and you
should be prepared for this, especially where there is high contention.
</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Transaction State</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_trx_not_started"></a><code class="literal">IB_TRX_NOT_STARTED</code></td><td align="left">The transaction has not been started yet.</td></tr><tr><td align="left"><a id="ib_trx_active"></a><code class="literal">IB_TRX_ACTIVE</code></td><td align="left">The transaction is currently active and needs to be either committed or rolled back.</td></tr><tr><td align="left"><a id="ib_trx_committed_in_memory"></a><code class="literal">IB_TRX_COMMITTED_IN_MEMORY</code></td><td align="left">Not committed to disk yet.</td></tr><tr><td align="left"><a id="ib_trx_prepared"></a><code class="literal">IB_TRX_PREPARED</code></td><td align="left">Support for 2-phase commit <span class="quote">“<span class="quote">XA</span>”</span> protocol.</td></tr></tbody></table></div></div></div><div class="section" title="6.5. Handles (opaque types)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287630477"></a>6.5.&nbsp;Handles (opaque types)</h2></div></div></div><p>
These <a class="link" href="#glos_handle" title="handle">handle</a> types are returned by various create and open calls.
You do not manipulate their contents directly.
You just pass the returned handles as parameters to subsequent function calls.
</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Handle Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="ib_tpl_t"></a><code class="literal">ib_tpl_t</code></td><td align="left">Handle to a <a class="link" href="#glos_tuple" title="tuple">tuple</a>, used to read and write tuples from a table.</td></tr><tr><td align="left"><a id="ib_trx_t"></a><code class="literal">ib_trx_t</code></td><td align="left"><a class="link" href="#glos_transaction" title="transaction">Transaction</a> handle.</td></tr><tr><td align="left"><a id="ib_crsrl_t"></a><code class="literal">ib_crsrl_t</code></td><td align="left">Handle to an InnoDB <a class="link" href="#glos_cursor" title="cursor">cursor</a>.</td></tr><tr><td align="left"><a id="ib_sch_t"></a><code class="literal">ib_sch_t</code></td><td align="left">Handle to a <a class="link" href="#glos_table_schema" title="table schema">table schema</a> instance, used to create tables.</td></tr><tr><td align="left"><a id="ib_idx_sch_t"></a><code class="literal">ib_idx_sch_t</code></td><td align="left">Handle to an <a class="link" href="#glos_index_schema" title="index schema">index schema</a> instance, used to create indexes on a table.</td></tr></tbody></table></div></div><div class="section" title="6.6. Error and Status Codes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="error-codes"></a>6.6.&nbsp;Error and Status Codes</h2></div></div></div><p>
The API functions can return the following status/error codes.
</p><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Status/Error Code</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="db_success"></a>DB_SUCCESS</td><td align="left">All API functions that complete successfully return this error code.</td></tr><tr><td align="left"><a id="db_error"></a>DB_ERROR</td><td align="left">Generic failure code.</td></tr><tr><td align="left"><a id="db_out_of_memory"></a>DB_OUT_OF_MEMORY</td><td align="left">InnoDB cannot allocate memory.</td></tr><tr><td align="left"><a id="db_out_of_file_space"></a>DB_OUT_OF_FILE_SPACE</td><td align="left">No more disk space on the filesystem.</td></tr><tr><td align="left"><a id="db_lock_wait"></a>DB_LOCK_WAIT</td><td align="left">Another transaction has a request on the table in an incompatible mode:
this transaction may have to wait.</td></tr><tr><td align="left"><a id="db_deadlock"></a>DB_DEADLOCK</td><td align="left">A lock request will result in a <a class="link" href="#glos_deadlock" title="deadlock">deadlock</a> error.
Deadlock has already happened and the transaction has been rolled back by the deadlock monitor.
The transaction handle should be freed with <code class="literal">ib_trx_release()</code>.
</td></tr><tr><td align="left"><a id="db_duplicate_key"></a>DB_DUPLICATE_KEY</td><td align="left">An insert or update operation violates a unique constraint.</td></tr><tr><td align="left"><a id="db_que_thr_suspended"></a>DB_QUE_THR_SUSPENDED</td><td align="left">Lock request was ignored; do not enqueue a lock request if the query thread should be stopped anyway.</td></tr><tr><td align="left"><a id="db_missing_history"></a>DB_MISSING_HISTORY</td><td align="left">Required history data has been deleted, due to lack of space in <a class="link" href="#glos_rollback_segment" title="rollback segment">rollback segment</a>.</td></tr><tr><td align="left"><a id="db_table_not_found"></a>DB_TABLE_NOT_FOUND</td><td align="left">Table could not be found in the data dictionary.</td></tr><tr><td align="left"><a id="db_must_get_more_file_space"></a>DB_MUST_GET_MORE_FILE_SPACE</td><td align="left">The database must be stopped and restarted with more file space.

</td></tr><tr><td align="left"><a id="db_table_is_being_used"></a>DB_TABLE_IS_BEING_USED</td><td align="left">Attempt to create a table and the table already exists in the data dictionary.</td></tr><tr><td align="left"><a id="db_too_big_record"></a>DB_TOO_BIG_RECORD

</td><td align="left">A record being inserted or updated would not fit on a compressed page,
or it would become bigger than 1/2 the free space in an uncompressed page frame.
This error can only happen when inserting or updating table data; InnoDB handle updates to index pages automatically.
</td></tr><tr><td align="left"><a id="db_lock_wait_timeout"></a>DB_LOCK_WAIT_TIMEOUT</td><td align="left">Lock wait lasted too long.
The transaction has been rolled back by the dead lock monitor.
Free the transaction handle by calling the function <code class="literal">ib_trx_release()</code>.
</td></tr><tr><td align="left"><a id="db_no_referenced_row"></a>DB_NO_REFERENCED_ROW</td><td align="left">Referenced key value not found for a foreign key in an insert or update of a row. (Not currently implemented.)</td></tr><tr><td align="left"><a id="db_row_is_referenced"></a>DB_ROW_IS_REFERENCED</td><td align="left">Cannot delete or update a row because it contains a key value that is referenced. (Not currently implemented.)</td></tr><tr><td align="left"><a id="db_cannot_add_constraint"></a>DB_CANNOT_ADD_CONSTRAINT</td><td align="left">Adding a foreign key constraint to a table failed. (Not currently implemented.)</td></tr><tr><td align="left"><a id="db_corruption"></a>DB_CORRUPTION</td><td align="left">Data structure corruption noticed.</td></tr><tr><td align="left"><a id="db_col_appears_twice_in_index"></a>DB_COL_APPEARS_TWICE_IN_INDEX</td><td align="left">InnoDB cannot handle an index where the same column appears twice.</td></tr><tr><td align="left"><a id="db_cannot_drop_constraint"></a>DB_CANNOT_DROP_CONSTRAINT</td><td align="left">Dropping a foreign key constraint from a table failed. (Not currently implemented.)</td></tr><tr><td align="left"><a id="db_no_savepoint"></a>DB_NO_SAVEPOINT</td><td align="left">No savepoint exists with the given name.</td></tr><tr><td align="left"><a id="db_tablespace_already_exists"></a>DB_TABLESPACE_ALREADY_EXISTS</td><td align="left">Cannot create a new single-table tablespace because a file of the same name already exists.</td></tr><tr><td align="left"><a id="db_tablespace_deleted"></a>DB_TABLESPACE_DELETED</td><td align="left">Tablespace does not exist or is being dropped right now.</td></tr><tr><td align="left"><a id="db_lock_table_full"></a>DB_LOCK_TABLE_FULL</td><td align="left">Lock structs have exhausted the <a class="link" href="#glos_buffer_pool" title="buffer pool">buffer pool</a>. (For big transactions, InnoDB stores the lock structs in the buffer pool.)</td></tr><tr><td align="left"><a id="db_foreign_duplicate_key"></a>DB_FOREIGN_DUPLICATE_KEY</td><td align="left">Foreign key constraints activated, but the operation would lead to a duplicate key in some table. (Not currently implemented.)</td></tr><tr><td align="left"><a id="db_too_many_concurrent_trxs"></a>DB_TOO_MANY_CONCURRENT_TRXS</td><td align="left">When InnoDB runs out of the preconfigured undo slots; this can only happen when there are too many concurrent transactions.</td></tr><tr><td align="left"><a id="db_unsupported"></a>DB_UNSUPPORTED</td><td align="left">When InnoDB sees any construct or feature that it cannot
recognize or work with; for example, a table created by a later
version of the engine.</td></tr><tr><td align="left"><a id="db_primary_key_is_null"></a>DB_PRIMARY_KEY_IS_NULL</td><td align="left">A column in the primary key was found to be <code class="literal">NULL</code>.</td></tr></tbody></table></div><div class="section" title="6.6.1. Warnings"><div class="titlepage"><div><div><h3 class="title"><a id="error-codes-warnings"></a>6.6.1.&nbsp;Warnings</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Warning Code</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="db_record_not_found"></a>DB_RECORD_NOT_FOUND</td><td align="left">A record cannot be found in a table or index during a search.</td></tr><tr><td align="left"><a id="db_end_of_index"></a>DB_END_OF_INDEX</td><td align="left">A record cannot be found in a table or index during a search, and the search ends up at the end of the index.</td></tr><tr><td align="left"><a id="db_schema_error"></a>DB_SCHEMA_ERROR</td><td align="left">Error encountered when validating a table or index schema.

</td></tr><tr><td align="left"><a id="db_data_mismatch"></a>DB_DATA_MISMATCH</td><td align="left">Attempt to set the value of a column in a tuple from a different type.
For example, trying to write an <code class="literal">INT</code> value to a <code class="literal">CHAR</code> column.

</td></tr><tr><td align="left"><a id="db_schema_not_locked"></a>DB_SCHEMA_NOT_LOCKED</td><td align="left">An API function expects the schema to be locked in exclusive mode, but it is not.</td></tr><tr><td align="left"><a id="db_not_found"></a>DB_NOT_FOUND</td><td align="left">Generic error code for <span class="quote">“<span class="quote">Not found</span>”</span> type of errors.</td></tr><tr><td align="left"><a id="db_readonly"></a>DB_READONLY</td><td align="left">Generic error code for <span class="quote">“<span class="quote">Read only</span>”</span> type of errors.</td></tr><tr><td align="left"><a id="db_invalid_input"></a>DB_INVALID_INPUT</td><td align="left">Generic error code for <span class="quote">“<span class="quote">Invalid input</span>”</span> type of errors.</td></tr></tbody></table></div></div></div><div class="section" title="6.7. API Function Reference"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287631003"></a>6.7.&nbsp;API Function Reference</h2></div></div></div><p>The Embedded InnoDB API is divided into several groups:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p><a class="xref" href="#startup-functions" title="6.7.1. API Functions - Startup/Shutdown">Section&nbsp;6.7.1, “API Functions - Startup/Shutdown”</a></p></li><li class="listitem"><p><a class="xref" href="#cursor-functions" title="6.7.2. API Functions - Cursors">Section&nbsp;6.7.2, “API Functions - Cursors”</a></p></li><li class="listitem"><p><a class="xref" href="#transaction-functions" title="6.7.3. API Functions - Transactions">Section&nbsp;6.7.3, “API Functions - Transactions”</a></p></li><li class="listitem"><p><a class="xref" href="#configuration-functions" title="6.7.4. API Functions - Configuration">Section&nbsp;6.7.4, “API Functions - Configuration”</a></p></li><li class="listitem"><p><a class="xref" href="#ddl-functions" title="6.7.5. API Functions - DDL">Section&nbsp;6.7.5, “API Functions - DDL”</a></p></li><li class="listitem"><p><a class="xref" href="#misc-functions" title="6.7.6. API Functions - DDL and DML Support">Section&nbsp;6.7.6, “API Functions - DDL and DML Support”</a></p></li><li class="listitem"><p><a class="xref" href="#tuple-functions" title="6.7.7. API Functions - Tuples">Section&nbsp;6.7.7, “API Functions - Tuples”</a></p></li></ul></div><p>
To see these APIs in action, look in the sample programs listed in <a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a>.
</p><div class="section" title="6.7.1. API Functions - Startup/Shutdown"><div class="titlepage"><div><div><h3 class="title"><a id="startup-functions"></a>6.7.1.&nbsp;API Functions - Startup/Shutdown</h3></div></div></div><p>
These APIs are typically the first and last functions that you call within a Embedded InnoDB program.
(You might also call some of the functions in <a class="xref" href="#configuration-functions" title="6.7.4. API Functions - Configuration">Section&nbsp;6.7.4, “API Functions - Configuration”</a>
prior to starting the database engine.)
To see these APIs in action, look in the sample programs listed in <a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a>.
</p><div class="section" title="6.7.1.1. ib_api_version"><div class="titlepage"><div><div><h4 class="title"><a id="ib_api_version"></a>6.7.1.1.&nbsp;ib_api_version</h4></div></div></div><a id="id287631063" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_u64_t</span> ib_api_version(void);
   </pre></div><p>
This function returns a <code class="literal">ib_u64_t</code> value representing the version number of the API.
It is primarily useful at the beginning of your program, before calling any other Embedded InnoDB function,
to choose a version-specific code path.
The version number format is in the lower three byes and can be extracted as follows:
</p><pre class="screen">int release, revision, age;

release = version &gt;&gt; 32;
revision = (version &gt;&gt; 16) &amp; 0xffff;
age = version &amp; 0xffff
</pre><p>

</p></div><div class="section" title="6.7.1.2. ib_init"><div class="titlepage"><div><div><h4 class="title"><a id="ib_init"></a>6.7.1.2.&nbsp;ib_init</h4></div></div></div><a id="id287631093" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_init(void);
   </pre></div><p>
This function must be called before calling any other Embedded InnoDB function except
<a class="link" href="#ib_api_version" title="6.7.1.1. ib_api_version">ib_api_version()</a> and the
<a class="link" href="#configuration-functions" title="6.7.4. API Functions - Configuration">configuration</a> functions.
It initializes the memory sub-system.
</p></div><div class="section" title="6.7.1.3. ib_startup"><div class="titlepage"><div><div><h4 class="title"><a id="ib_startup"></a>6.7.1.3.&nbsp;ib_startup</h4></div></div></div><a id="id287631121" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_startup(const char* format);
   </pre></div><div class="refsect1"><a id="id287631132"></a><p>Starts up the engine, creates the system tables if they do not exist,
and does recovery if the system was not shut down cleanly.
This function starts up the background I/O threads and sets up the
<a class="link" href="#glos_buffer_pool" title="buffer pool">buffer pool</a>
and other memory structures.
The only functions that you can call before startup are these configuration functions:

    <a class="link" href="#ib_cfg_set_int" title="6.7.4.2. ib_cfg_set_int">ib_cfg_set*()</a>,
    <a class="link" href="#ib_cfg_set_int" title="6.7.4.2. ib_cfg_set_int">ib_cfg_get*()</a> and
    <a class="link" href="#ib_cfg_var_get_type" title="6.7.4.1. ib_cfg_var_get_type">ib_cfg_var_get_type()</a>.
</p><p>
If you do not set up the configuration parameters, InnoDB uses pre-configured default values.
In particular, it uses the current working directory to create the
<a class="link" href="#glos_system_tablespace" title="system tablespace">system tablespace</a>
and the <a class="link" href="#glos_redo_log" title="redo log">redo log</a> files.</p><div class="variablelist"><table border="0"><colgroup><col align="left" valign="top"></colgroup><tbody><tr><td><p><span class="term">Parameters:</span></p></td><td><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: format</code>
	</span></dt><dd><p>is the file format name </p></dd></dl></div></td></tr><tr><td><p><span class="term">Returns:</span></p></td><td><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></td></tr></tbody></table></div></div></div><div class="section" title="6.7.1.4. ib_shutdown"><div class="titlepage"><div><div><h4 class="title"><a id="ib_shutdown"></a>6.7.1.4.&nbsp;ib_shutdown</h4></div></div></div><a id="id287631204" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_shutdown(<a class="link" href="#modes-shutdown" title="6.3.1. Shutdown Modes">ib_shutdown_t</a> flag);
   </pre></div><div class="refsect1"><a id="id287631220"></a><p> Shuts down the InnoDB instance and frees up all the memory. There must not be any active transactions.  It also shuts down the background I/O threads. InnoDB supports several <a class="link" href="#modes-shutdown" title="6.3.1. Shutdown Modes">modes of shutdown</a>.</p><div class="variablelist"><table border="0"><colgroup><col align="left" valign="top"></colgroup><tbody><tr><td><p><span class="term">Parameters:</span></p></td><td><div class="variablelist"><dl><dt><span class="term">
         <code class="computeroutput">in: flag</code>
        </span></dt><dd><p>is the shutdown mode</p></dd></dl></div></td></tr><tr><td><p><span class="term">Returns:</span></p></td><td><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></td></tr></tbody></table></div></div></div></div><div class="section" title="6.7.2. API Functions - Cursors"><div class="titlepage"><div><div><h3 class="title"><a id="cursor-functions"></a>6.7.2.&nbsp;API Functions - Cursors</h3></div></div></div><p>
To see these APIs in action, look in the sample programs listed in <a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a>.
</p><div class="section" title="6.7.2.1. ib_cursor_open_table"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_open_table"></a>6.7.2.1.&nbsp;ib_cursor_open_table</h4></div></div></div><a id="id287631445" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_open_table(const char* name, ib_trx_t ib_trx,
                                  ib_crsr_t* ib_crsr);
   </pre></div><div class="refsect1"><a id="id287631459"></a><p>
	 Open a table using the table name.
	 Use this function to create a cursor over the table.
	 The transaction instance can be <code class="literal">NULL</code>; in this case, you must call
	 <a class="link" href="#ib_cursor_attach_trx" title="6.7.2.9. ib_cursor_attach_trx">ib_cursor_attach_trx()</a>
	 to attach the cursor to an active transaction before using the cursor.
	</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>is the table name to open</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>An active transaction; can be <code class="literal">NULL</code></p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_crsr</code>
	</span></dt><dd><p>is the newly created cursor instance</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.2. ib_cursor_open_table_using_id"><div class="titlepage"><div><div><h4 class="title"><a id="id287631358"></a>6.7.2.2.&nbsp;ib_cursor_open_table_using_id</h4></div></div></div><a id="id287631465" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_open_table_using_id(
             ib_id_t        table_id,
             ib_trx_t       ib_trx,
             ib_crsr_t*     ib_crsr);
   </pre></div><div class="refsect1"><a id="id287631477"></a><p> Open a table using the table numeric ID.
Use this function to create a cursor over the table.
The transaction instance can be <code class="literal">NULL</code>; in this case, you must call
<a class="link" href="#ib_cursor_attach_trx" title="6.7.2.9. ib_cursor_attach_trx">ib_cursor_attach_trx()</a>
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: table_id</code>
	</span></dt><dd><p>is the table id to open</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>an active transaction, can be <code class="literal">NULL</code></p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_crsr</code>
	</span></dt><dd><p>is the newly created cursor instance</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.3. ib_cursor_open_index_using_name"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_open_index_using_name"></a>6.7.2.3.&nbsp;ib_cursor_open_index_using_name</h4></div></div></div><a id="id287631790" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_open_index_using_name(
             ib_crsr_t       ib_open_crsr,
             const char*     index_name,
             ib_crsr_t*      ib_crsr);
   </pre></div><div class="refsect1"><a id="id287631802"></a><p> Open an index using the secondary index name. Use this function to create a cursor over a secondary index. <code class="literal">ib_open_crsr</code> should be an open table cursor.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_open_crsr</code>
	</span></dt><dd><p>is an open table cursor</p></dd><dt><span class="term">
	 <code class="computeroutput">in: index_name</code>
	</span></dt><dd><p>name of the index to use</p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_crsr</code>
	</span></dt><dd><p>is the newly created cursor instance</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.4. ib_cursor_open_index_using_id"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_open_index_using_id"></a>6.7.2.4.&nbsp;ib_cursor_open_index_using_id</h4></div></div></div><a id="id287631868" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_open_index_using_id(
             ib_id_t         index_id,
             ib_trx_t        ib_trx,
             ib_crsr_t*      ib_crsr);
   </pre></div><div class="refsect1"><a id="id287631880"></a><p> Open an index using the index numeric ID.
Use this function to create a cursor over the index.
The transaction instance can be <code class="literal">NULL</code>; in this case, you must call
<a class="link" href="#ib_cursor_attach_trx" title="6.7.2.9. ib_cursor_attach_trx">ib_cursor_attach_trx()</a>
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: index_id</code>
	</span></dt><dd><p>the index id is a 64 bit number and should be encoded as follows: [table id:32bits | index id:32 bits] </p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>transaction instance, can be <code class="literal">NULL</code></p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_crsr</code>
	</span></dt><dd><p>is the newly created cursor instance</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.5. ib_cursor_first"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_first"></a>6.7.2.5.&nbsp;ib_cursor_first</h4></div></div></div><a id="id287631954" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_first(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287631965"></a><p>Position the cursor on the first record in the index or table.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.6. ib_cursor_next"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_next"></a>6.7.2.6.&nbsp;ib_cursor_next</h4></div></div></div><a id="id287631665" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_next(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287631676"></a><p> Move the cursor to the next user record.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.7. ib_cursor_last"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_last"></a>6.7.2.7.&nbsp;ib_cursor_last</h4></div></div></div><a id="id287632024" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_last(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287632036"></a><p> Position the cursor on the last table or secondary index record.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.8. ib_cursor_prev"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_prev"></a>6.7.2.8.&nbsp;ib_cursor_prev</h4></div></div></div><a id="id287632075" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_prev(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287632088"></a><p> Move the cursor to the previous table or secondary index record.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.9. ib_cursor_attach_trx"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_attach_trx"></a>6.7.2.9.&nbsp;ib_cursor_attach_trx</h4></div></div></div><a id="id287632128" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_attach_trx(ib_crsr_t ib_crsr, ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287632139"></a><p>
Set the current active transaction and attaches the cursor to the transaction.
It is an error to attach a cursor to a transaction when the cursor is already attached to another transaction.
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>An open table or secondary index cursor that is not attached to any transaction.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>an active transaction instance, cannot be <code class="literal">NULL</code></p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.10. ib_cursor_set_cluster_access"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_set_cluster_access"></a>6.7.2.10.&nbsp;ib_cursor_set_cluster_access</h4></div></div></div><a id="id287632194" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_set_cluster_access(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287632205"></a><p>
Prepare the cursor so it can access the clustered index via the secondary index.
The InnoDB engine acquires the necessary locks.
Use this function when you are using the secondary index for positioning or lookup,
and want to subsequently access fields that are not included in that secondary index.
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open secondary index cursor</p></dd></dl></div></dd></dl></div></div></div><div class="section" title="6.7.2.11. ib_cursor_is_positioned"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_is_positioned"></a>6.7.2.11.&nbsp;ib_cursor_is_positioned</h4></div></div></div><a id="id287632302" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_is_positioned(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287632314"></a><p>
Check if an InnoDB table or secondary index cursor
is positioned on a record in the table.
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#constants" title="6.1. Constants">IB_TRUE or IB_FALSE</a></p></dd></dl></div></div></div><div class="section" title="6.7.2.12. ib_cursor_set_lock_mode"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_set_lock_mode"></a>6.7.2.12.&nbsp;ib_cursor_set_lock_mode</h4></div></div></div><a id="id287632354" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_set_lock_mode(ib_crsr_t ib_crsr, <a class="link" href="#modes-lock" title="6.3.2. Lock Modes">ib_lck_mode_t</a> ib_lck_mode);
   </pre></div><div class="refsect1"><a id="id287632370"></a><p>
	 Set the <a class="link" href="#glos_lock_mode" title="lock mode">lock mode</a> of the cursor.
	 The lock mode can be one of <a class="link" href="#modes-lock" title="6.3.2. Lock Modes">IB_LOCK_X</a> or
	 <a class="link" href="#modes-lock" title="6.3.2. Lock Modes">IB_LOCK_S</a>.
	 You must call this function when you are doing the equivalent of <code class="literal">SELECT FOR UPDATE</code>,
	 even if the application is single-threaded.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_lck_mode</code>
	</span></dt><dd><p>one of <a class="link" href="#modes-lock" title="6.3.2. Lock Modes">IB_LOCK_S or IB_LOCK_X</a></p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.13. ib_cursor_set_match_mode"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_set_match_mode"></a>6.7.2.13.&nbsp;ib_cursor_set_match_mode</h4></div></div></div><a id="id287632441" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">void</span> ib_cursor_set_match_mode(ib_crsr_t ib_crsr, <a class="link" href="#ib_match_mode_t" title="6.3.4. Cursor Match Modes">ib_match_mode_t</a> match_mode);
   </pre></div><div class="refsect1"><a id="id287632457"></a><p>
	 Set the match mode for the cursor,
	 used by <a class="link" href="#ib_cursor_moveto" title="6.7.2.23. ib_cursor_moveto">ib_cursor_moveto</a>.
	 The values are explained in <a class="xref" href="#ib_match_mode_t" title="6.3.4. Cursor Match Modes">Section&nbsp;6.3.4, “Cursor Match Modes”</a>.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table cursor</p></dd><dt><span class="term">
	 <code class="computeroutput">in: match_mode</code>
	</span></dt><dd><p>the match mode to set</p></dd></dl></div></dd></dl></div></div></div><div class="section" title="6.7.2.14. ib_cursor_set_simple_select"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_set_simple_select"></a>6.7.2.14.&nbsp;ib_cursor_set_simple_select</h4></div></div></div><a id="id287632539" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">void</span> ib_cursor_simple_select(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287632551"></a><p>Set the simple select flag,
a hint that means that your code does not intend to
modify any of the records that the cursor traverses.
(That is, the cursor represents a simple <code class="literal">SELECT</code>
statement rather than <code class="literal">SELECT ... FOR UPDATE</code>.)
</p><p>
When this flag is set and the transaction isolation level
is either <a class="link" href="#trx-isolation-levels" title="6.4.1. Transaction Isolation Levels">IB_TRX_READ_UNCOMMITTED or
IB_TRX_READ_COMMITTED</a> and the cursor lock mode is set to something other than
<a class="link" href="#modes-lock" title="6.3.2. Lock Modes">IB_LOCK_NONE</a>, Embedded InnoDB does not set <a class="link" href="#glos_gap" title="gap">gap</a> locks.
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
<code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd></dl></div></dd></dl></div></div></div><div class="section" title="6.7.2.15. ib_cursor_stmt_begin"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_stmt_begin"></a>6.7.2.15.&nbsp;ib_cursor_stmt_begin</h4></div></div></div><a id="id287632604" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">void</span> ib_cursor_stmt_begin(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287632616"></a><p>
	Set the statement begin flag.
	When you use the <a class="link" href="#glos_read_committed" title="read committed">READ COMMITTED</a> isolation level,
	each <span class="quote">“<span class="quote">statement</span>”</span> has its own snapshot to
	perform <a class="link" href="#glos_consistent_read" title="consistent read">consistent reads</a>.
	Since Embedded InnoDB programs do not use actual SQL statements,
	this function lets you specify the point to generate each snapshot.
	</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
        <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd></dl></div></dd></dl></div></div></div><div class="section" title="6.7.2.16. ib_cursor_lock"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_lock"></a>6.7.2.16.&nbsp;ib_cursor_lock</h4></div></div></div><a id="id287632658" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_lock(ib_crsr_t ib_crsr, <a class="link" href="#modes-lock" title="6.3.2. Lock Modes">ib_lck_mode_t</a> ib_lck_mode);
   </pre></div><div class="refsect1"><a id="id287632674"></a><p>
	 Lock the table that the cursor is iterating over.
	 This function locks the table even if the cursor is a secondary index cursor.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_lck_mode</code>
	</span></dt><dd><p>one of <a class="link" href="#modes-lock" title="6.3.2. Lock Modes">IB_LOCK_IS or IB_LOCK_IX</a></p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.17. ib_cursor_reset"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_reset"></a>6.7.2.17.&nbsp;ib_cursor_reset</h4></div></div></div><a id="id287632728" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_reset(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287632740"></a><p>
	 Reset the cursor.
	 The cursor state is reset, and memory allocated for old versions of records is reclaimed.
	 Memory for internal data structures is freed.
	 The cursor is no longer associated with any transaction after successfully returning from this function.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.18. ib_cursor_close"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_close"></a>6.7.2.18.&nbsp;ib_cursor_close</h4></div></div></div><a id="id287632779" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_close(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287632791"></a><p> Close the cursor. The cursor handle is invalid after calling this function.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table cursor</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.19. ib_cursor_insert_row"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_insert_row"></a>6.7.2.19.&nbsp;ib_cursor_insert_row</h4></div></div></div><a id="id287632832" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_insert_row(ib_crsr_t ib_crsr, const ib_tpl_t ib_tpl);
   </pre></div><div class="refsect1"><a id="id287632843"></a><p>Insert a row into a table.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table cursor</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>tuple to insert into a table</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.20. ib_cursor_update_row"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_update_row"></a>6.7.2.20.&nbsp;ib_cursor_update_row</h4></div></div></div><a id="id287632894" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_update_row(
             ib_crsr_t       ib_crsr,
             const ib_tpl_t  ib_old_tpl,
             const ib_tpl_t  ib_new_tpl);
   </pre></div><div class="refsect1"><a id="id287632906"></a><p>
	 Update a row in the table.
	 The cursor should be positioned on the record to be updated.
	 You must fill in all columns for the tuples representing both the
	 new and old rows.
	 The Embedded InnoDB engine determines which values are unchanged and
	 thus do not need to be written out.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table cursor</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_old_tpl</code>
	</span></dt><dd><p>The column values of the old record on which the cursor is positioned.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_new_tpl</code>
	</span></dt><dd><p>The new values that need to be updated.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.21. ib_cursor_delete_row"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_delete_row"></a>6.7.2.21.&nbsp;ib_cursor_delete_row</h4></div></div></div><a id="id287632968" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_delete_row(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287632980"></a><p>Delete the current row from a table. Current row is where the cursor is positioned.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table cursor</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.22. ib_cursor_read_row"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_read_row"></a>6.7.2.22.&nbsp;ib_cursor_read_row</h4></div></div></div><a id="id287633020" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_read_row(ib_crsr_t ib_crsr, ib_tpl_t ib_tpl);
   </pre></div><div class="refsect1"><a id="id287633032"></a><p>
	 Read the current row from a table or a secondary index.
	 Current row is where the cursor is positioned.
	 There are two types of read operations: reading the key columns, and reading all the columns.
	 This function can be called with either a table cursor or a secondary index cursor.
	 The columns that are actually read depends on the tuple type.
	 See also <a class="link" href="#ib_sec_search_tuple_create" title="6.7.7.2. ib_sec_search_tuple_create">ib_sec_search_tuple_create</a>,
	 <a class="link" href="#ib_sec_read_tuple_create" title="6.7.7.1. ib_sec_read_tuple_create">ib_sec_read_tuple_create</a>,
	 <a class="link" href="#ib_clust_search_tuple_create" title="6.7.7.4. ib_clust_search_tuple_create">ib_clust_search_tuple_create</a>
	 and <a class="link" href="#ib_clust_read_tuple_create" title="6.7.7.3. ib_clust_read_tuple_create">ib_clust_read_tuple_create</a>
	 for creating different tuple types.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd><dt><span class="term">
	 <code class="computeroutput">in/out: ib_tpl</code>
	</span></dt><dd><p>Tuple to read the values into</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.2.23. ib_cursor_moveto"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_moveto"></a>6.7.2.23.&nbsp;ib_cursor_moveto</h4></div></div></div><a id="id287633169" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_moveto(
             ib_crsr_t       ib_crsr,
             ib_tpl_t        ib_tpl,
             <a class="link" href="#modes-search" title="6.3.3. Cursor Search Modes">ib_srch_mode_t</a>  ib_srch_mode,
	     int*            result);
   </pre></div><div class="refsect1"><a id="id287633185"></a><p>Search for a key in the clustered index (that is, the full table) or via the secondary index.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is an open table or secondary index cursor</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>
				Tuple to search for.
				It must be created by either the <a class="link" href="#ib_sec_search_tuple_create" title="6.7.7.2. ib_sec_search_tuple_create">ib_sec_search_tuple_create</a>
				or <a class="link" href="#ib_clust_search_tuple_create" title="6.7.7.4. ib_clust_search_tuple_create">ib_clust_search_tuple_create</a> function.
				</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_srch_mode</code>
	</span></dt><dd><p>This determines where the cursor will be positioned on return depending on the last match. See also <a class="link" href="#modes-search" title="6.3.3. Cursor Search Modes"> search modes</a>.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: result</code>
	</span></dt><dd><p>result is -1, 0 or 1 depending on tuple equal or greater than the current row</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div></div><div class="section" title="6.7.3. API Functions - Transactions"><div class="titlepage"><div><div><h3 class="title"><a id="transaction-functions"></a>6.7.3.&nbsp;API Functions - Transactions</h3></div></div></div><p>
These functions deal with <a class="link" href="#glos_transaction" title="transaction">transactions</a>.
For usage instructions, see <a class="xref" href="#transactions" title="Chapter 5. Managing Transactions with Embedded InnoDB">Chapter&nbsp;5, <i>Managing Transactions with Embedded InnoDB</i></a>.
To see these APIs in action, look in the sample programs listed in <a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a>.
</p><div class="section" title="6.7.3.1. ib_trx_begin"><div class="titlepage"><div><div><h4 class="title"><a id="ib_trx_begin"></a>6.7.3.1.&nbsp;ib_trx_begin</h4></div></div></div><a id="id287633322" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_trx_t</span> ib_trx_begin(<a class="link" href="#trx-isolation-levels" title="6.4.1. Transaction Isolation Levels">ib_trx_level_t</a> ib_trx_level);
   </pre></div><div class="refsect1"><a id="id287633338"></a><p>
	 Begin a new transaction,
	 put the transaction in the active state,
	 and return a handle to the transaction.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx_level</code>
	</span></dt><dd><p>The transaction isolation level</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>a valid transaction handle, or <code class="literal">NULL</code> on failure</p></dd></dl></div><p>
    </p><pre class="screen">        ib_trx_t    ib_trx;
        ib_err_t    ib_err;
        ib_crsr_t   ib_crsr;

        ib_trx = ib_trx_begin(IB_TRX_REPEATABLE_READ);
        ib_err = ib_cursor_open_table("db/t", ib_trx, &amp;ib_crsr);
        ... Do some DML operations ...
        ib_err = ib_cursor_close(ib_crsr);
        ib_trx_commit(ib_trx);
    </pre></div></div><div class="section" title="6.7.3.2. ib_trx_commit"><div class="titlepage"><div><div><h4 class="title"><a id="ib_trx_commit"></a>6.7.3.2.&nbsp;ib_trx_commit</h4></div></div></div><a id="id287633386" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_trx_commit(ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287633398"></a><p>
	 Commits a transaction.
	 Also releases any schema latches, and frees the transaction handle.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is an active transaction handle</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.3.3. ib_trx_state"><div class="titlepage"><div><div><h4 class="title"><a id="ib_trx_state"></a>6.7.3.3.&nbsp;ib_trx_state</h4></div></div></div><a id="id287633437" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type"><a class="link" href="#trx-states" title="6.4.2. Transaction States">ib_trx_state_t</a></span> ib_trx_state(ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287633452"></a><p>Query the transaction's state. This function can be used to check for the state of the transaction in case it has been rolled back by the InnoDB deadlock detector. Note that when a transaction is selected as a victim for rollback, InnoDB will always return an appropriate error code indicating this. See also <a class="link" href="#db_deadlock">DB_DEADLOCK</a>, <a class="link" href="#db_lock_table_full">DB_LOCK_TABLE_FULL</a> and <a class="link" href="#db_lock_wait_timeout">DB_LOCK_WAIT_TIMEOUT</a></p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>handle to a transaction instance</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#trx-states" title="6.4.2. Transaction States">Transaction state</a></p></dd></dl></div></div></div><div class="section" title="6.7.3.4. ib_trx_start"><div class="titlepage"><div><div><h4 class="title"><a id="ib_trx_start"></a>6.7.3.4.&nbsp;ib_trx_start</h4></div></div></div><a id="id287633502" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_trx_start(ib_trx_t ib_trx, <a class="link" href="#trx-isolation-levels" title="6.4.1. Transaction Isolation Levels">ib_trx_level_t</a> ib_trx_level);
   </pre></div><div class="refsect1"><a id="id287633520"></a><p>
	 Restart a transaction that has been rolled back.
	 This special function exists for the case when the deadlock detector has rolled back a transaction.
	 While the transaction has been rolled back, the handle is still valid and can be reused by calling this function.
	 If you do not want to reuse the transaction handle,
	 you can free the handle by calling <a class="link" href="#ib_trx_release" title="6.7.3.5. ib_trx_release">ib_trx_release()</a>.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd>is a handle to a transaction that is in state
	<a class="link" href="#ib_trx_not_started"><code class="literal">IB_TRX_NOT_STARTED</code></a></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_trx_level</code>
	</span></dt><dd><p>The transaction isolation level for the new transaction.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.3.5. ib_trx_release"><div class="titlepage"><div><div><h4 class="title"><a id="ib_trx_release"></a>6.7.3.5.&nbsp;ib_trx_release</h4></div></div></div><a id="id287633648" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_trx_release(ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287633659"></a><p>
		Release the transaction handle.
		If a transaction was rolled
    back by Embedded InnoDB because of a lock wait timeout or deadlock, the
    rolled back transaction cannot be committed or rolled back
    using <a class="link" href="#ib_trx_commit" title="6.7.3.2. ib_trx_commit">ib_trx_commit</a>
    or <a class="link" href="#ib_trx_rollback" title="6.7.3.6. ib_trx_rollback">ib_trx_rollback</a>.
		The transaction must be released using this function,
		or else restarted by <a class="link" href="#ib_trx_start" title="6.7.3.4. ib_trx_start">ib_trx_start</a>.
		The transaction must be in
    state <a class="link" href="#ib_trx_not_started">IB_TRX_NOT_STARTED</a>;
    use the <a class="link" href="#ib_trx_state" title="6.7.3.3. ib_trx_state">ib_trx_state</a> function
    to query the state of a transaction handle.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd>is a handle to a transaction that is in state
	<a class="link" href="#ib_trx_not_started"><code class="literal">IB_TRX_NOT_STARTED</code></a></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div><pre class="screen">        ib_trx_t    ib_trx;
        ib_err_t    ib_err;

        ib_trx = ib_trx_begin(IB_TRX_REPEATABLE_READ);
        ... Do some DML operations ...
        /* If the transaction is rolled back by InnoDB then the
        transaction handle ib_trx is still valid and has to be
        destroyed using ib_trx_release() explicitly. */
        if (ib_err == DB_DEADLOCK || ib_err == DB_LOCK_WAIT_TIMEOUT) {
                ib_err = ib_trx_release(ib_trx);
                /* Check return value. */
        } else {
                /* Assuming everything went OK. */
                ib_trx_commit(ib_trx);
        }
    </pre></div></div><div class="section" title="6.7.3.6. ib_trx_rollback"><div class="titlepage"><div><div><h4 class="title"><a id="ib_trx_rollback"></a>6.7.3.6.&nbsp;ib_trx_rollback</h4></div></div></div><a id="id287633764" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_trx_rollback(ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287633776"></a><p>
<a class="link" href="#glos_rollback" title="rollback">Roll back</a> a transaction.
This function also release any locks acquired by cursors attached to the transaction,
and frees (releases) the transaction handle.
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is a handle to a transaction that is in state <code class="literal">IB_TRX_ACTIVE</code>.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.3.7. ib_savepoint_take"><div class="titlepage"><div><div><h4 class="title"><a id="ib_savepoint_take"></a>6.7.3.7.&nbsp;ib_savepoint_take</h4></div></div></div><a id="id287633825" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_savepoint_take(ib_trx_t ib_trx, const void* name,
                               ib_ulint_t name_len);
   </pre></div><div class="refsect1"><a id="id287633838"></a><p>
	 Creates a named savepoint.
	 If the transaction is not yet started, starts it.
	 If there is already a savepoint of the same name,
	 this call erases that old savepoint and replaces it with a new one.
	 Savepoints are deleted in a transaction commit or rollback.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is a handle to a transaction that is in state <code class="literal">IB_TRX_ACTIVE</code>.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>Pointer to an arbitrary string, that identifies the savepoint. InnoDB does not attach any significance to this string. The NUL byte is not significant.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: name_len</code>
	</span></dt><dd><p>Length of the name in bytes.</p></dd></dl></div></dd></dl></div></div></div><div class="section" title="6.7.3.8. ib_savepoint_release"><div class="titlepage"><div><div><h4 class="title"><a id="ib_savepoint_release"></a>6.7.3.8.&nbsp;ib_savepoint_release</h4></div></div></div><a id="id287633894" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_savepoint_release(
             ib_trx_t        ib_trx,
             const void*     name,
             ib_ulint_t      name_len);
   </pre></div><div class="refsect1"><a id="id287633906"></a><p> Releases only the named savepoint. Any savepoints that were set after this savepoint are left as-is.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd>is a handle to a transaction that is in state
	<a class="link" href="#ib_trx_not_started"><code class="literal">IB_TRX_NOT_STARTED</code></a></dd><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>Savepoint name that was used in <code class="literal">ib_savepoint_take()</code></p></dd><dt><span class="term">
	 <code class="computeroutput">in: name_len</code>
	</span></dt><dd><p>length of name in bytes</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.3.9. ib_savepoint_rollback"><div class="titlepage"><div><div><h4 class="title"><a id="ib_savepoint_rollback"></a>6.7.3.9.&nbsp;ib_savepoint_rollback</h4></div></div></div><a id="id287633975" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_savepoint_rollback(
             ib_trx_t        ib_trx,
             const char*     name,
             ib_ulint_t      name_len);
   </pre></div><div class="refsect1"><a id="id287633987"></a><p>
	 <a class="link" href="#glos_rollback" title="rollback">Rolls back</a> a transaction back to a named <a class="link" href="#glos_savepoint" title="savepoint">savepoint</a>.
	 Modifications after the savepoint are undone, but InnoDB <span class="bold"><strong>does not</strong></span> release the corresponding locks that are stored in memory.
	 If a lock is implicit,
	 that is, a new inserted row holds a lock where the lock information is carried
	 by the transaction ID stored in the row,
	 these locks are naturally released in the rollback.
	 Any savepoints that were set after this savepoint are deleted.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd>is a handle to a transaction that is in state
	<a class="link" href="#ib_trx_not_started"><code class="literal">IB_TRX_NOT_STARTED</code></a></dd><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>The name of the savepoint used in <code class="literal">ib_savepoint_take()</code>;
				can be <code class="literal">NULL</code></p></dd><dt><span class="term">
	 <code class="computeroutput">in: name_len</code>
	</span></dt><dd><p>Length of the savepoint name.
				If name is <code class="literal">NULL</code>, this parameter is ignored.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div></div><div class="section" title="6.7.4. API Functions - Configuration"><div class="titlepage"><div><div><h3 class="title"><a id="configuration-functions"></a>6.7.4.&nbsp;API Functions - Configuration</h3></div></div></div><p>
These APIs deal with the configuration variables listed in <a class="xref" href="#config-vars" title="Chapter 8. Embedded InnoDB Configuration Variables">Chapter&nbsp;8, <i>Embedded InnoDB Configuration Variables</i></a>.
For usage information, see <a class="xref" href="#start.config" title="2.5. Configuration">Section&nbsp;2.5, “Configuration”</a>.
To see these APIs in action, look in the sample programs listed in <a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a>.
</p><div class="section" title="6.7.4.1. ib_cfg_var_get_type"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cfg_var_get_type"></a>6.7.4.1.&nbsp;ib_cfg_var_get_type</h4></div></div></div><a id="id287634096" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cfg_var_get_type(const char* name, <a class="link" href="#types-config" title="6.2.2. Configuration Variable Types">ib_cfg_var_type_t*</a> type);
   </pre></div><div class="refsect1"><a id="id287634112"></a><p> Get the type of an InnoDB configuration variable.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>name of a configuration variable</p></dd><dt><span class="term">
	 <code class="computeroutput">out: type</code>
	</span></dt><dd><p>The type of the variable.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.4.2. ib_cfg_set_int"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cfg_set_int"></a>6.7.4.2.&nbsp;ib_cfg_set_int</h4></div></div></div><a id="id287634163" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cfg_set_int(const char* name, ib_ulint_t value);
   </pre></div><div class="refsect1"><a id="id287634174"></a><p> Set an integer configuration variable value.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>name of configuration variable.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: value</code>
	</span></dt><dd><p>the value to set</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.4.3. ib_cfg_set_text"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cfg_set_text"></a>6.7.4.3.&nbsp;ib_cfg_set_text</h4></div></div></div><a id="id287634225" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cfg_set_text(const char* name, const char* value);
   </pre></div><div class="refsect1"><a id="id287634237"></a><p> Set a text configuration variable value.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>name of configuration variable.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: value</code>
	</span></dt><dd><p>the value to set</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.4.4. ib_cfg_set_bool_on"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cfg_set_bool_on"></a>6.7.4.4.&nbsp;ib_cfg_set_bool_on</h4></div></div></div><a id="id287634288" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cfg_set_bool_on(const char* name);
   </pre></div><div class="refsect1"><a id="id287634300"></a><p> Set a Boolean configuration variable to ON.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>name of configuration variable.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.4.5. ib_cfg_set_bool_off"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cfg_set_bool_off"></a>6.7.4.5.&nbsp;ib_cfg_set_bool_off</h4></div></div></div><a id="id287634340" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cfg_set_bool_off(const char* name);
   </pre></div><div class="refsect1"><a id="id287634352"></a><p> Unset a Boolean configuration variable. </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>name of configuration variable.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.4.6. ib_cfg_set_callback"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cfg_set_callback"></a>6.7.4.6.&nbsp;ib_cfg_set_callback</h4></div></div></div><a id="id287634392" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cfg_set_callback(const char* name, ib_cb_t func);
   </pre></div><div class="refsect1"><a id="id287634404"></a><p> Set a generic callback function.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>name of configuration variable.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: func</code>
	</span></dt><dd><p>pointer to the callback function</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.4.7. ib_cfg_get"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cfg_get"></a>6.7.4.7.&nbsp;ib_cfg_get</h4></div></div></div><a id="id287634455" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cfg_get(const char* name, void* value);
   </pre></div><div class="refsect1"><a id="id287634467"></a><p>
	 Retrieve the value of a configuration variable.
	 Returns a generic pointer to the value, which must be typecast according to the type of the variable,
	 using the types listed in <a class="xref" href="#types-config" title="6.2.2. Configuration Variable Types">Section&nbsp;6.2.2, “Configuration Variable Types”</a>.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>configuration variable name</p></dd><dt><span class="term">
	 <code class="computeroutput">in: value</code>
	</span></dt><dd><p>
				Pointer to a variable that matches the type of the configuration parameter.
				The InnoDB engine has no way of telling whether your program has set the correct type.
				Use <a class="link" href="#ib_cfg_var_get_type" title="6.7.4.1. ib_cfg_var_get_type">ib_cfg_var_get_type</a>
				to determine the type of the configuration variable.
				</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.4.8. ib_cfg_get_all"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cfg_get_all"></a>6.7.4.8.&nbsp;ib_cfg_get_all</h4></div></div></div><a id="id287634560" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">      <span class="type">ib_err_t</span> ib_cfg_get_all(const char*** names, ib_u32_t* names_num);
    </pre></div><div class="refsect1"><a id="id287634571"></a><p>
      Get a list of the names of all configuration variables.
      The caller is responsible for free(3)ing the returned array of strings
      when it is not needed anymore and for not modifying the individual strings.
      The type of each individual variable can be retrieved with
      <a class="link" href="#ib_cfg_var_get_type" title="6.7.4.1. ib_cfg_var_get_type">ib_cfg_var_get_type()</a> and its
      value with <a class="link" href="#ib_cfg_get" title="6.7.4.7. ib_cfg_get">ib_cfg_get()</a>
    </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
		<code class="computeroutput">out: names</code>
	      </span></dt><dd><p>pointer to array of strings</p></dd><dt><span class="term">
		<code class="computeroutput">out: names_num</code>
	      </span></dt><dd><p>number of strings returned</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div></div><div class="section" title="6.7.5. API Functions - DDL"><div class="titlepage"><div><div><h3 class="title"><a id="ddl-functions"></a>6.7.5.&nbsp;API Functions - DDL</h3></div></div></div><p>
These APIs deal with the create and drop operations, which are
categorized as Data Definition Language, known as <a class="link" href="#glos_ddl" title="DDL">DDL</a>.
For usage information, see <a class="xref" href="#ddl" title="Chapter 3. Performing CREATE and DROP Operations (DDL) with Embedded InnoDB">Chapter&nbsp;3, <i>Performing CREATE and DROP Operations (DDL) with Embedded InnoDB</i></a>.
To see these APIs in action, look in the sample programs listed in <a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a>.
</p><div class="section" title="6.7.5.1. ib_table_schema_create"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_schema_create"></a>6.7.5.1.&nbsp;ib_table_schema_create</h4></div></div></div><a id="id287634684" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_schema_create(
             const char*     name,
             ib_table_sch_t* ib_tbl_sch,
             <a class="link" href="#types-table-format" title="6.2.3. Table Format types">ib_tbl_fmt_t</a>    ib_tbl_fmt,
             ib_ulint_t      page_size);
   </pre></div><div class="refsect1"><a id="id287634701"></a><p>Create a table schema handle, which is used for creating InnoDB tables.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>The table name for which to create the schema.
				Currently, Embedded InnoDB requires the name of the database to be encoded in the name,
				for example: <code class="literal">test_db/table</code>.
				</p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_tbl_sch_t</code>
	</span></dt><dd><p>The handle for the schema.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_tbl_fmt</code>
	</span></dt><dd><p>The table format</p></dd><dt><span class="term">
	 <code class="computeroutput">in: page_size</code>
	</span></dt><dd><p>
	For <a class="link" href="#glos_compressed_row_format" title="compressed row format">compressed tables</a>,
	the page size can be one of 0, 1, 2, 4, 8 or 16.
	Specifying a size of 0 for compressed tables selects the system default page size.
	For regular tables, this value is ignored.
	</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.2. ib_table_schema_delete"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_schema_delete"></a>6.7.5.2.&nbsp;ib_table_schema_delete</h4></div></div></div><a id="id287634852" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_schema_delete(ib_tbl_sch_t ib_tbl_sch);
   </pre></div><div class="refsect1"><a id="id287634864"></a><p>
	 Deletes the table schema handle, once you have created the table.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tbl_sch</code>
	</span></dt><dd><p>is a handle to a table schema</p></dd></dl></div></dd></dl></div></div></div><div class="section" title="6.7.5.3. ib_table_schema_add_col"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_schema_add_col"></a>6.7.5.3.&nbsp;ib_table_schema_add_col</h4></div></div></div><a id="id287634892" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_schema_add_col(
	      ib_tbl_sch_t    ib_tbl_sch,
	      const char*     name,
	      <a class="link" href="#types-column" title="6.2.4. Column Types">ib_col_type_t</a>   ib_col_type,
	      <a class="link" href="#types-col-attr" title="6.2.5. Column Attributes">ib_col_attr_t</a>   ib_col_attr,
	      ib_u16_t        client_type,
	      ib_ulint_t      len);
   </pre></div><div class="refsect1"><a id="id287634914"></a><p> Add a column to a table schema.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tbl_sch</code>
	</span></dt><dd><p>the table schema handle</p></dd><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>is the name of the column.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_col_type</code>
	</span></dt><dd><p>is the type of the column</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_col_attr</code>
	</span></dt><dd><p>is the column attribute</p></dd><dt><span class="term">
	 <code class="computeroutput">in: client_type</code>
	</span></dt><dd><p>currently ignored, can be 0.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: len</code>
	</span></dt><dd><p>is the length of the column.
				For BLOB types, the value should be 0.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.4. ib_table_schema_add_index"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_schema_add_index"></a>6.7.5.4.&nbsp;ib_table_schema_add_index</h4></div></div></div><a id="id287635008" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_schema_add_index(
             ib_tbl_sch_t    ib_tbl_sch,
             const char*     name,
             ib_idx_sch_t*   ib_idx_sch);
   </pre></div><div class="refsect1"><a id="id287635019"></a><p> Add an index to the table schema.
	 Use this to create the clustered index, and optionally one or more secondary indexes, when creating a table.
	 The index schema is owned by the table schema instance,
	 and is freed when the table schema instance is freed.
	 </p><p>
	 Strictly speaking, you do not need to create a clustered index (primary key) yourself,
	 because the InnoDB engine constructs one if necessary using the row ID.
	 However, for tables of any size or importance, you should typically
	 define the primary key to optimize the most critical queries on the table.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tbl_sch</code>
	</span></dt><dd><p>is a handle to a table schema</p></dd><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>is the name of the index.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_idx_sch</code>
	</span></dt><dd><p>is the index schema handle</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.5. ib_index_schema_create"><div class="titlepage"><div><div><h4 class="title"><a id="ib_index_schema_create"></a>6.7.5.5.&nbsp;ib_index_schema_create</h4></div></div></div><a id="id287635083" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_index_schema_create(
             ib_trx_t        ib_usr_trx,
             const char*     name,
             const char*     table_name,
             ib_idx_sch_t*   ib_idx_sch);
   </pre></div><div class="refsect1"><a id="id287635095"></a><p>Create an index schema handle.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_usr_trx</code>
	</span></dt><dd><p>is a handle to an active transaction.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>is the name of the index to create</p></dd><dt><span class="term">
	 <code class="computeroutput">in: table_name</code>
	</span></dt><dd><p>is the name of the parent table</p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_idx_sch</code>
	</span></dt><dd><p>is the index schema handle</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.6. ib_index_schema_set_clustered"><div class="titlepage"><div><div><h4 class="title"><a id="ib_index_schema_set_clustered"></a>6.7.5.6.&nbsp;ib_index_schema_set_clustered</h4></div></div></div><a id="id287635168" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_index_schema_set_clustered(ib_idx_sch_t ib_idx_sch);
   </pre></div><div class="refsect1"><a id="id287635179"></a><p> Set the index type to clustered.  The default is secondary.  The index is also tagged as a unique index.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_idx_sch</code>
	</span></dt><dd><p>is a handle to an index schema</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.7. ib_index_schema_set_unique"><div class="titlepage"><div><div><h4 class="title"><a id="ib_index_schema_set_unique"></a>6.7.5.7.&nbsp;ib_index_schema_set_unique</h4></div></div></div><a id="id287635220" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_index_set_unique(ib_idx_sch_t ib_idx_sch);
   </pre></div><div class="refsect1"><a id="id287635232"></a><p>
Tag the index as a unique index.
Must be done before the index is created.
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_idx_sch</code>
	</span></dt><dd><p>is the index schema handle</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.8. ib_index_schema_delete"><div class="titlepage"><div><div><h4 class="title"><a id="ib_index_schema_delete"></a>6.7.5.8.&nbsp;ib_index_schema_delete</h4></div></div></div><a id="id287635272" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_index_schema_delete(
             ib_idx_sch_t    ib_idx_sch);
   </pre></div><div class="refsect1"><a id="id287635284"></a><p>
	 Deletes an index schema handle created with <code class="literal">ib_index_schema_create</code>,
	 after you have created the index.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_idx_sch</code>
	</span></dt><dd><p>is the index schema handle to delete</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.9. ib_index_schema_add_col"><div class="titlepage"><div><div><h4 class="title"><a id="ib_index_schema_add_col"></a>6.7.5.9.&nbsp;ib_index_schema_add_col</h4></div></div></div><a id="id287635363" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_index_schema_add_col(
             ib_idx_sch_t    ib_idx_sch,
             const char*     name,
             ib_ulint_t      prefix_len);
   </pre></div><div class="refsect1"><a id="id287635374"></a><p>Specify a column name that is going to be part of the index key.</p><p>The prefix length only applies for <code class="literal">BLOB</code> or long <code class="literal">VARCHAR</code> values. It represents the number of bytes to examine to determine if two values are equal or how they should be ordered. For typical columns, leave this value as zero.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_idx_sch</code>
	</span></dt><dd><p>is a handle to an index schema</p></dd><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>is the name of the column to include in the index key.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: prefix_len</code>
	</span></dt><dd><p>is the length of the prefix if it is a prefix key, otherwise 0.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.10. ib_table_create"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_create"></a>6.7.5.10.&nbsp;ib_table_create</h4></div></div></div><a id="id287635447" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_create(ib_trx_t ib_trx, ib_tbl_sch_t ib_tbl_sch, ib_id_t* id);
   </pre></div><div class="refsect1"><a id="id287635459"></a><p>
Create a table  using the schema definition.
The metadata for the table is stored in the InnoDB <a class="link" href="#glos_data_dictionary" title="data dictionary">data dictionary</a>.
The table itself can be stored in the <a class="link" href="#glos_system_tablespace" title="system tablespace">system tablespace</a>,
or in a separate tablespace file if the <a class="link" href="#glos_file_per_table" title="file-per-table">file-per-table</a>
option is enabled.
</p><p>
If the table exists in the database,
this function returns <code class="literal">DB_TABLE_IS_BEING_USED</code>
and <code class="literal">id</code> contains that ID of the table.
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx_t</code>
	</span></dt><dd><p>is the transaction that is used to cover the table creation.
				The transaction must be holding the schema lock in exclusive mode;
				see <a class="link" href="#ib_schema_lock_exclusive" title="6.7.6.5. ib_schema_lock_exclusive">ib_schema_lock_exclusive()</a>.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_tbl_sch</code>
	</span></dt><dd><p>is a handle to a table schema</p></dd><dt><span class="term">
	 <code class="computeroutput">out: id</code>
	</span></dt><dd><p>is the table id</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.11. ib_index_create"><div class="titlepage"><div><div><h4 class="title"><a id="ib_index_create"></a>6.7.5.11.&nbsp;ib_index_create</h4></div></div></div><a id="id287635548" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_index_create(ib_idx_sch_t ib_idx_sch, ib_id_t id);
   </pre></div><div class="refsect1"><a id="id287635595"></a><p>Create a secondary index using a user-defined index schema.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_idx_sch</code>
	</span></dt><dd><p>is a handle to an index schema</p></dd><dt><span class="term">
	 <code class="computeroutput">out: id</code>
	</span></dt><dd><p>is the index ID; the index ID has the parent table ID encoded in the high 32 bits.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.12. ib_table_drop"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_drop"></a>6.7.5.12.&nbsp;ib_table_drop</h4></div></div></div><a id="id287635645" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_drop(ib_trx_t trx, const char* name);
   </pre></div><div class="refsect1"><a id="id287635657"></a><p>
	 Drop a table by table name.
	 If the table is in a separate tablespace file because of the file-per-table setting,
	 the tablespace file is deleted. Your must acquire an exclusive lock over the schema before attempting this operation.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: trx</code>
	</span></dt><dd><p>
				is the covering transaction.
				</p></dd><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>
				is the name of the table to drop, qualified with the database name, for example:
				<code class="literal">test_db/table</code>.
				</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.13. ib_index_drop"><div class="titlepage"><div><div><h4 class="title"><a id="ib_index_drop"></a>6.7.5.13.&nbsp;ib_index_drop</h4></div></div></div><a id="id287635713" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_index_drop(ib_trx_ti ib_trx, ib_id_t index_id);
   </pre></div><div class="refsect1"><a id="id287635724"></a><p>Drop a secondary index by ID. You must acquire an exclusive lock over the schema before attempting this operation.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>
				is the covering transaction.
				</p></dd><dt><span class="term">
	 <code class="computeroutput">in: index_id</code>
	</span></dt><dd><p>is the ID of the index to drop</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.14. ib_table_lock"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_lock"></a>6.7.5.14.&nbsp;ib_table_lock</h4></div></div></div><a id="id287635777" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_lock(
             ib_trx_t        ib_trx,
             ib_id_t         table_id,
             <a class="link" href="#modes-lock" title="6.3.2. Lock Modes">ib_lck_mode_t</a>   ib_lck_mode);
   </pre></div><div class="refsect1"><a id="id287635793"></a><p>
	 Lock a table in <a class="link" href="#ib_lock_ix">IB_LOCK_IX</a> (exclusive)
	 or <a class="link" href="#ib_lock_is">IB_LOCK_IS</a> (shared) mode.
	 Use a shared lock if your transaction performs only read operations on the table.
	 Use an exclusive lock if your transaction performs read and write operations on the table.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is an active transaction</p></dd><dt><span class="term">
	 <code class="computeroutput">in: table_id</code>
	</span></dt><dd><p>is id of the table to lock.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_lck_mode</code>
	</span></dt><dd><p>is the lock mode</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.15. ib_table_rename"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_rename"></a>6.7.5.15.&nbsp;ib_table_rename</h4></div></div></div><a id="id287635863" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_rename(
             ib_trx_t        ib_trx,
             const char*     old_name,
             const char*     new_name);
   </pre></div><div class="refsect1"><a id="id287635876"></a><p>
	 Rename a table.
	 </p><p>
	 You specify fully qualified names (of the format <code class="literal">database/table</code>)
	 for both the old and the new name.
	 The Embedded InnoDB API does not have the idea of <span class="quote">“<span class="quote">connecting</span>”</span>
	 to a database and using that as the default for all operations.
	 The Embedded InnoDB API also does not use the <span class="quote">“<span class="quote">backtick</span>”</span>
	 notation for specifying table names that match reserved words or
	 contain special punctuation characters.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is an active transaction</p></dd><dt><span class="term">
	 <code class="computeroutput">in: old_name</code>
	</span></dt><dd><p>is the fully qualified name of a table, for example: 
				<code class="literal">test_db/table</code>.
				</p></dd><dt><span class="term">
	 <code class="computeroutput">in: new_name</code>
	</span></dt><dd><p>is the fully qualified name of a table, for example:
				<code class="literal">test_db/table</code>.
				</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.5.16. ib_database_create"><div class="titlepage"><div><div><h4 class="title"><a id="ib_database_create"></a>6.7.5.16.&nbsp;ib_database_create</h4></div></div></div><a id="id287636029" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_bool_t</span> ib_database_create(const char* dbname);
   </pre></div><div class="refsect1"><a id="id287636041"></a><p>
	 Create a database and its associated directory, if it does not exist.
	 The database is created relative to the <code class="literal">data_home_dir</code> configuration setting.
	 If the <code class="literal">file_per_table</code> configuration variable is not set,
	 this function is a no-op (because no directory is needed) but still returns <code class="literal">IB_TRUE</code>.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: dbname</code>
	</span></dt><dd><p>is the database name; it should not contain any <span class="quote">“<span class="quote"><code class="literal">/</code></span>”</span> or <span class="quote">“<span class="quote"><code class="literal">\</code></span>”</span> characters, or any character that is not allowed in a filename or path name.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">IB_TRUE</a> on success and IB_FALSE on any failure.</p></dd></dl></div></div></div><div class="section" title="6.7.5.17. ib_database_drop"><div class="titlepage"><div><div><h4 class="title"><a id="ib_database_drop"></a>6.7.5.17.&nbsp;ib_database_drop</h4></div></div></div><a id="id287636107" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_database_drop(const char* dbname);
   </pre></div><div class="refsect1"><a id="id287636119"></a><p>
	 Drop a database, all the tables it contains, and its associated directory.
	 Use with care!
	 If the directory is not empty after the tables are dropped (that is, if
	 you store other files in the directory), it is not removed.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: dbname</code>
	</span></dt><dd><p>is database name to be dropped</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div></div><div class="section" title="6.7.6. API Functions - DDL and DML Support"><div class="titlepage"><div><div><h3 class="title"><a id="misc-functions"></a>6.7.6.&nbsp;API Functions - DDL and DML Support</h3></div></div></div><p>
To see these APIs in action, look in the sample programs listed in <a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a>.
</p><div class="section" title="6.7.6.1. ib_status_get_i64"><div class="titlepage"><div><div><h4 class="title"><a id="id287636200"></a>6.7.6.1.&nbsp;ib_status_get_i64</h4></div></div></div><a id="id287636203" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_status_get_i64(const char* name, ib_i64_t* dst);
   </pre></div><div class="refsect1"><a id="id287636215"></a><p>Get the value of an INT status variable. Use this function to access variables that represent the internal state of InnoDB.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>is a name of an internal status variable of type integer.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: dst</code>
	</span></dt><dd><p>points to the integer where the value is copied.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a>; DB_DATA_MISMATCH if found but type is not INT; or DB_NOT_FOUND if no match is found.</p></dd></dl></div></div></div><div class="section" title="6.7.6.2. ib_set_client_compare"><div class="titlepage"><div><div><h4 class="title"><a id="ib_set_client_compare"></a>6.7.6.2.&nbsp;ib_set_client_compare</h4></div></div></div><a id="id287636267" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">void</span> ib_set_client_compare(ib_client_cmp_t client_cmp_func);
   </pre></div><div class="refsect1"><a id="id287636279"></a><p>
	 Set the callback function for comparing the column keys.
	 This function can only be used to override comparison of BLOBs and user-defined column types (currently not implemented).
	 For details of parameters and types for the callback function,
	 see <code class="literal">ib_client_cmp_t</code> in <code class="literal">innodb.h</code>.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: client_cmp_func</code>
	</span></dt><dd><p>is a client column compare function</p></dd></dl></div></dd></dl></div></div></div><div class="section" title="6.7.6.3. ib_schema_tables_iterate"><div class="titlepage"><div><div><h4 class="title"><a id="ib_schema_tables_iterate"></a>6.7.6.3.&nbsp;ib_schema_tables_iterate</h4></div></div></div><a id="id287636317" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_schema_tables_iterate(
             ib_trx_t        ib_trx,
             ib_schema_visitor_table_all_t visitor,
             void*           arg);
   </pre></div><div class="refsect1"><a id="id287636329"></a><p>
	 This function iterates over all the tables in the InnoDB data dictionary, including the system tables.
	 It aborts if the <code class="literal">visitor</code> function returns a non-zero value.
	 It calls the function:</p><pre class="screen">visitor.tables(arg, const char* tablename, int tablename_len)</pre><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is an active transaction</p></dd><dt><span class="term">
	 <code class="computeroutput">in: visitor</code>
	</span></dt><dd><p>is the callback function.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: arg</code>
	</span></dt><dd><p>is the argument for the callback function</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.6.4. ib_table_schema_visit"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_schema_visit"></a>6.7.6.4.&nbsp;ib_table_schema_visit</h4></div></div></div><a id="id287636400" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">   <span class="type">ib_err_t</span> ib_table_schema_visit(
             ib_trx_t        ib_trx,
             const char*     name,
             const ib_schema_visitor_t*  visitor,
             void*           arg);
   </pre></div><div class="refsect1"><a id="id287636411"></a><p> Read the schema (column and index definitions) for a table, using the visitor pattern.
	 It makes the following sequence of calls:
	 </p><pre class="screen">             visitor-&gt;table()
             visitor-&gt;table_col() for each user column
             visitor-&gt;index() for each user index
             visitor-&gt;index_col() for each column in user index
   </pre><p>
   It stops if any of the above functions returns a non-zero value.
   The caller must have an exclusive lock on the InnoDB data dictionary.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is an active transaction instance </p></dd><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>is the name of the table.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: visitor</code>
	</span></dt><dd><p>is the callback function</p></dd><dt><span class="term">
	 <code class="computeroutput">out: arg</code>
	</span></dt><dd><p>is the argument for the callback function</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.6.5. ib_schema_lock_exclusive"><div class="titlepage"><div><div><h4 class="title"><a id="ib_schema_lock_exclusive"></a>6.7.6.5.&nbsp;ib_schema_lock_exclusive</h4></div></div></div><a id="id287636489" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_schema_lock_exclusive(ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287636501"></a><p>
	 Locks the InnoDB <a class="link" href="#glos_data_dictionary" title="data dictionary">data dictionary</a> in exclusive mode.
	 Call this function before making changes to the data dictionary such as
	 creating or dropping tables or indexes.
	 (For InnoDB experts: this operation acquires the dictionary mutex.)
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is an active transaction handle </p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.6.6. ib_schema_lock_shared"><div class="titlepage"><div><div><h4 class="title"><a id="ib_schema_lock_shared"></a>6.7.6.6.&nbsp;ib_schema_lock_shared</h4></div></div></div><a id="id287636546" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_schema_lock_shared(ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287636557"></a><p>
	 Locks the InnoDB data dictionary in shared mode.
	 Use while performing read-only operations on the data dictionary, such
	 as traversing the list of tables.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is an active transaction handle </p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.6.7. ib_schema_lock_is_exclusive"><div class="titlepage"><div><div><h4 class="title"><a id="ib_schema_lock_is_exclusive"></a>6.7.6.7.&nbsp;ib_schema_lock_is_exclusive</h4></div></div></div><a id="id287636598" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_bool_t</span> ib_schema_lock_is_exclusive(const ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287636610"></a><p>Checks whether the transaction holds an exclusive lock on the data dictionary.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is a transaction handle</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>IB_TRUE if the transaction holds an exclusive lock on the data dictionary.</p></dd></dl></div></div></div><div class="section" title="6.7.6.8. ib_schema_lock_is_shared"><div class="titlepage"><div><div><h4 class="title"><a id="ib_schema_lock_is_shared"></a>6.7.6.8.&nbsp;ib_schema_lock_is_shared</h4></div></div></div><a id="id287636646" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_bool_t</span> ib_schema_lock_is_shared(const ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287636693"></a><p>Checks whether the transaction holds a shared lock on the data dictionary.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is a transaction handle</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>IB_TRUE if the transaction holds a shared lock on the data dictionary.</p></dd></dl></div></div></div><div class="section" title="6.7.6.9. ib_schema_unlock"><div class="titlepage"><div><div><h4 class="title"><a id="ib_schema_unlock"></a>6.7.6.9.&nbsp;ib_schema_unlock</h4></div></div></div><a id="id287636729" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_schema_unlock(ib_trx_t ib_trx);
   </pre></div><div class="refsect1"><a id="id287636741"></a><p>Releases all locks on the data dictionary.</p><div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
	 Currently, when InnoDB rolls back a transaction,
	 it does not release the special data dictionary lock
	 acquired by the <code class="literal">ib_schema_lock_exclusive()</code> or
	 <code class="literal">ib_schema_lock_shared()</code> functions.
	 Your application must do this explicitly.
	 </p></div><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_trx</code>
	</span></dt><dd><p>is an active transaction handle that owns the data dictionary lock.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.6.10. ib_cursor_truncate"><div class="titlepage"><div><div><h4 class="title"><a id="ib_cursor_truncate"></a>6.7.6.10.&nbsp;ib_cursor_truncate</h4></div></div></div><a id="id287636794" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_cursor_truncate(ib_crsr_t* ib_crsr, ib_id_t* id);
   </pre></div><div class="refsect1"><a id="id287636806"></a><p>Truncate a table.
	 Works by creating a new table space and dropping the old one.
	 This operation is faster than stepping through all the records of the table and deleting each one.
	 Any indexes on the table are recreated, and are initially empty.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">out: ib_crsr</code>
	</span></dt><dd><p>is a pointer to an open table cursor, on success it will be set to NULL</p></dd><dt><span class="term">
	 <code class="computeroutput">out: id</code>
	</span></dt><dd><p>is the new table id</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.6.11. ib_table_truncate"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_truncate"></a>6.7.6.11.&nbsp;ib_table_truncate</h4></div></div></div><a id="id287636891" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_truncate(const const* name, ib_id_t* table_id);
   </pre></div><div class="refsect1"><a id="id287636903"></a><p>
	 Truncate a table.
	 Works by creating a new table space and dropping the old one.
	 This operation is faster than stepping through all the records of the table and deleting each one.
	 Any indexes on the table are recreated, and are initially empty.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: name</code>
	</span></dt><dd><p>is a fully qualified table name, for example:
				<code class="literal">test_db/table</code>.
				</p></dd><dt><span class="term">
	 <code class="computeroutput">out: table_id</code>
	</span></dt><dd><p>is the new table id</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.6.12. ib_table_get_id"><div class="titlepage"><div><div><h4 class="title"><a id="ib_table_get_id"></a>6.7.6.12.&nbsp;ib_table_get_id</h4></div></div></div><a id="id287636993" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_table_get_id(const char* table_name, ib_id_t* table_id);
   </pre></div><div class="refsect1"><a id="id287637004"></a><p>
Look up the ID of a table using the table name.
The table name is case-sensitive.
</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: table_name</code>
	</span></dt><dd><p>is a fully qualified table name.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: table_id</code>
	</span></dt><dd><p>is the table id if found.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.6.13. ib_index_get_id"><div class="titlepage"><div><div><h4 class="title"><a id="ib_index_get_id"></a>6.7.6.13.&nbsp;ib_index_get_id</h4></div></div></div><a id="id287637056" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_index_get_id(
             const char*     table_name,
             const char*     index_name,
             ib_id_t*        index_id);
   </pre></div><div class="refsect1"><a id="id287637067"></a><p>Look up the ID of an index.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: table_name</code>
	</span></dt><dd><p>is the name of the table that contains the index.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: index_name</code>
	</span></dt><dd><p>is the index to look for.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: index_id</code>
	</span></dt><dd><p>is the index id.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.6.14. ib_logger_set"><div class="titlepage"><div><div><h4 class="title"><a id="ib_logger_set"></a>6.7.6.14.&nbsp;ib_logger_set</h4></div></div></div><a id="id287637129" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">void</span> ib_logger_set(ib_msg_log_t ib_msg_log, ib_msg_stream_t ib_msg_stream);
   </pre></div><div class="refsect1"><a id="id287637141"></a><p>
	 Set the function that logs InnoDB informational and error messages.
	 Currently, this function must be a drop-in replacement for <code class="literal">fprintf()</code>.
	 (Issue <code class="literal">man 3 fprintf</code> to see the function prototype.)
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_msg_log</code>
	</span></dt><dd><p>is the message logging function</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_msg_stream</code>
	</span></dt><dd><p>is really a callback argument relevant only to the ib_msg_log function.</p></dd></dl></div></dd></dl></div></div></div><div class="section" title="6.7.6.15. ib_strerror"><div class="titlepage"><div><div><h4 class="title"><a id="ib_strerror"></a>6.7.6.15.&nbsp;ib_strerror</h4></div></div></div><a id="id287637190" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">const char*</span> ib_strerror(ib_err_t db_errno);
   </pre></div><div class="refsect1"><a id="id287637202"></a><p>Convert an error number to a human-readable text message.
	 The returned string is static, and should not be freed or modified.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: db_errno</code>
	</span></dt><dd><p>is the InnoDB error code, one of the values from <a class="xref" href="#error-codes" title="6.6. Error and Status Codes">Section&nbsp;6.6, “Error and Status Codes”</a>.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>String representation of the error code</p></dd></dl></div></div></div></div><div class="section" title="6.7.7. API Functions - Tuples"><div class="titlepage"><div><div><h3 class="title"><a id="tuple-functions"></a>6.7.7.&nbsp;API Functions - Tuples</h3></div></div></div><p>
These functions work with <a class="link" href="#glos_tuple" title="tuple">tuples</a>.
To understand how tuples relate to queries and other operations using a
<code class="literal">WHERE</code> clause, see <a class="xref" href="#queries" title="1.4. Overview of Queries and WHERE Clauses">Section&nbsp;1.4, “Overview of Queries and WHERE Clauses”</a>.
For usage information, see <a class="xref" href="#dml.where" title="4.3.5. Emulating a WHERE Clause">Section&nbsp;4.3.5, “Emulating a WHERE Clause”</a>.
To see these APIs in action, look in the sample programs listed in <a class="xref" href="#examples" title="Appendix B. Code Examples Supplied with Embedded InnoDB">Appendix&nbsp;B, <i>Code Examples Supplied with Embedded InnoDB</i></a>.
</p><div class="section" title="6.7.7.1. ib_sec_read_tuple_create"><div class="titlepage"><div><div><h4 class="title"><a id="ib_sec_read_tuple_create"></a>6.7.7.1.&nbsp;ib_sec_read_tuple_create</h4></div></div></div><a id="id287637336" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_tpl_t</span> ib_sec_read_tuple_create(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287637348"></a><p>Create a tuple for reading a row from the secondary index.
	 This tuple contains the columns from the secondary index key, and the primary key columns for the table.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is a cursor opened on a secondary index.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>
			A tuple instance that can be used to read secondary index key columns.
			The columns include the cluster key columns also.
			</p></dd></dl></div></div></div><div class="section" title="6.7.7.2. ib_sec_search_tuple_create"><div class="titlepage"><div><div><h4 class="title"><a id="ib_sec_search_tuple_create"></a>6.7.7.2.&nbsp;ib_sec_search_tuple_create</h4></div></div></div><a id="id287637385" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_tpl_t</span> ib_sec_search_tuple_create(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287637397"></a><p>Create a tuple for searching secondary indexes.
	 This tuple contains only the columns for the secondary index key.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is a cursor opened on a secondary index.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>A tuple instance that can be used to search the secondary index. It only contains columns that make up the secondary index key.</p></dd></dl></div></div></div><div class="section" title="6.7.7.3. ib_clust_read_tuple_create"><div class="titlepage"><div><div><h4 class="title"><a id="ib_clust_read_tuple_create"></a>6.7.7.3.&nbsp;ib_clust_read_tuple_create</h4></div></div></div><a id="id287637436" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_tpl_t</span> ib_clust_read_tuple_create(ib_tpl_t ib_tpl);
   </pre></div><div class="refsect1"><a id="id287637448"></a><p>Create a tuple for reading and writing a row in the clustered index.
	 This tuple contains all the columns for the table.
	 (It even includes the system-defined columns
	 that are normally invisible to user code.)
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is a cursor opened on a table</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>A tuple that can be used for reading and writing the columns in table.</p></dd></dl></div></div></div><div class="section" title="6.7.7.4. ib_clust_search_tuple_create"><div class="titlepage"><div><div><h4 class="title"><a id="ib_clust_search_tuple_create"></a>6.7.7.4.&nbsp;ib_clust_search_tuple_create</h4></div></div></div><a id="id287637484" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_tpl_t</span> ib_clust_search_tuple_create(ib_crsr_t ib_crsr);
   </pre></div><div class="refsect1"><a id="id287637496"></a><p>
	 Create a tuple for searching the clustered index.
	 The tuple contains only those columns that make up the primary key.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is a cursor opened on a table</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>A tuple that can be used for searching the primary key.</p></dd></dl></div></div></div><div class="section" title="6.7.7.5. ib_tuple_get_cluster_key"><div class="titlepage"><div><div><h4 class="title"><a id="ib_tuple_get_cluster_key"></a>6.7.7.5.&nbsp;ib_tuple_get_cluster_key</h4></div></div></div><a id="id287637534" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_tuple_get_cluster_key(
             ib_crsr_t       ib_crsr,
             ib_tpl_t*       ib_dst_tpl,
             const ib_tpl_t  ib_src_tpl);
   </pre></div><div class="refsect1"><a id="id287637546"></a><p>
	 Create a tuple containing the primary key columns, for use in searching the clustered index.
	 The primary key column values are extracted from the secondary index key tuple.
	 (If your query can be satisfied by examining the primary key columns, rather than performing
	 a further lookup, you can examine the secondary index key tuple directly.)
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_crsr</code>
	</span></dt><dd><p>is a secondary index cursor.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_dst_tpl</code>
	</span></dt><dd><p>is a tuple that can be used to search the clustered index.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_src_tpl</code>
	</span></dt><dd><p>is a secondary index read tuple.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.7.6. ib_tuple_delete"><div class="titlepage"><div><div><h4 class="title"><a id="ib_tuple_delete"></a>6.7.7.6.&nbsp;ib_tuple_delete</h4></div></div></div><a id="id287637608" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">void</span> ib_tuple_delete(ib_tpl_t ib_tpl);
   </pre></div><div class="refsect1"><a id="id287637620"></a><p>Delete a tuple handle, after you are finished using the tuple.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is the tuple handle to delete.</p></dd></dl></div></dd></dl></div></div></div><div class="section" title="6.7.7.7. ib_tuple_get_n_cols"><div class="titlepage"><div><div><h4 class="title"><a id="ib_tuple_get_n_cols"></a>6.7.7.7.&nbsp;ib_tuple_get_n_cols</h4></div></div></div><a id="id287637650" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_ulint_t</span> ib_tuple_get_n_cols(const ib_tpl_t ib_tpl);
   </pre></div><div class="refsect1"><a id="id287637661"></a><p>Determine the total number of columns in the tuple.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is the tuple instance to query.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>The total number of columns in the tuple, including system columns.</p></dd></dl></div></div></div><div class="section" title="6.7.7.8. ib_tuple_get_n_user_cols"><div class="titlepage"><div><div><h4 class="title"><a id="ib_tuple_get_n_user_cols"></a>6.7.7.8.&nbsp;ib_tuple_get_n_user_cols</h4></div></div></div><a id="id287637698" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_ulint_t</span> ib_tuple_get_n_user_cols(const ib_tpl_t ib_tpl);
   </pre></div><div class="refsect1"><a id="id287637710"></a><p>Determine the total number of user-defined columns in the tuple definition.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is the tuple instance to query.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>The number of user-defined columns only, not counting the system columns.</p></dd></dl></div></div></div><div class="section" title="6.7.7.9. ib_tuple_copy"><div class="titlepage"><div><div><h4 class="title"><a id="ib_tuple_copy"></a>6.7.7.9.&nbsp;ib_tuple_copy</h4></div></div></div><a id="id287637747" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_tuple_copy(ib_tpl_t ib_dst_tpl, const ib_tpl_t ib_src_tpl);
   </pre></div><div class="refsect1"><a id="id287637758"></a><p>Copy contents of one tuple to another.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_dst_tpl</code>
	</span></dt><dd><p>is the destination tuple.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: ib_src_tpl</code>
	</span></dt><dd><p>is the source tuple.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.7.10. ib_tuple_clear"><div class="titlepage"><div><div><h4 class="title"><a id="ib_tuple_clear"></a>6.7.7.10.&nbsp;ib_tuple_clear</h4></div></div></div><a id="id287637844" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_tpl_t</span> ib_tuple_clear(ib_tpl_t ib_tpl);
   </pre></div><div class="refsect1"><a id="id287637856"></a><p>
	 Resets the tuple so that it can be used to insert/update/search another row.
	 All columns are set to SQL <code class="literal">NULL</code> values.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is the tuple to clear, the tuple will be freed</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>an instance of a new tuple that is the same type as the tuple that was passed in</p></dd></dl></div></div></div><div class="section" title="6.7.7.11. ib_col_get_meta"><div class="titlepage"><div><div><h4 class="title"><a id="ib_col_get_meta"></a>6.7.7.11.&nbsp;ib_col_get_meta</h4></div></div></div><a id="id287637897" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_ulint_t</span> ib_col_get_meta(
             ib_tpl_t        ib_tpl,
             ib_ulint_t      col_no,
             <a class="link" href="#ib_col_meta_t" title="6.2.6. Column Metadata">ib_col_meta_t</a>   ib_col_meta);
   </pre></div><div class="refsect1"><a id="id287637913"></a><p>Get a column’s type, length and attributes from the tuple.</p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is an instance of a tuple.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: col_no</code>
	</span></dt><dd><p>is column ordinal value.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: ib_col_meta</code>
	</span></dt><dd><p>is where the column meta data will be copied.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>Length of the data in the column, can be IB_SQL_NULL</p></dd></dl></div></div></div><div class="section" title="6.7.7.12. ib_col_get_value"><div class="titlepage"><div><div><h4 class="title"><a id="ib_col_get_value"></a>6.7.7.12.&nbsp;ib_col_get_value</h4></div></div></div><a id="id287637972" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">const void*</span> ib_col_get_value(ib_tpl_t ib_tpl, ib_ulint_t col_no);
   </pre></div><div class="refsect1"><a id="id287637984"></a><p>
	 Get the value of a column within a tuple.
	 The <code class="literal">get_</code> functions are for known-length items such as integers,
	 while the <code class="literal">copy_</code> functions are for variable-length items such as strings.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is the tuple to read from.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: col_no</code>
	</span></dt><dd><p>is the ordinal value of the column.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>
			a pointer to the actual raw data;
			returns <code class="literal">NULL</code> if the column value is <code class="literal">IB_SQL_NULL</code>
			</p></dd></dl></div></div></div><div class="section" title="6.7.7.13. ib_col_copy_value"><div class="titlepage"><div><div><h4 class="title"><a id="ib_col_copy_value"></a>6.7.7.13.&nbsp;ib_col_copy_value</h4></div></div></div><a id="id287638049" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_ulint_t</span> ib_col_copy_value(
             ib_tpl_t        ib_tpl,
             ib_ulint_t      col_no,
             void*           dst,
             ib_ulint_t      max_len);
   </pre></div><div class="refsect1"><a id="id287638060"></a><p>
	 Copy the value from the tuple to a user buffer.
	 The <code class="literal">get_</code> functions are for known-length items such as integers,
	 while the <code class="literal">copy_</code> functions are for variable-length items such as strings.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is the tuple to copy from.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: col_no</code>
	</span></dt><dd><p>is the ordinal value of the column.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: dst</code>
	</span></dt><dd><p>is the buffer to copy to.</p></dd><dt><span class="term">
	 <code class="computeroutput">out: max_len</code>
	</span></dt><dd><p>is the maximum number of bytes that can be copied to <code class="literal">dst</code>.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>The number of bytes copied or <code class="literal">IB_SQL_NULL</code></p></dd></dl></div></div></div><div class="section" title="6.7.7.14. ib_col_get_len"><div class="titlepage"><div><div><h4 class="title"><a id="ib_col_get_len"></a>6.7.7.14.&nbsp;ib_col_get_len</h4></div></div></div><a id="id287638214" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_ulint_t</span> ib_col_get_len(ib_tpl_t ib_tpl, ib_ulint_t col_no);
   </pre></div><div class="refsect1"><a id="id287638261"></a><p>
	 Get the size of the data in bytes in a column of the tuple.
	 The <code class="literal">get_</code> functions are for known-length items such as integers,
	 while the <code class="literal">copy_</code> functions are for variable-length items such as strings.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is the tuple to read from.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: col_no</code>
	</span></dt><dd><p>is the column ordinal number.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p>The number of bytes or <code class="literal">IB_SQL_NULL</code></p></dd></dl></div></div></div><div class="section" title="6.7.7.15. ib_col_set_value"><div class="titlepage"><div><div><h4 class="title"><a id="ib_col_set_value"></a>6.7.7.15.&nbsp;ib_col_set_value</h4></div></div></div><a id="id287638320" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_col_set_value(
             ib_tpl_t        ib_tpl,
             ib_ulint_t      col_no,
             const void*     src,
             ib_ulint_t      len);
   </pre></div><div class="refsect1"><a id="id287638332"></a><p>
	 Set the value of a column in the tuple.
	 The number of bytes copied is the minimum of column length and length specified by the <code class="literal">len</code> parameter.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is the tuple to write to.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: col_no</code>
	</span></dt><dd><p>is the column ordinal value.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: src</code>
	</span></dt><dd><p>is the pointer to the source data.</p></dd><dt><span class="term">
	 <code class="computeroutput">in: len</code>
	</span></dt><dd><p>is the maximum number of bytes to copy from <code class="literal">src</code>.</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.7.16. Functions to read numeric columns"><div class="titlepage"><div><div><h4 class="title"><a id="ib_tuple_read_numeric"></a>6.7.7.16.&nbsp;Functions to read numeric columns</h4></div></div></div><a id="id287638483" class="indexterm"></a><a id="id287638487" class="indexterm"></a><a id="id287638491" class="indexterm"></a><a id="id287638496" class="indexterm"></a><a id="id287638500" class="indexterm"></a><a id="id287638504" class="indexterm"></a><a id="id287638508" class="indexterm"></a><a id="id287638513" class="indexterm"></a><a id="id287638517" class="indexterm"></a><a id="id287638521" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_tuple_read_i8(ib_tpl_t ib_tpl, int col_no, ib_i8_t* val);
    <span class="type">ib_err_t</span> ib_tuple_read_u8(ib_tpl_t ib_tpl, int col_no, ib_i8_t* val);
    <span class="type">ib_err_t</span> ib_tuple_read_i16(ib_tpl_t ib_tpl, int col_no, ib_i16_t* val);
    <span class="type">ib_err_t</span> ib_tuple_read_u16(ib_tpl_t ib_tpl, int col_no, ib_u16_t* val);
    <span class="type">ib_err_t</span> ib_tuple_read_i32(ib_tpl_t ib_tpl, int col_no, ib_i32_t* val);
    <span class="type">ib_err_t</span> ib_tuple_read_u32(ib_tpl_t ib_tpl, int col_no, ib_i32_t* val);
    <span class="type">ib_err_t</span> ib_tuple_read_i64(ib_tpl_t ib_tpl, int col_no, ib_i64_t* val);
    <span class="type">ib_err_t</span> ib_tuple_read_u64(ib_tpl_t ib_tpl, int col_no, ib_u64_t* val);
    <span class="type">ib_err_t</span> ib_tuple_read_float(ib_tpl_t ib_tpl, int col_no, float* val);
    <span class="type">ib_err_t</span> ib_tuple_read_double(ib_tpl_t ib_tpl, int col_no, double* val);
   </pre></div><div class="refsect1"><a id="id287638563"></a><p>
	 These getter functions provide a typed interface for reading values from numerical columns.
	 </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is valid InnoDB tuple instance</p></dd><dt><span class="term">
	 <code class="computeroutput">in: col_no</code>
	</span></dt><dd><p>is the ordinal value of the column</p></dd><dt><span class="term">
	 <code class="computeroutput">out: val</code>
	</span></dt><dd><p>is where the value read will be written</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div><div class="section" title="6.7.7.17. Functions to write numeric columns"><div class="titlepage"><div><div><h4 class="title"><a id="ib_tuple_write_numeric"></a>6.7.7.17.&nbsp;Functions to write numeric columns</h4></div></div></div><a id="id287638626" class="indexterm"></a><a id="id287638630" class="indexterm"></a><a id="id287638634" class="indexterm"></a><a id="id287638638" class="indexterm"></a><a id="id287638643" class="indexterm"></a><a id="id287638647" class="indexterm"></a><a id="id287638651" class="indexterm"></a><a id="id287638656" class="indexterm"></a><a id="id287638660" class="indexterm"></a><a id="id287638665" class="indexterm"></a><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><pre class="synopsis">    <span class="type">ib_err_t</span> ib_tuple_write_i8(ib_tpl_t ib_tpl, int col_no, ib_i8_t val);
    <span class="type">ib_err_t</span> ib_tuple_write_u8(ib_tpl_t ib_tpl, int col_no, ib_i8_t val);
    <span class="type">ib_err_t</span> ib_tuple_write_i16(ib_tpl_t ib_tpl, int col_no, ib_i16_t val);
    <span class="type">ib_err_t</span> ib_tuple_write_u16(ib_tpl_t ib_tpl, int col_no, ib_u16_t val);
    <span class="type">ib_err_t</span> ib_tuple_write_i32(ib_tpl_t ib_tpl, int col_no, ib_i32_t val);
    <span class="type">ib_err_t</span> ib_tuple_write_u32(ib_tpl_t ib_tpl, int col_no, ib_i32_t val);
    <span class="type">ib_err_t</span> ib_tuple_write_i64(ib_tpl_t ib_tpl, int col_no, ib_i64_t val);
    <span class="type">ib_err_t</span> ib_tuple_write_u64(ib_tpl_t ib_tpl, int col_no, ib_u64_t val);
    <span class="type">ib_err_t</span> ib_tuple_write_float(ib_tpl_t ib_tpl, int col_no, float val);
    <span class="type">ib_err_t</span> ib_tuple_write_double(ib_tpl_t ib_tpl, int col_no, double val);
   </pre></div><div class="refsect1"><a id="id287638706"></a><p>These setter functions provide a typed interface for writing values to numeric columns. </p><div class="variablelist"><dl><dt><span class="term">Parameters:</span></dt><dd><div class="variablelist"><dl><dt><span class="term">
	 <code class="computeroutput">in: ib_tpl</code>
	</span></dt><dd><p>is a valid InnoDB tuple instance</p></dd><dt><span class="term">
	 <code class="computeroutput">in: col_no</code>
	</span></dt><dd><p>is the ordinal value of the column</p></dd><dt><span class="term">
	 <code class="computeroutput">in: val</code>
	</span></dt><dd><p>is the value to write to the column</p></dd></dl></div></dd><dt><span class="term">Returns:</span></dt><dd><p><a class="link" href="#db_success">DB_SUCCESS</a> or error code</p></dd></dl></div></div></div></div></div></div><div class="chapter" title="Chapter 7. Embedded InnoDB Limits"><div class="titlepage"><div><div><h2 class="title"><a id="limits"></a>Chapter&nbsp;7.&nbsp;Embedded InnoDB Limits</h2></div></div></div><p>
        Embedded InnoDB provides support for managing everything from very small
        databases that fit entirely in memory, to extremely large databases
        holding millions of records and terabytes of data.
    </p><p>
        Embedded InnoDB databases store data in a binary format that is portable across
        platforms, even of differing endian-ness.
				Integers are always stored in big-endian format; that is why
				you must call functions to read integer values rather than
				getting the values directly.
				Be aware, however, that portability aside, some performance issues can crop up in the event that
        you are using little-endian architecture.
    </p><p>
        Also, Embedded InnoDB databases and data structures are designed for concurrent
        access: they are thread-safe, and they share well across multiple processes.
				However, to allow multiple processes to share
        databases and the cache, Embedded InnoDB makes use of mechanisms that do not work
        well on network-shared drives (NFS or Windows networks shares, for example).
				For this reason, you cannot place your Embedded InnoDB databases and environments on network-mounted drives.
    </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Maximum number of databases -- No limit</p></li><li class="listitem"><p>Maximum number of tables -- 4 billion</p></li><li class="listitem"><p>Maximum size of a table -- 32 terabytes</p></li><li class="listitem"><p>Maximum size of a tablespace -- 64 terabytes</p></li><li class="listitem"><p>Maximum size of a row -- Depends on the row format.
For non-compressed row format, the maximum row size is 8000 bytes if stored on the same page,
or n * 4 GB if the row contains n BLOBs or other long columns.
Compressed row format has different limits.
The maximum size for both row formats also depends on the page size.</p></li><li class="listitem"><p>Maximum number of columns in a table -- 1000</p></li><li class="listitem"><p>Maximum number of columns in a clustered index -- 1000</p></li><li class="listitem"><p>Maximum number of columns in a secondary index -- 1000</p></li><li class="listitem"><p>Maximum size of the key columns in an index -- 4 kilobytes</p></li><li class="listitem"><p>Maximum number of secondary indexes on a table -- 1000</p></li><li class="listitem"><p>Maximum size of variable length columns -- No limit</p></li><li class="listitem"><p>Maximum number of concurrent transactions -- No limit on readonly transactions. Concurrent writes are limited to 1023.</p></li><li class="listitem"><p>Maximum number of active savepoints -- No limit</p></li><li class="listitem"><p>Maximum number of open tables -- No limit</p></li></ul></div><p></p></div><div class="chapter" title="Chapter 8. Embedded InnoDB Configuration Variables"><div class="titlepage"><div><div><h2 class="title"><a id="config-vars"></a>Chapter&nbsp;8.&nbsp;Embedded InnoDB Configuration Variables</h2></div></div></div><p>
Embedded InnoDB programs can configure the database engine using several variables.
Some variables can only be set before startup and cannot be changed once InnoDB has been started up.
Some variables can be set at any time.
For the API functions that work with configuration variables, see <a class="xref" href="#configuration-functions" title="6.7.4. API Functions - Configuration">Section&nbsp;6.7.4, “API Functions - Configuration”</a>.
</p><div class="informaltable"><a id="config-vars-table"></a><table border="1"><colgroup><col align="left"><col align="left"><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Variable name</th><th align="left">Type</th><th align="left">Class</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="adaptive_hash_index"></a><span class="bold"><strong>adaptive_hash_index</strong></span></td><td align="left">Boolean</td><td align="left">Pre-Startup</td><td align="left"><p>Set to OFF to disable the Adaptive Hash Index. Default is ON.</p></td></tr><tr><td align="left"><a id="adaptive_flushing"></a><span class="bold"><strong>adaptive_flushing</strong></span></td><td align="left">Boolean</td><td align="left">Pre-Startup</td><td align="left"><p>Set to OFF to disable the adaptive flushing. Default is ON.</p></td></tr><tr><td align="left"><a id="additional_mem_pool_size"></a><span class="bold"><strong>additional_mem_pool_size</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>Embedded InnoDB uses a separate memory pool for house keeping and its data dictionary. The default setting is 4MB. If Embedded InnoDB needs more memory it will allocate using malloc().</p></td></tr><tr><td align="left"><a id="autoextend_increment"></a><span class="bold"><strong>autoextend_increment</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>Embedded InnoDB will extend the tablespace by this many pages when it needs to increase the size of the table space. The default setting is 8 pages.</p></td></tr><tr><td align="left"><a id="buffer_pool_size"></a><span class="bold"><strong>buffer_pool_size</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>Size of the buffer pool in mega bytes. Default is 8MB.</p></td></tr><tr><td align="left"><a id="checksums"></a><span class="bold"><strong>checksums</strong></span></td><td align="left">Boolean</td><td align="left">Pre-Startup</td><td align="left"><p>Set to OFF if you want to disable page checksums. Default is ON.</p></td></tr><tr><td align="left"><a id="data_file_path"></a><span class="bold"><strong>data_file_path</strong></span></td><td align="left">Text</td><td align="left">Pre-Startup</td><td align="left"><p>The names and sizes of the Embedded InnoDB tablespaces. The syntax for this variable in pseudo-BNF:
</p><pre class="screen">size := INTEGER
spec := filename:size[K|M|G]
spec := spec[;spec]
spec := spec[:autoextend[:max:size[K|M|G]]]
</pre><p>
An example:
</p><pre class="screen">ibdata1:1G;ibdata2:64M:autoextend</pre><p>
Note that a Windows path may contain a drive name and a ':' e.g.,
</p><pre class="screen">C:\ibdata\ibdata1:1G</pre></td></tr><tr><td align="left"><a id="data_home_dir"></a><span class="bold"><strong>data_home_dir</strong></span></td><td align="left">Text</td><td align="left">Pre-Startup</td><td align="left"><p>Directory where the system files will be created. All database directories will also be created relative to this path. Default is <span class="quote">“<span class="quote">./</span>”</span>.Note: The path must end in a <span class="quote">“<span class="quote">/</span>”</span> or <span class="quote">“<span class="quote">\</span>”</span> depending on the platform.</p></td></tr><tr><td align="left"><a id="doublewrite"></a><span class="bold"><strong>doublewrite</strong></span></td><td align="left">Boolean</td><td align="left">Pre-Startup</td><td align="left"><p>Controls whether InnoDB will use the double write buffer. Default is ON</p></td></tr><tr><td align="left"><a id="file_format"></a><span class="bold"><strong>file_format</strong></span></td><td align="left">Text</td><td align="left">Anytime</td><td align="left"><p>The highest format that InnoDB supports. This value is stamped on the InnoDB system tablespace.</p></td></tr><tr><td align="left"><a id="file_io_threads"></a><span class="bold"><strong>file_io_threads</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>The number of IO threads that Embedded InnoDB will create for IO operations. The default setting is 4 threads.</p></td></tr><tr><td align="left"><a id="file_per_table"></a><span class="bold"><strong>file_per_table</strong></span></td><td align="left">Boolean</td><td align="left">Pre-Startup</td><td align="left"><p>Controls whether InnoDB will store user tables in one table space or create a .ibd file per table. Default is ON.</p></td></tr><tr><td align="left"><a id="flush_log_at_trx_commit"></a><span class="bold"><strong>flush_log_at_trx_commit</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>This variable can be set to 0, 1 or 2.
 </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>0 - Force sync of log contents to disk once every second.</p></li><li class="listitem"><p>1 - Force sync of log contents to disk at transaction commit.</p></li><li class="listitem"><p>2 - Write log contents to disk at transaction commit but do not force sync.</p></li></ul></div><p>
 Default setting is 1.</p>
</td></tr><tr><td align="left"><a id="flush_method"></a><span class="bold"><strong>flush_method</strong></span></td><td align="left">Text</td><td align="left">Pre-Startup</td><td align="left"><p>Permitted values are: fsync, O_DIRECT or O_DSYNC on Unices. On Windows there is only one possible setting: async_unbuffered.
 </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>fsync - Open files without any special modes and use fsync() to sync all files.</p></li><li class="listitem"><p>O_DIRECT - Open files using O_DIRECT on Solaris Embedded InnoDB will use directio(). All files are synced using fsync().</p></li><li class="listitem"><p>O_DSYNC - Open only the log files using O_SYNC mode, data files are synced using fsync().</p></li></ul></div><p>
The default setting on Unices is: fsync.
</p>
</td></tr><tr><td align="left"><a id="force_recovery"></a><span class="bold"><strong>force_recovery</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>Permitted values are 1, 2, 3, 4, 5 or 6.
 </p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>1 - Force recovery of tables that have corrupt pages. Use this option to dump tables that have some pages that are corrupt by attempting to skip the corrupt pages.</p></li><li class="listitem"><p>2 - Disable the master thread, this will disable the purge operation.</p></li><li class="listitem"><p>3 - Do not rollback incomplete transactions during recovery</p></li><li class="listitem"><p>4 - Disable insert buffer merge.</p></li><li class="listitem"><p>5 - Disable read of UNDO logs, uncommitted transactions are treated as commited.</p></li><li class="listitem"><p>6 - Disable the redo log application during recovery</p></li></ul></div><p>
 </p>
</td></tr><tr><td align="left"><a id="io_capacity"></a><span class="bold"><strong>io_capacity</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>The number of IO operations that the server can do. The default value is 200, the minimum permissible is 100. You can set this to a higher value if your hardware can handle higer IOPS.</p></td></tr><tr><td align="left"><a id="lock_wait_timeout"></a><span class="bold"><strong>lock_wait_timeout</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>The time in seconds a transaction will wait for a lock. The default valus is 60 seconds.</p></td></tr><tr><td align="left"><a id="log_buffer_size"></a><span class="bold"><strong>log_buffer_size</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>The size of the buffer for storing redo log entries. The default value is 384KB.</p></td></tr><tr><td align="left"><a id="log_file_size"></a><span class="bold"><strong>log_file_size</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>Size of the REDO log files in mega bytes. Default is 16MB.</p></td></tr><tr><td align="left"><a id="log_files_in_group"></a><span class="bold"><strong>log_files_in_group</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>The number of log files in a group. Embedded InnoDB writes to the log files in a circular fashion. Default value is 2.</p></td></tr><tr><td align="left"><a id="log_group_home_dir"></a><span class="bold"><strong>log_group_home_dir</strong></span></td><td align="left">Text</td><td align="left">Pre-Startup</td><td align="left"><p>Path to the directory where the log files will be create. The default value is <span class="quote">“<span class="quote">./</span>”</span>.</p></td></tr><tr><td align="left"><a id="max_dirty_pages_pct"></a><span class="bold"><strong>max_dirty_pages_pct</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>The master thread tries to keep the ratio of modified pages in the buffer pool to all database pages in the buffer pool smaller than this number. But it is not guaranteed that the value stays below that during a time of heavy update/insert activity. The default value is 75.</p></td></tr><tr><td align="left"><a id="max_purge_lag"></a><span class="bold"><strong>max_purge_lag</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>For controlling the delay of DML statements if purge is lagging. The default value is 0 (infinite).</p></td></tr><tr><td align="left"><a id="lru_old_blocks_pct"></a><span class="bold"><strong>lru_old_blocks_pct</strong></span></td><td align="left">Integer</td><td align="left">Anytime</td><td align="left"><p>This parameter is for the advanced user, change from the default setting only if you know what you are doing. It sets the point in the LRU list from where all pages are classified as "old". It is expressed as a percent. Default value is 37.</p></td></tr><tr><td align="left"><a id="lru_block_access_recency"></a><span class="bold"><strong>lru_block_access_recency</strong></span></td><td align="left">Integer</td><td align="left">Anytime</td><td align="left"><p>This parameter is for the advanced user, change from the default setting only if you know what you are doing.
It sets the threshold in milliseconds between accesses to a block at which it will be made "young".
The default value is 0 (disabled).</p></td></tr><tr><td align="left"><a id="open_files"></a><span class="bold"><strong>open_files</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>If you have set <span class="quote">“<span class="quote"><a class="link" href="#file_per_table">file_per_table</a></span>”</span> to ON,
then this is useful in setting the number of file descriptors that Embedded InnoDB will keep open.
Default value is 300.</p></td></tr><tr><td align="left"><a id="read_io_threads"></a><span class="bold"><strong>read_io_threads</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>Number of IO threads dedicated to reading. Default value is 4 threads</p></td></tr><tr><td align="left"><a id="write_io_threads"></a><span class="bold"><strong>write_io_threads</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>Number of IO threads dedicated to writing. Default value is 4 threads</p></td></tr><tr><td align="left"><a id="pre_rollback_hook"></a><span class="bold"><strong>pre_rollback_hook</strong></span></td><td align="left">Callback</td><td align="left">Disabled</td><td align="left"><p>Future use.</p></td></tr><tr><td align="left"><a id="print_verbose_log"></a><span class="bold"><strong>print_verbose_log</strong></span></td><td align="left">Boolean</td><td align="left">Pre-Startup</td><td align="left"><p>Disable if you want Embedded InnoDB to reduce the number of messages it writes to the logger. Default is ON.</p></td></tr><tr><td align="left"><a id="rollback_on_timeout"></a><span class="bold"><strong>rollback_on_timeout</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>If set then we rollback the transaction on <a class="link" href="#db_lock_wait_timeout">DB_LOCK_WAIT_TIMEOUT</a> error. Default is ON</p></td></tr><tr><td align="left"><a id="status_file"></a><span class="bold"><strong>status_file</strong></span></td><td align="left">Text</td><td align="left">Anytime</td><td align="left"><p>Enable this if you want Embedded InnoDB to write the output of the status monitor to the logger. Default is OFF.</p></td></tr><tr><td align="left"><a id="sync_spin_loops"></a><span class="bold"><strong>sync_spin_loops</strong></span></td><td align="left">Integer</td><td align="left">Pre-Startup</td><td align="left"><p>The number of times to spin while waiting for a latch. Default value is 30.</p></td></tr><tr><td align="left"><a id="use_sys_malloc"></a><span class="bold"><strong>use_sys_malloc</strong></span></td><td align="left">Boolean</td><td align="left">Pre-Startup</td><td align="left"><p>Enable if you want Embedded InnoDB to use the system malloc() and free(). Default is OFF.</p></td></tr><tr><td align="left"><a id="version"></a><span class="bold"><strong>version</strong></span></td><td align="left">Text</td><td align="left">Anytime</td><td align="left"><p>Get the Embedded InnoDB version info. A read-only variable.</p></td></tr></tbody></table></div></div><div class="chapter" title="Chapter 9. Embedded InnoDB Status variables"><div class="titlepage"><div><div><h2 class="title"><a id="status-vars"></a>Chapter&nbsp;9.&nbsp;Embedded InnoDB Status variables</h2></div></div></div><p>
Embedded InnoDB allows users to query the state of the database using the
<code class="code">ib_status_get_i64()</code> function.
For an example, see the <a class="link" href="#ib_status_c">ib_status.c</a>
sample program.
</p><div class="informaltable"><a id="status-vars-table"></a><table border="1"><colgroup><col align="left"><col align="left"></colgroup><thead><tr><th align="left">Variable name</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a id="read_req_pending"></a><span class="bold"><strong>read_req_pending</strong></span></td><td align="left">Number of read requests that are pending.</td></tr><tr><td align="left"><a id="write_req_pending"></a><span class="bold"><strong>write_req_pending</strong></span></td><td align="left">Number of write requests that are pending.</td></tr><tr><td align="left"><a id="fsync_req_pending"></a><span class="bold"><strong>fsync_req_pending</strong></span></td><td align="left">Number of fsync requests that are pending.</td></tr><tr><td align="left"><a id="write_req_done"></a><span class="bold"><strong>write_req_done</strong></span></td><td align="left">Number of write requests that have been completed.</td></tr><tr><td align="left"><a id="read_req_done"></a><span class="bold"><strong>read_req_done</strong></span></td><td align="left">Number of read requests that have been completed.</td></tr><tr><td align="left"><a id="fsync_req_done"></a><span class="bold"><strong>fsync_req_done</strong></span></td><td align="left">Number of fsync requests that have been completed.</td></tr><tr><td align="left"><a id="bytes_total_written"></a><span class="bold"><strong>bytes_total_written</strong></span></td><td align="left">Total number of bytes written.</td></tr><tr><td align="left"><a id="bytes_total_read"></a><span class="bold"><strong>bytes_total_read</strong></span></td><td align="left">Total number of bytes read.</td></tr><tr><td align="left"><a id="buffer_pool_current_size"></a><span class="bold"><strong>buffer_pool_current_size</strong></span></td><td align="left">Size of the buffer pool in bytes.</td></tr><tr><td align="left"><a id="buffer_pool_data_pages"></a><span class="bold"><strong>buffer_pool_data_pages</strong></span></td><td align="left">Number of data pages in the buffer pool.</td></tr><tr><td align="left"><a id="buffer_pool_dirty_pages"></a><span class="bold"><strong>buffer_pool_dirty_pages</strong></span></td><td align="left">Number of dirty pages in the buffer pool.</td></tr><tr><td align="left"><a id="buffer_pool_misc_pages"></a><span class="bold"><strong>buffer_pool_misc_pages</strong></span></td><td align="left">Number of miscellaneous pages in the buffer pool.</td></tr><tr><td align="left"><a id="buffer_pool_free_pages"></a><span class="bold"><strong>buffer_pool_free_pages</strong></span></td><td align="left">Number of free pages in the buffer pool.</td></tr><tr><td align="left"><a id="buffer_pool_read_reqs"></a><span class="bold"><strong>buffer_pool_read_reqs</strong></span></td><td align="left">Number of read requests issued for pages from the
	buffer pool.</td></tr><tr><td align="left"><a id="buffer_pool_reads"></a><span class="bold"><strong>buffer_pool_reads</strong></span></td><td align="left">Number of buffer pool reads that led to the reading of a disk page.</td></tr><tr><td align="left"><a id="buffer_pool_waited_for_free"></a><span class="bold"><strong>buffer_pool_waited_for_free</strong></span></td><td align="left">The number of times when we had to wait for a free page
	in the buffer pool.  This can happen when the buffer pool is
	full and InnoDB needs to do a flush to disk, in order to be
	able to read or create a page.</td></tr><tr><td align="left"><a id="buffer_pool_pages_flushed"></a><span class="bold"><strong>buffer_pool_pages_flushed</strong></span></td><td align="left">Number of pages that have been written from the buffer
	pool to the disk.</td></tr><tr><td align="left"><a id="buffer_pool_write_reqs"></a><span class="bold"><strong>buffer_pool_write_reqs</strong></span></td><td align="left">Number of write requests issued by the buffer pool.</td></tr><tr><td align="left"><a id="buffer_pool_total_pages"></a><span class="bold"><strong>buffer_pool_total_pages</strong></span></td><td align="left">Number of buffer pages created in the buffer pool with
	no read.</td></tr><tr><td align="left"><a id="buffer_pool_pages_read"></a><span class="bold"><strong>buffer_pool_pages_read</strong></span></td><td align="left">Number of read operations.</td></tr><tr><td align="left"><a id="buffer_pool_pages_written"></a><span class="bold"><strong>buffer_pool_pages_written</strong></span></td><td align="left">Number of write operations.</td></tr><tr><td align="left"><a id="double_write_pages_written"></a><span class="bold"><strong>double_write_pages_written</strong></span></td><td align="left">Number of pages that have been flushed to the double
	write buffer.</td></tr><tr><td align="left"><a id="double_write_invoked"></a><span class="bold"><strong>double_write_invoked</strong></span></td><td align="left">Number of times the double write buffer was flushed.</td></tr><tr><td align="left"><a id="log_buffer_slot_waits"></a><span class="bold"><strong>log_buffer_slot_waits</strong></span></td><td align="left">Number of the log buffer had to flush to disk due to
	lack of space.</td></tr><tr><td align="left"><a id="log_write_reqs"></a><span class="bold"><strong>log_write_reqs</strong></span></td><td align="left">Number of log write requests.</td></tr><tr><td align="left"><a id="log_write_flush_count"></a><span class="bold"><strong>log_write_flush_count</strong></span></td><td align="left">Number of physical writes to the log file.</td></tr><tr><td align="left"><a id="log_bytes_written"></a><span class="bold"><strong>log_bytes_written</strong></span></td><td align="left">Number of bytes written to the log file.</td></tr><tr><td align="left"><a id="log_fsync_req_done"></a><span class="bold"><strong>log_fsync_req_done</strong></span></td><td align="left">Number of fsyncs() done on the log file.</td></tr><tr><td align="left"><a id="log_write_req_pending"></a><span class="bold"><strong>log_write_req_pending</strong></span></td><td align="left">Number of pending writes on the log file.</td></tr><tr><td align="left"><a id="log_fsync_req_pending"></a><span class="bold"><strong>log_fsync_req_pending</strong></span></td><td align="left">Number of fsync() requests pending on the log file.</td></tr><tr><td align="left"><a id="lock_row_waits"></a><span class="bold"><strong>lock_row_waits</strong></span></td><td align="left">Number of times transactions had to wait for a locks.</td></tr><tr><td align="left"><a id="lock_row_waiting"></a><span class="bold"><strong>lock_row_waiting</strong></span></td><td align="left">Number of transactions waiting for locks.</td></tr><tr><td align="left"><a id="lock_total_wait_time_in_secs"></a><span class="bold"><strong>lock_total_wait_time_in_secs</strong></span></td><td align="left">Lock wait time in seconds.</td></tr><tr><td align="left"><a id="lock_wait_time_avg_in_secs"></a><span class="bold"><strong>lock_wait_time_avg_in_secs</strong></span></td><td align="left">Average lock wait time in seconds </td></tr><tr><td align="left"><a id="lock_max_wait_time_in_secs"></a><span class="bold"><strong>lock_max_wait_time_in_secs</strong></span></td><td align="left">Maximum time in seconds that a transaction has waited on a lock.</td></tr><tr><td align="left"><a id="row_total_read"></a><span class="bold"><strong>row_total_read</strong></span></td><td align="left">Number of rows accessed or read.</td></tr><tr><td align="left"><a id="row_total_inserted"></a><span class="bold"><strong>row_total_inserted</strong></span></td><td align="left">Number of rows inserted.</td></tr><tr><td align="left"><a id="row_total_updated"></a><span class="bold"><strong>row_total_updated</strong></span></td><td align="left">Number of rows updated.</td></tr><tr><td align="left"><a id="row_total_deleted"></a><span class="bold"><strong>row_total_deleted</strong></span></td><td align="left">Number of rows deleted.</td></tr><tr><td align="left"><a id="read_ahead_sequential"></a><span class="bold"><strong>read_ahead_sequential</strong></span></td><td align="left">Number of times the linear read ahead was invoked (not currently implemented)</td></tr><tr><td align="left"><a id="page_size"></a><span class="bold"><strong>page_size</strong></span></td><td align="left">InnoDB page size.</td></tr><tr><td align="left"><a id="have_atomic_builtins"></a><span class="bold"><strong>have_atomic_builtins</strong></span></td><td align="left">Non-zero if InnoDB was compiled with atomic ops.</td></tr></tbody></table></div></div><div class="chapter" title="Chapter 10. Transferring Databases between MySQL and Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title"><a id="transfer"></a>Chapter&nbsp;10.&nbsp;Transferring Databases between MySQL and Embedded InnoDB</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#id287640022">10.1. 
Transferring Databases from MySQL to Embedded InnoDB
</a></span></dt><dt><span class="section"><a href="#id287640098">10.2. 
Transferring Databases from Embedded InnoDB to MySQL
</a></span></dt></dl></div><p>
In <a class="xref" href="#overview.mysql" title="1.1.3.  Comparison with MySQL">Section&nbsp;1.1.3, “
Comparison with MySQL
”</a>, you can learn why you might
take a MySQL database and manipulate its InnoDB tables with
an Embedded InnoDB program, or vice versa.
Here are the details for that process.
</p><div class="section" title="10.1.  Transferring Databases from MySQL to Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287640022"></a>10.1.&nbsp;
Transferring Databases from MySQL to Embedded InnoDB
</h2></div></div></div><p>
This technique is useful for using SQL statements in MySQL to set up
tables and indexes, that you can then process with an Embedded InnoDB application,
for maximum speed with all data manipulation operations.
You can also verify compatibility of your application with any data types and
data values used in a full MySQL application.
</p><p>
Follow these steps to transfer the data for all the databases within a data directory from MySQL to Embedded InnoDB:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
All the tables that you will be able to access through Embedded InnoDB must be InnoDB tables, either created
with the <code class="literal">ENGINE=INNODB</code> clause or with InnoDB as the default storage engine.
(To verify which storage engine is used for each table, issue the command
<code class="literal">show table status</code> in the <code class="literal">mysql</code> command processor.)
If you intend to use Embedded InnoDB to access a table that uses the MyISAM or other storage engine, you can
turn it into an InnoDB table with the command:
</p><pre class="screen">alter table <em class="replaceable"><code>table_name</code></em> engine=innodb;
</pre><p>
or clone it to an InnoDB table with the command:
</p><pre class="screen">create table <em class="replaceable"><code>new_table</code></em> engine=innodb as select * from <em class="replaceable"><code>old_table</code></em>;
</pre><p>
</p></li><li class="listitem"><p>
The InnoDB tables can either be part of the system tablespace,
or in their own <code class="literal">.ibd</code> files (that is, created under the
<code class="literal">innodb_file_per_table</code> option).
</p></li><li class="listitem"><p>
Shut down the MySQL database server that is accessing the data directory.
</p></li><li class="listitem"><p>
If you want to permanently transfer the data for use by an Embedded InnoDB application,
recursively copy the MySQL data directory to a new location.
If you only want to use the data in a Embedded InnoDB application temporarily,
you can run the program and access the data in the original MySQL data directory,
then restart the MySQL server after the program ends.
</p></li><li class="listitem"><p>
In your application, skip the table creation step and
proceed directly to opening the table.
</p></li><li class="listitem"><p>
Read, insert, or update columns using the Embedded InnoDB constants to decode
the column type information, using the mapping information from <a class="xref" href="#types-column" title="6.2.4. Column Types">Section&nbsp;6.2.4, “Column Types”</a>.
</p></li></ol></div></div><div class="section" title="10.2.  Transferring Databases from Embedded InnoDB to MySQL"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="id287640098"></a>10.2.&nbsp;
Transferring Databases from Embedded InnoDB to MySQL
</h2></div></div></div><p>
This technique is useful for running SQL statements in MySQL for one-time setup or
periodic verification of the data used in an Embedded InnoDB application.
For example, you might auto-generate a large set of queries to serve as a test suite,
more easily than writing all the same queries with the Embedded InnoDB API.
You can also this technique to pull data produced in a performance-critical environment
such as real-time data capture, into MySQL for later analysis through existing reports.
</p><p>
Follow these steps to transfer the data for all the databases within a data directory from
Embedded InnoDB
to
MySQL:
</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>
Shut down the MySQL database before doing the actual transfer.
</p></li><li class="listitem"><p>
Recursively copy the Embedded InnoDB database directory to the MySQL data directory.
</p></li><li class="listitem"><p>
Start the <code class="literal">mysqld</code> server.
</p></li><li class="listitem"><p>
Verify that the appropriate InnoDB tables are recognized by issuing
<code class="literal">show table status</code> in the <code class="literal">mysql</code> command processor.
</p></li><li class="listitem"><p>
Verify the data types of the columns by issuing
<code class="literal">describe <em class="replaceable"><code>table_name</code></em></code> in the <code class="literal">mysql</code> command processor.
</p></li><li class="listitem"><p>
Run the reports, test suite, benchmarks, and so on from MySQL as usual.
</p></li></ol></div><p>
The operations on the MySQL side might require the <code class="literal">.frm</code>
files associated with the tables.
For that reason, you might initially create the tables in MySQL
and transfer the database from MySQL to Embedded InnoDB, and later back again,
so that the <code class="literal">.frm</code> files are always present.
</p></div></div><div class="chapter" title="Chapter 11. Embedded InnoDB Change History"><div class="titlepage"><div><div><h2 class="title"><a id="innodb-changes"></a>Chapter&nbsp;11.&nbsp;Embedded InnoDB Change History</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#innodb-changes-4">11.1. Changes in API 1.0.6.6750</a></span></dt><dt><span class="section"><a href="#innodb-changes-3">11.2. Changes in API 1.0.4.5940 (Not Released)</a></span></dt><dt><span class="section"><a href="#innodb-changes-2">11.3. Changes in API 1.0.3.5325 (June 24, 2009)</a></span></dt><dt><span class="section"><a href="#innodb-changes-1">11.4. Embedded InnoDB 1.0.0 (April 21, 2009)</a></span></dt></dl></div><p>
The complete change history of the Embedded InnoDB can be
viewed in the file <code class="literal">ChangeLog</code> that is included in
the source and binary distributions as well as at
<a class="ulink" href="https://web.archive.org/web/20100605140832/http://www.innodb.com/changelogs/embedded_innodb/ChangeLog-1.0" target="_top">the InnoDB website</a>.
</p><p>
The 1.0.x numbers are not entirely sequential because they correspond to
version numbers of the InnoDB Plugin, and in some cases a version number
of the Plugin was never released, or we did not release a corresponding
version of Embedded InnoDB.
</p><div class="section" title="11.1. Changes in API 1.0.6.6750"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="innodb-changes-4"></a>11.1.&nbsp;Changes in API 1.0.6.6750</h2></div></div></div><p>
Add a transaction handle argument to ib_table_drop() and ib_index_drop().
</p><p>
Add an API function to check whether a transaction currently holds
a shared lock on the InnoDB data dictionary.
</p><p>
Add an API function to retrieve all configuration variables.
</p><p>
Normalize the table name argument specified by client.
The table names are converted to lower case on Windows.
</p><p>
Check for reserved characters in DOS/Windows when validating
tablenames.
</p><p>
Add IB_DECIMAL column type.
</p><p>
Do not attempt to access a clustered index record that has been
marked for deletion, on READ UNCOMMITTED isolation level.
</p><p>
Remove API function ib_table_schema_set_temp_dir, which is a no-op.
</p><p>
Display the zlib version number at startup.
</p><p>
Fix a bug in row fetch to return the correct version of a record
from the transaction's view.
</p><p>
Speed up search by not fetching the next N records when doing
a unique search.
</p><p>
Add a new error code, DB_FATAL.
</p><p>
Introduce a new boolean configuration parameter "adaptive_flushing"
which can be set to OFF to disable the adaptive flushing.
</p><p>
Fix a memory leak.
</p></div><div class="section" title="11.2. Changes in API 1.0.4.5940 (Not Released)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="innodb-changes-3"></a>11.2.&nbsp;Changes in API 1.0.4.5940 (Not Released)</h2></div></div></div><p>
Enforce NOT NULL column constraint during insert and update.
</p><p>
Fix a bug in the merge sort that can corrupt indexes in fast index
creation. Add some consistency checks. Check that the number of
records remains constant in every merge sort pass.
</p><p>
Make it possible to tune the buffer pool LRU eviction policy to be
more resistant against index scans. Introduce the settable global
variables lru_old_blocks_pct and lru_block_access_recency for
controlling the buffer pool eviction policy. The parameter
lru_old_blocks_pct (5..95) controls the desired amount of "old"
blocks in the LRU list. The default is 37, corresponding to the
old fixed ratio of 3/8. Each time a block is accessed, it will be
moved to the "new" blocks if its first access was at least
lru_block_access_recency milliseconds ago (default 0, meaning every
block). The idea is that in index scans, blocks will be accessed
a few times within innodb_old_blocks_time, and they will remain in
the "old" section of the LRU list. Thus, when lru_block_access_recency
is nonzero, blocks retrieved for one-time index scans will be more
likely candidates for eviction than blocks that are accessed in
random patterns.
</p><p>
Enable the VARBINARY column type
</p><p>
Add a new function (ib_status_get_i64()) to the API that allows users
to read the InnoDB system variables.
</p><p>
Support inlining of functions and prefetch with Sun Studio.
These changes are based on contribution from Sun Microsystems Inc.
under a BSD license.
</p><p>
Change the defaults for:
sync_spin_loops: 20 -&gt; 30
thread_sleep_delay: 5 -&gt; 6
</p><p>
Implement the adaptive flushing of dirty pages, which uses
a heuristics based flushing rate of dirty pages to avoid IO
bursts at checkpoint. 
</p><p>
Implement IO capacity tuning. The ibuf merge is also changed
from synchronous to asynchronous.  These changes are based on
contribution from Google Inc.  under a BSD license.
</p></div><div class="section" title="11.3. Changes in API 1.0.3.5325 (June 24, 2009)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="innodb-changes-2"></a>11.3.&nbsp;Changes in API 1.0.3.5325 (June 24, 2009)</h2></div></div></div><p>
Do not rollback the transaction if the table create fails. Let the
user handle the transaction rollback.
</p><p>
Return a meaningful error code when creating a table if the table
name, supplied by the user, is not in 'database/table_name' format
instead of asserting.
</p><p>
Add a function to return the API version number. The version number
format is a 64-bit unsigned integer encoded as four 16-bit fields,
<code class="literal"><em class="replaceable"><code>reserved</code></em>|<em class="replaceable"><code>current</code></em>|<em class="replaceable"><code>revision</code></em>|<em class="replaceable"><code>age</code></em></code>:

</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>If the library source code has changed at all
since the last release, then revision will be incremented
(<span class="quote">“<span class="quote"><code class="literal"><em class="replaceable"><code>current</code></em>|<em class="replaceable"><code>revision</code></em>|<em class="replaceable"><code>age</code></em></code></span>”</span> becomes
<span class="quote">“<span class="quote"><code class="literal"><em class="replaceable"><code>current</code></em>|<em class="replaceable"><code>revision+1</code></em>|<em class="replaceable"><code>age</code></em></code></span>”</span>)</p></li><li class="listitem"><p>If any interfaces have been added, removed, or
changed since the last update,
<code class="literal"><em class="replaceable"><code>current</code></em></code> will
be incremented,
and <code class="literal"><em class="replaceable"><code>revision</code></em></code>
will be set to
<code class="literal">0</code>.</p></li><li class="listitem"><p>If any interfaces have been added (but not changed
or removed) since the last release,
then <code class="literal">age</code> is incremented.</p></li><li class="listitem"><p>If any interfaces have been changed or removed
since the last release, then <code class="literal">age</code> is
set to <code class="literal">0</code>.</p></li></ul></div><p>
</p><p>
Change ib_database_create() to create the database sub-directory
relative to the data_home_dir setting.
</p><p>
Change the ib_cfg_set*() functions to return ib_err_t instead of
ib_bool_t.
</p><p>
Fix a bug in the 1.0.0 release were INTs were stored incorrectly. The
sign flag was being set incorrectly when converting the value to the
storage format.
</p><p>
Change the default value of <code class="option">log_group_home_dir</code> from <span class="quote">“<span class="quote">log</span>”</span> to <span class="quote">“<span class="quote">.</span>”</span>.
</p><p>
Introduce two new types:
</p><div class="variablelist"><dl><dt><span class="term">IB_CHAR_ANYCHARSET</span></dt><dd><p>Fixed width column with any charset</p></dd><dt><span class="term">IB_VARCHAR_ANYCHARSET</span></dt><dd><p>Variable length column, any charset</p></dd></dl></div><p>
</p><p>
Add an API function to list all tables in the data dictionary
</p><p>
Add a function to drop a database. All the tables are first dropped
and then the database. If the tables are in use then the referenced
tables will be put in a background drop queue. The tables in the
background drop queue will be dropped once the reference count for
that table reaches 0.
</p><p>
Write updates of PAGE_MAX_TRX_ID to the redo log and add debug
assertions for checking that PAGE_MAX_TRX_ID is valid on leaf
pages of secondary indexes and the insert buffer B-tree. This bug
could cause failures in secondary index lookups in consistent
reads right after crash recovery.
</p><p>
Correctly estimate the space needed on the compressed page when
performing an update by delete-and-insert.
</p><p>
Remove unused variable.
</p><p>
Fix Bug#44320 InnoDB: missing DB_ROLL_PTR in Table Monitor COLUMNS
output
</p><p>
Fix a bug that prevented creation of compressed tables.
</p><p>
Add a function to convert error codes to strings, similar to
strerror(3).
</p><p>
Add row caching when fetching rows with row_search_for_client(). This
change will fetch more than one row and cache it in the row_prebuilt_t
structure to reduce CPU and locking overhead. This port from the
plugin branch is different because in Embedded InnoDB we cache the
rows in InnoDB row format, in the plugin we cache the rows in the
MySQL row format.
</p><p>
Make the insert row code more efficient, we do a shallow copy when
inserting rows and cache the dtuple_t instance in the query graph
rather than creating it for each insert.
</p><p>
Aggressive inlining of some frequently called API functions. The ones
that are called from within the API implementation.
</p><p>
Add row caching when fetching rows with row_search_for_client()
</p><p>
Fix a <a class="ulink" href="https://web.archive.org/web/20100605140832/http://forums.innodb.com/read.php?8,584,584#msg-584" target="_top">bug when retrieving a string configuration parameters with
ib_cfg_get()</a>
</p><p>
Remove the dependency on the config.h file generated by autoconf
and CMake. API code assumes C99 compiler to work out the integer
width. We make an exception for VisualStudio by using the __int8
etc. instead of the standard aliases uint8_t etc.
</p><p>
Replace the public interface file api0api.h with innodb.h.
</p><p>
Allow users to set a callback function and the output stream to print
the InnoDB error messages. Currently this callback function must be a
drop-in replacement for fprintf().
</p><p>
Define the logical type names trx_id_t, roll_ptr_t, and undo_no_t
and use them in place of dulint everywhere.
</p></div><div class="section" title="11.4. Embedded InnoDB 1.0.0 (April 21, 2009)"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="innodb-changes-1"></a>11.4.&nbsp;Embedded InnoDB 1.0.0 (April 21, 2009)</h2></div></div></div><p>Initial early adopter release.</p></div></div><div class="appendix" title="Appendix A. Third-Party Software"><div class="titlepage"><div><div><h2 class="title"><a id="innodb-contrib"></a>Appendix&nbsp;A.&nbsp;Third-Party Software</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="section"><a href="#innodb-contrib-google">A.1. Google SMP Patch</a></span></dt><dt><span class="section"><a href="#innodb-contrib-percona">A.2. Multiple Background I/O Threads Patch from Percona</a></span></dt><dt><span class="section"><a href="#innodb-contrib-sun_microsystems">A.3. Performance Patches from Sun Microsystems</a></span></dt></dl></div><p>Innobase Oy acknowledges that certain Third Party and Open
  Source software has been used to develop or is incorporated in
  InnoDB (including the Embedded InnoDB). This appendix includes
  required third-party license information.</p><div class="section" title="A.1. Google SMP Patch"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="innodb-contrib-google"></a>A.1.&nbsp;Google SMP Patch</h2></div></div></div><p>Innobase Oy gratefully acknowledges the contributions of
    Google, Inc. to improve performance by replacing InnoDB’s use of
    Pthreads mutexes with calls to GCC atomic builtins.  This change
    means that InnoDB mutex and and rw-lock operations take less CPU
    time, and improves throughput on those platforms where the atomic
    operations are available.</p><p>Changes from the Google contribution were incorporated in
    the following source code files: <code class="literal">btr0cur.c</code>,
    <code class="literal">btr0sea.c</code>, <code class="literal">buf0buf.c</code>,
    <code class="literal">buf0buf.ic</code>,
    <code class="literal">os0sync.h</code>,
    <code class="literal">row0sel.c</code>, <code class="literal">srv0srv.c</code>,
    <code class="literal">srv0srv.h</code>, <code class="literal">srv0start.c</code>,
    <code class="literal">sync0arr.c</code>, <code class="literal">sync0rw.c</code>,
    <code class="literal">sync0rw.h</code>, <code class="literal">sync0rw.ic</code>,
    <code class="literal">sync0sync.c</code>, <code class="literal">sync0sync.h</code>,
    <code class="literal">sync0sync.ic</code>, and
    <code class="literal">univ.i</code>.</p><p>These contributions are incorporated subject to the
    conditions contained in the file
    <code class="literal">COPYING.Google</code>, which are reproduced
    here.</p><pre class="programlisting">Copyright (c) 2008, Google Inc.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions
are met:
    * Redistributions of source code must retain the above copyright
      notice, this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above
      copyright notice, this list of conditions and the following
      disclaimer in the documentation and/or other materials
      provided with the distribution.
    * Neither the name of the Google Inc. nor the names of its
      contributors may be used to endorse or promote products
      derived from this software without specific prior written
      permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
<span class="quote">“<span class="quote">AS IS</span>”</span> AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
POSSIBILITY OF SUCH DAMAGE.</pre></div><div class="section" title="A.2. Multiple Background I/O Threads Patch from Percona"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="innodb-contrib-percona"></a>A.2.&nbsp;Multiple Background I/O Threads Patch from Percona</h2></div></div></div><p>Innobase Oy gratefully acknowledges the contribution of
    Percona, Inc. to improve Embedded InnoDB performance by implementing
    configurable background threads. Embedded InnoDB uses background threads
    to service various types of I/O requests. The change provides another
    way to make Embedded InnoDB more scalable on high end systems.</p><p>Changes from the Percona, Inc. contribution were
    incorporated in the following source code files:
    <code class="literal">os0file.c</code>,
    <code class="literal">os0file.h</code>, <code class="literal">srv0srv.c</code>,
    <code class="literal">srv0srv.h</code>, and <code class="literal">srv0start.c</code>.
    </p><p>This contribution is incorporated subject to the
    conditions contained in the file
    <code class="literal">COPYING.Percona</code>, which are reproduced
    here.</p><pre class="programlisting"># Copyright (c) 2008, 2009, Percona Inc.
# All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
#     * Redistributions of source code must retain the above copyright
#       notice, this list of conditions and the following disclaimer.
#     * Redistributions in binary form must reproduce the above
#       copyright notice, this list of conditions and the following
#       disclaimer in the documentation and/or other materials
#       provided with the distribution.
#     * Neither the name of the Percona Inc. nor the names of its
#       contributors may be used to endorse or promote products
#       derived from this software without specific prior written
#       permission.
#
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# <span class="quote">“<span class="quote">AS IS</span>”</span> AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
# FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
# COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
# INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
# BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
# LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
# CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
# ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
# POSSIBILITY OF SUCH DAMAGE.</pre></div><div class="section" title="A.3. Performance Patches from Sun Microsystems"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="innodb-contrib-sun_microsystems"></a>A.3.&nbsp;Performance Patches from Sun Microsystems</h2></div></div></div><p>Innobase Oy gratefully acknowledges the following
    contributions from Sun Microsystems, Inc. to improve Embedded InnoDB
    performance:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Introducing the PAUSE instruction inside spin loops,
      This change increases performance in high concurrency, CPU-bound
      workloads.</li><li class="listitem">Enabling inlining of functions and prefetch with
      Sun Studio.</li></ul></div><p>Changes from the Sun Microsystems, Inc. contribution were
    incorporated in the following source code files:
    <code class="literal">univ.i</code>, <code class="literal">ut0ut.c</code>, and
    <code class="literal">ut0ut.h</code>.</p><p>This contribution is incorporated subject to the
    conditions contained in the file
    <code class="literal">COPYING.Sun_Microsystems</code>, which are reproduced
    here.</p><pre class="programlisting"># Copyright (c) 2009, Sun Microsystems, Inc.
# All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions
# are met:
#     * Redistributions of source code must retain the above copyright
#       notice, this list of conditions and the following disclaimer.
#     * Redistributions in binary form must reproduce the above
#       copyright notice, this list of conditions and the following
#       disclaimer in the documentation and/or other materials
#       provided with the distribution.
#     * Neither the name of Sun Microsystems, Inc. nor the names of its
#       contributors may be used to endorse or promote products
#       derived from this software without specific prior written
#       permission.
#
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
# <span class="quote">“<span class="quote">AS IS</span>”</span> AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
# LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS
# FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE
# COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
# INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
# BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
# LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
# CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
# LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
# ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
# POSSIBILITY OF SUCH DAMAGE.</pre></div></div><div class="appendix" title="Appendix B. Code Examples Supplied with Embedded InnoDB"><div class="titlepage"><div><div><h2 class="title"><a id="examples"></a>Appendix&nbsp;B.&nbsp;Code Examples Supplied with Embedded InnoDB</h2></div></div></div><p>
This section describes the code examples shipped in the Embedded InnoDB
<code class="literal">examples/</code> subdirectory, and lists the particular features
illustrated by each one.
</p><p>
On Linux and UNIX systems, these examples are installed in the directory
<code class="literal">/usr/local/share/embedded_innodb-1.0/examples</code>.
On Windows systems, these examples are installed in the directory
<code class="literal">embedded_innodb-1.0\examples</code>.
</p><div class="variablelist"><dl><dt><a id="ib_cfg_c"></a><span class="term"><code class="literal">ib_cfg.c</code></span></dt><dd><p>
This example demonstrates how to configure Embedded InnoDB using the API.
This program also uses a very simple config file parser to read the configuration values from a file.
See test0aux.c.
</p></dd><dt><a id="ib_compressed_c"></a><span class="term"><code class="literal">ib_compressed.c</code></span></dt><dd><p>Example that creates a few compressed tables and checks for valid page_size. </p></dd><dt><a id="ib_cursor_c"></a><span class="term"><code class="literal">ib_cursor.c</code></span></dt><dd><p>Single-threaded example that does the equivalent of:
</p><pre class="screen">-- Create a database
 CREATE TABLE T(c1 INT, PRIMARY KEY(c1)); 
 INSERT INTO T VALUES(1); ...
 SELECT * FROM T;
 SELECT * FROM T WHERE c1 = 5;
 SELECT * FROM T WHERE c1 &gt; 5;
 SELECT * FROM T WHERE c1 &lt; 5;
 SELECT * FROM T WHERE c1 &gt;= 1 AND c1 &lt; 5;
 DROP TABLE T;
</pre></dd><dt><a id="ib_index_c"></a><span class="term"><code class="literal">ib_index.c</code></span></dt><dd><p>Single-threaded example that does the equivalent of:
</p><pre class="screen">-- Create a database
 CREATE TABLE T(c1 VARCHAR(n), c2 INT, PRIMARY KEY(c1, 4));
-- Should succeed.
 INSERT INTO T VALUES('xxxxaaaa', 1);
-- Should result in duplicate key error
 INSERT INTO T VALUES('xxxxbbbb', 2);
</pre><p>
</p><p>
This example demonstrates how to create indexes with a prefix length.
Note how Embedded InnoDB uses only the first 4 characters to match on key value.
</p></dd><dt><a id="ib_logger_c"></a><span class="term"><code class="literal">ib_logger.c</code></span></dt><dd><p>
This example demonstrates how to redirect Embedded InnoDB messages to a user defined function,
in this case to perform startup and shutdown silently.
It creates a message logging function <code class="literal">null_logger()</code> that does not print anything,
and sets this function as the default InnoDB message logger.
This function should not print any messages to stderr.
The example program simply does a startup and shutdown of InnoDB.
</p></dd><dt><a id="ib_mt_stress_c"></a><span class="term"><code class="literal">ib_mt_stress.c</code></span></dt><dd><p>
Available on Linux and UNIX only, not on Windows systems.
This is a multi-threaded example that does the equivalent of:
</p><pre class="screen">-- Create a database
 CREATE TABLE blobt3(
	A       INT,
	D       INT,
	B       BLOB,
	C       TEXT,
	PRIMARY KEY(B(10), A, D),
	INDEX(D),
	INDEX(A),
	INDEX(C(255), B(255)),
	INDEX(B(5), C(10), A));
-- Insert random rows into blobt3.
-- In separate threads, do the following:
 INSERT INTO blobt3 VALUES(
        &lt;random_integer&gt;,
       	5,
       	&lt;random_string&gt;,
       	&lt;random_string&gt;);
 UPDATE blobt3 SET B = &lt;random_string&gt; WHERE A = &lt;random_integer&gt;;
</pre><p>
</p><p>
The test creates 4 types of worker threads that issue insert, update, delete and select operations.
This is a complex example that also doubles as a stress test.
</p></dd><dt><a id="ib_perf1_c"></a><span class="term"><code class="literal">ib_perf1.c</code></span></dt><dd><p>
Available on Linux and UNIX only, not on Windows systems.
This is a multi-threaded example that does the equivalent of:
</p><pre class="screen">-- Create a database
 CREATE TABLE Tn1(c1 INT AUTOINCREMENT, c2 INT, PRIMARY KEY(c1));
 CREATE TABLE Tn2(c1 INT AUTOINCREMENT, c2 INT, PRIMARY KEY(c1));
 INSERT N million rows into Tn1;
 INSERT INTO Tn2 SELECT * FROM Tn1;
 SELECT COUNT(*) FROM Tn1, Tn2 WHERE Tn1.c1 = Tn2.c1;
</pre><p>
</p><p>
Since Embedded InnoDB  does not support autoincrement,
the program increments the value of <code class="literal">c1</code> explicitly.
</p><p>
This example also doubles as a test to measure the internal speed of the database engine.
We start N threads, each running the above test, but on a self-contained set of tables independent of each other.
The objective of the test is to measure any unnecessary locking issues/contention for resources.
</p></dd><dt><a id="ib_search_c"></a><span class="term"><code class="literal">ib_search.c</code></span></dt><dd><p>
This example demonstrates how to use the Embedded InnoDB search modes.
</p><pre class="screen">-- Create a database
 CREATE TABLE T(c1 VARCHAR(n), c2 VARCHAR(n), c3 INT,
                PRIMARY KEY(c1, c2));
 INSERT INTO T VALUES('abc', 'def', 1);
 INSERT INTO T VALUES('abc', 'zzz', 1);
 INSERT INTO T VALUES('ghi', 'jkl', 2);
 INSERT INTO T VALUES('mno', 'pqr', 3);
 INSERT INTO T VALUES('mno', 'xxx', 3);
 INSERT INTO T VALUES('stu', 'vwx', 4);
 SELECT * FROM T WHERE c1 = 'abc' AND c2 = 'def';
 SELECT * FROM T WHERE c1 = 'abc';
 SELECT * FROM T WHERE c1 &gt;= 'g%';
 SELECT * FROM T WHERE c1 = 'mno' AND c2 &gt;= 'x%';
 SELECT * FROM T WHERE c1 = 'mno' AND c2 &gt;= 'z%';
 DROP TABLE T;
 </pre><p>
</p></dd><dt><a id="ib_status_c"></a><span class="term"><code class="literal">ib_status.c</code></span></dt><dd><p>
This example demonstrates how to check the Embedded InnoDB status variables.
To see how many <code class="literal">fsync()</code> requests have been issued by Embedded InnoDB,
you can check the value of the <code class="literal">fsync_req_done</code> status variable using <code class="literal">ib_status_get_i64()</code>.
</p></dd><dt><a id="ib_test1_c"></a><span class="term"><code class="literal">ib_test1.c</code></span></dt><dd><p>This example does the equivalent of:
</p><pre class="screen">-- Create a database
 CREATE TABLE T(c1 VARCHAR(n), c2 VARCHAR(n), c3 INT,
                PRIMARY KEY(first, last));
 INSERT INTO T VALUES('x', 'y', 1); ...
 SELECT * FROM T;
 UPDATE T SET c3 = c3 + 100 WHERE c1 = 'x';
 SELECT * FROM T;
 DELETE FROM T WHERE c1 = 'x';
 SELECT * FROM T;
 DROP TABLE T;
</pre><p>
</p></dd><dt><a id="ib_test2_c"></a><span class="term"><code class="literal">ib_test2.c</code></span></dt><dd><p>This example does the equivalent of:
</p><pre class="screen">-- Create a database
  FOR 1 TO 100
   CREATE TABLE T(c1 VARCHAR(128), c2 BLOB, c3 INT,
                  PRIMARY KEY(c1));
   FOR 1 TO 10
    BEGIN;
     FOR 1 TO 100
      INSERT INTO T VALUES(RANDOM(STRING), RANDOM(STRING), 0);
     END
     UPDATE T SET c1 = RANDOM(string), c3 = c3 + 1
              WHERE c1 = RANDOM(STRING);
    COMMIT;
   END
   DROP TABLE T;
  END
</pre><p>
</p></dd><dt><a id="ib_test3_c"></a><span class="term"><code class="literal">ib_test3.c</code></span></dt><dd><p>
An example to demonstrate the typed API of Embedded InnoDB.
</p></dd><dt><a id="ib_test5_c"></a><span class="term"><code class="literal">ib_test5.c</code></span></dt><dd><p>
This example is similar to ib_test2.c, except that it demonstrates how to access the clustered index record
via a secondary index.
</p></dd><dt><a id="ib_types_c"></a><span class="term"><code class="literal">ib_types.c</code></span></dt><dd><p>This example demonstrates how to read and write the different column types supported by Embedded InnoDB.
It does the equivalent of of:
</p><pre class="screen"> CREATE TABLE T(
        c1 VARCHAR(n),
        c2 INT NOT NULL,
        c3 FLOAT,
        c4 DOUBLE,
        c5 BLOB,
        PRIMARY KEY(c1)); 
 INSERT INTO T VALUES('x', 1, 2.0, 3.0, 'xxx'); ...
 SELECT * FROM T;
 DROP TABLE T;
</pre><p>
</p></dd><dt><a id="test0aux_c"></a><span class="term"><code class="literal">test0aux.c</code></span></dt><dd><p>This is an auxiliary file with support functions that are used by the other example programs.</p></dd><dt><a id="test0aux_h"></a><span class="term"><code class="literal">test0aux.h</code></span></dt><dd><p>This is the common header file that is included by all the example programs.</p></dd><dt><a id="ib_update_c"></a><span class="term"><code class="literal">ib_update.c</code></span></dt><dd><p>This example demonstrates how to update all records in a table by scanning the table from start to end,
the equivalent of:
</p><pre class="screen">-- Create a database
 CREATE TABLE t(c1 INT, c2 VARCHAR(10), PRIMARY KEY (c1)); 
 FOR I IN 1 ... 10 STEP 2
  INSERT INTO t VALUES(I, CHAR('a' + I)); ...
 END
 SELECT * FROM t;
 UPDATE t SET c1 = c1 / 2;
 SELECT * FROM t;
 DROP TABLE t;
</pre><p>
</p></dd></dl></div></div><div class="glossary" title="Embedded InnoDB Glossary"><div class="titlepage"><div><div><h2 class="title"><a id="glossary"></a>Embedded InnoDB Glossary</h2></div></div></div><p>
These terms are commonly used in information about
the Embedded InnoDB product
and InnoDB in general.
</p><div class="glossdiv" title="A"><h3 class="title">A</h3><dl><dt><a id="glos_acid"></a>ACID</dt><a id="id287640930" class="indexterm"></a><dd><p>
An acronym standing for atomicity, consistency, isolation, and durability.
These properties are all desirable in a database system, and are all
closely tied to the notion of a <span class="bold"><strong>transaction</strong></span>.
The transactional features of InnoDB adhere to the ACID principles.
</p><p>
Transactions are atomic units of work that can be
committed or rolled back.
When a transaction makes multiple changes to the database,
either all the changes succeed when the transaction is committed,
or all the changes are undone when the transaction is rolled back.
</p><p>
The database remains
in a consistent state at all times -- after each commit or rollback, and
while transactions are in progress.
</p><p>
Transactions are protected (isolated) from each other while they are in
progress; they cannot interfere with each other or see each other's
uncommitted data.
This isolation is achieved through the notion of <span class="bold"><strong>locking</strong></span>.
(Expert users can adjust the <span class="bold"><strong>isolation level</strong></span>, trading
off less protection in favor of increased performance, when they can
be sure that the transactions really do not interfere with each other.)
</p><p>
The results of transactions are durable, in that once a commit operation
succeeds, the changes made by that transaction are safe from power failures,
system crashes, race conditions, or other potential dangers that many
non-database applications are vulnerable to.
Durability typically involves writing to disk storage, with a certain
amount of redundancy to protect against power failures or software crashes
during write operations.
(In InnoDB, the <span class="bold"><strong>doublewrite buffer</strong></span> assists with durability.)
</p><p>See Also <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_commit">commit</a>, <a class="glossseealso" href="#glos_rollback">rollback</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_doublewrite_buffer">doublewrite buffer</a>.</p></dd><dt><a id="glos_antelope"></a>Antelope</dt><a id="id287640980" class="indexterm"></a><dd><p>
The code name for the original InnoDB <span class="bold"><strong>file format</strong></span>.
It supports the <span class="bold"><strong>redundant</strong></span>
and <span class="bold"><strong>compact</strong></span> row formats,
but not the newer <span class="bold"><strong>dynamic</strong></span> and
<span class="bold"><strong>compressed</strong></span> row formats available in the
<span class="bold"><strong>Barracuda</strong></span> file format.
</p><p>
You can select the file format to use through
the <code class="literal">innodb_file_format</code> option.
</p><p>See Also <a class="glossseealso" href="#glos_barracuda">Barracuda</a>, <a class="glossseealso" href="#glos_file_format">file format</a>, <a class="glossseealso" href="#glos_ibdata_file">ibdata file</a>, <a class="glossseealso" href="#glos_redundant_row_format">redundant row format</a>, <a class="glossseealso" href="#glos_compact_row_format">compact row format</a>, <a class="glossseealso" href="#glos_dynamic_row_format">dynamic row format</a>, <a class="glossseealso" href="#glos_compressed_row_format">compressed row format</a>, <a class="glossseealso" href="#glos_row_format">row format</a>, <a class="glossseealso" href="#glos_innodb_file_format">innodb_file_format</a>.</p></dd><dt><a id="glos_application_programming_interface"></a>application programming interface (API)</dt><a id="id287641078" class="indexterm"></a><dd><p>
A set of functions and/or procedures.
An API provides a stable set of names and types for functions,
procedures, parameters, and return values.
</p><p>
To work with InnoDB at the API level typically involves building an
application with the Embedded InnoDB library.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_auto_increment"></a>auto-increment</dt><a id="id287641130" class="indexterm"></a><dd><p>
A property of a table column (specified by the <code class="literal">AUTO_INCREMENT</code>
keyword) that automatically adds an ascending sequence of values in the column.
InnoDB supports auto-increment only for primary key columns.
</p><p>
The auto-increment feature is available in the built-in InnoDB storage engine,
and in the InnoDB Plugin.
However, it is not available in Embedded InnoDB applications.
</p><p>
It saves work for the developer, not to have to produce new unique values when
inserting new rows.
It provides useful information for the query optimizer, because the column is
known to be not null and with unique values.
The values from such a column can be used as lookup keys in various contexts,
and because they are auto-generated there is no reason to ever change them;
for this reason, primary key columns are often specified as auto-incrementing.
</p><p>
Auto-increment columns can be problematic with statement-based replication,
because replaying the statements on a slave might not produce the same set
of column values as on the master, due to timing issues.
When you have an auto-incrementing primary key, you can use statement-based
replication only with the setting <code class="literal">innodb_autoinc_lock_mode=1</code>.
If you have <code class="literal">innodb_autoinc_lock_mode=2</code>, which allows higher
concurrency for insert operations,
use <span class="bold"><strong>row-based replication</strong></span> rather than
<span class="bold"><strong>statement-based replication</strong></span>.
The setting <code class="literal">innodb_autoinc_lock_mode=0</code> is the previous
(traditional) default setting and should not be used except for compatibility
purposes.
</p><p>See Also <a class="glossseealso" href="#glos_auto_increment_locking">auto-increment locking</a>, <a class="glossseealso" href="#glos_statement_based_replication">statement-based replication</a>, <a class="glossseealso" href="#glos_row_based_replication">row-based replication</a>, <a class="glossseealso" href="#glos_innodb_autoinc_lock_mode">innodb_autoinc_lock_mode</a>, <a class="glossseealso" href="#glos_row_based_replication">row-based replication</a>, <a class="glossseealso" href="#glos_statement_based_replication">statement-based replication</a>.</p></dd><dt><a id="glos_auto_increment_locking"></a>auto-increment locking</dt><a id="id287641187" class="indexterm"></a><dd><p>
The convenience of an <span class="bold"><strong>auto-increment</strong></span> primary key
involves some tradeoff with concurrency.
In the simplest case, if one transaction is inserting values into the table,
any other transactions must wait to do their own inserts, so that
rows inserted by the first transaction receive consecutive primary key values.
InnoDB includes optimizations, and the
<code class="literal">innodb_autoinc_lock_mode</code> option, so that you can choose how to
trade off between predictable sequences of auto-increment values and maximum
<span class="bold"><strong>concurrency</strong></span> for insert operations.
</p><p>See Also <a class="glossseealso" href="#glos_auto_increment">auto-increment</a>, <a class="glossseealso" href="#glos_concurrency">concurrency</a>, <a class="glossseealso" href="#glos_innodb_autoinc_lock_mode">innodb_autoinc_lock_mode</a>.</p></dd></dl></div><div class="glossdiv" title="B"><h3 class="title">B</h3><dl><dt><a id="glos_b_tree"></a>B-tree</dt><a id="id287641223" class="indexterm"></a><dd><p>
A tree data structure that is popular for use in database indexes.
The structure is kept sorted at all times, enabling fast lookup
for exact matches and ranges (for example, greater than, less than, and
<code class="literal">BETWEEN</code> operators).
</p><p>
Because B-tree nodes can have many children, a B-tree is not the same as a binary tree,
which is limited to 2 children per node.
</p></dd><dt><a id="glos_barracuda"></a>Barracuda</dt><a id="id287641241" class="indexterm"></a><dd><p>
The code name for an InnoDB <span class="bold"><strong>file format</strong></span> that supports
compression for table data.
This file format was first introduced in the InnoDB Plugin.
It supports the <span class="bold"><strong>dynamic</strong></span> and
<span class="bold"><strong>compressed</strong></span> row formats.
You can select it through the <code class="literal">innodb_file_format</code> option.
</p><p>
For maximum compatibility with older InnoDB tables, the default file format
remains <span class="bold"><strong>Antelope</strong></span> and the default row format remains
<span class="bold"><strong>compact</strong></span>, for the built-in InnoDB storage engine,
the InnoDB Plugin, and Embedded InnoDB applications.
</p><p>See Also <a class="glossseealso" href="#glos_antelope">Antelope</a>, <a class="glossseealso" href="#glos_file_format">file format</a>, <a class="glossseealso" href="#glos_ibdata_file">ibdata file</a>, <a class="glossseealso" href="#glos_row_format">row format</a>, <a class="glossseealso" href="#glos_compact_row_format">compact row format</a>, <a class="glossseealso" href="#glos_compressed_row_format">compressed row format</a>, <a class="glossseealso" href="#glos_dynamic_row_format">dynamic row format</a>, <a class="glossseealso" href="#glos_innodb_file_format">innodb_file_format</a>.</p></dd><dt><a id="glos_beta"></a>beta</dt><a id="id287641335" class="indexterm"></a><dd><p>
An early stage in the life of a software product, when it is available
only for evaluation, typically without a definite release number or
a number less than 1.
InnoDB does not use the beta designation, preferring
an <span class="bold"><strong>early adopter</strong></span> phase that can extend over several
point releases, leading to a <span class="bold"><strong>GA</strong></span> release.
</p><p>See Also <a class="glossseealso" href="#glos_early_adopter">early adopter</a>, <a class="glossseealso" href="#glos_ga">GA</a>.</p></dd><dt><a id="glos_buffer_pool"></a>buffer pool</dt><a id="id287641360" class="indexterm"></a><dd><p>
The memory area that holds cached data, read from both tables and indexes.
For efficiency of high-volume read operations, the buffer pool is divided
into <span class="bold"><strong>pages</strong></span> that can potentially hold multiple rows.
For efficiency of cache management, the buffer pool is implemented as a
linked list of pages, so that data that is rarely used can be aged out of
the cache, using a variation of the <span class="bold"><strong>LRU</strong></span> algorithm.
</p><p>See Also <a class="glossseealso" href="#glos_page">page</a>, <a class="glossseealso" href="#glos_lru">LRU</a>.</p></dd></dl></div><div class="glossdiv" title="C"><h3 class="title">C</h3><dl><dt><a id="glos_clustered_index"></a>clustered index</dt><a id="id287641388" class="indexterm"></a><dd><p>
The InnoDB term for a <span class="bold"><strong>primary key</strong></span> index.
This special term signifies that the table storage
is organized based on the values of the primary key columns.
(In the Oracle Database product, this type of table is known as
an <span class="bold"><strong>index-organized table</strong></span>.)
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_primary_key">primary key</a>, <a class="glossseealso" href="#glos_secondary_index">secondary index</a>.</p></dd><dt><a id="glos_column_index"></a>column index</dt><a id="id287641415" class="indexterm"></a><dd><p>
An <span class="bold"><strong>index</strong></span> on a single column.
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_concatenated_index">concatenated index</a>.</p></dd><dt><a id="glos_column_prefix"></a>column prefix</dt><a id="id287641470" class="indexterm"></a><dd><p>
When an index is created with a length specification, such as
<code class="literal">CREATE INDEX idx ON t1 (c1(N))</code>,
only the first N characters of the column value are stored in the index.
Keeping the index prefix small makes the index compact, and the memory
and disk I/O savings help performance.
(Although making the index prefix too small can hinder query optimization
by making rows with different values appear to the query optimizer
to be duplicates.)
</p><p>
For columns containing binary values or long text strings, where sorting is
not a major consideration and storing the entire value in the index would waste
space, the index automatically uses the first N (typically 768) characters
of the value to do lookups and sorts.
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>.</p></dd><dt><a id="glos_commit"></a>commit</dt><a id="id287641491" class="indexterm"></a><dd><p>
A <span class="bold"><strong>SQL</strong></span> statement that ends a <span class="bold"><strong>transaction</strong></span>,
making permanent any changes made by the transaction.
It is the opposite of <span class="bold"><strong>rollback</strong></span>, which undoes
any changes made in the transaction.
</p><p>
InnoDB uses an <span class="bold"><strong>optimistic</strong></span> mechanism for commits,
so that changes can be written to the data files before
the commit actually occurs.
This technique makes the commit itself faster, with the tradeoff
that more work is required in case of a rollback.
</p><p>
By default, MySQL uses the <span class="bold"><strong>auto-commit</strong></span> setting,
which automatically issues a commit following each SQL statement.
</p><p>See Also <a class="glossseealso" href="#glos_rollback">rollback</a>, <a class="glossseealso" href="#glos_sql">SQL</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>.</p></dd><dt><a id="glos_compact_row_format"></a>compact row format</dt><a id="id287641536" class="indexterm"></a><dd><p>
The default InnoDB <span class="bold"><strong>row format</strong></span> since MySQL 5.0.3.
It has a more compact representation for nulls and variable-length fields than
the prior default (<span class="bold"><strong>redundant row format</strong></span>).
</p><p>
Because of the <span class="bold"><strong>B-tree</strong></span> indexes
that make row lookups so fast in InnoDB, there is
little if any performance benefit to keeping all rows the same size.
</p><p>See Also <a class="glossseealso" href="#glos_row_format">row format</a>, <a class="glossseealso" href="#glos_redundant_row_format">redundant row format</a>.</p></dd><dt><a id="glos_compressed_row_format"></a>compressed row format</dt><a id="id287641568" class="indexterm"></a><dd><p>
A <span class="bold"><strong>row format</strong></span> introduced in the InnoDB Plugin,
available as part of the <span class="bold"><strong>Barracuda</strong></span> file format.
Large fields are stored away from the page that holds the
rest of the row data, as in dynamic row format.
Both index pages and the large fields are compressed,
yielding memory and disk savings.
Depending on the structure of the data, the decrease in
memory and disk usage might or might not outweigh the
performance overhead of uncompressing the data as it is used.
</p><p>
Support for compression can be turned on or off
for the <span class="bold"><strong>Embedded InnoDB</strong></span> product as
a build-time option.
</p><p>See Also <a class="glossseealso" href="#glos_row_format">row format</a>, <a class="glossseealso" href="#glos_dynamic_row_format">dynamic row format</a>, <a class="glossseealso" href="#glos_barracuda">Barracuda</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_concatenated_index"></a>concatenated index</dt><a id="id287641604" class="indexterm"></a><dd><p>
An <span class="bold"><strong>index</strong></span> that includes multiple columns.
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_index_prefix">index prefix</a>.</p></dd><dt><a id="glos_concurrency"></a>concurrency</dt><a id="id287641624" class="indexterm"></a><dd><p>
The ability of multiple operations (in database terminology,
<span class="bold"><strong>transactions</strong></span>) to run simultaneously, without
interfering with each other.
Concurrency is also involved with performance, because ideally
the protection for multiple simultaneous transactions works with
a minimum of performance overhead, using efficient mechanisms for
<span class="bold"><strong>locking</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_locking">locking</a>.</p></dd><dt><a id="glos_consistent_read"></a>consistent read</dt><a id="id287641651" class="indexterm"></a><dd><p>
A read operation that uses snapshot information to present query results
based on a point in time, regardless of changes performed by
other transactions running at the same time.
If queried data has been changed by another transaction, the original data is
reconstructed based on the contents of the <span class="bold"><strong>undo log</strong></span>.
This technique avoids some of the <span class="bold"><strong>locking</strong></span> issues that can
reduce <span class="bold"><strong>concurrency</strong></span> by forcing transactions to wait for
other transactions to finish.
</p><p>
With the <span class="bold"><strong>repeatable read</strong></span> isolation level, the snapshot is
based on the time when the first read operation is performed.
With the <span class="bold"><strong>read committed</strong></span> isolation level, the snapshot
is reset to the time of each consistent read operation.
</p><p>
Consistent read is the default mode in which InnoDB processes
<code class="literal">SELECT</code> statements in
<span class="bold"><strong>READ COMMITTED</strong></span> and <span class="bold"><strong>REPEATABLE READ</strong></span>
isolation levels.
A consistent read does not set any locks on the tables it accesses,
and therefore other sessions are free to modify those tables
at the same time a consistent read is being performed on the table.
</p><p>See Also <a class="glossseealso" href="#glos_undo_log">undo log</a>, <a class="glossseealso" href="#glos_concurrency">concurrency</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_mvcc">MVCC</a>, <a class="glossseealso" href="#glos_repeatable_read">repeatable read</a>, <a class="glossseealso" href="#glos_read_committed">read committed</a>, <a class="glossseealso" href="#glos_read_uncommitted">read uncommitted</a>, <a class="glossseealso" href="#glos_serializable_read">serializable read</a>.</p></dd><dt><a id="glos_covering_index"></a>covering index</dt><a id="id287641794" class="indexterm"></a><dd><p>
An <span class="bold"><strong>index</strong></span> that includes all the columns in a query.
It could be a <span class="bold"><strong>column index</strong></span> or a
<span class="bold"><strong>concatenated index</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_column_index">column index</a>, <a class="glossseealso" href="#glos_concatenated_index">concatenated index</a>.</p></dd><dt><a id="glos_crash_recovery"></a>crash recovery</dt><a id="id287641826" class="indexterm"></a><dd><p>
The cleanup activities that occur when InnoDB is started again after a crash.
Changes that were committed before the crash, but not yet written into the
tablespace files, are reconstructed from the <span class="bold"><strong>doublewrite buffer</strong></span>.
When the database is shut down normally, this type of activity is performed
during shutdown by the <span class="bold"><strong>purge</strong></span> operation.
</p><p>
During normal operation, committed data can be stored in the insert buffer
for a period of time before being written to the tablespace files.
There is always a tradeoff between keeping the tablespace files up-to-date,
which introduces performance overhead during normal operation,
and buffering the data, which can make shutdown and crash recovery take longer.
</p><p>See Also <a class="glossseealso" href="#glos_purge">purge</a>, <a class="glossseealso" href="#glos_doublewrite_buffer">doublewrite buffer</a>, <a class="glossseealso" href="#glos_insert_buffer">insert buffer</a>.</p></dd><dt><a id="glos_cursor"></a>cursor</dt><a id="id287641854" class="indexterm"></a><dd><p>
An internal data structure that is used to represent the
result set of a query, or other operation that performs
a search using a SQL <code class="literal">WHERE</code> clause.
It works like an iterator in other high-level languages,
producing each value from the result set as requested.
</p><p>
Although usually SQL handles the processing of cursors for you,
you might delve into the inner workings when dealing with
performance-critical code.
Embedded InnoDB requires you to be familiar with cursors
and to manipulate them using C API calls.
</p><p>See Also <a class="glossseealso" href="#glos_query">query</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_cursor_match_mode"></a>cursor match mode</dt><a id="id287642118" class="indexterm"></a><dd><p>
In Embedded InnoDB, a setting that controls prefetching and locking
when retrieving records through a cursor.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_cursor_search_mode"></a>cursor search mode</dt><a id="id287642132" class="indexterm"></a><dd><p>
In Embedded InnoDB, a setting that determines how precisely a search condition
must match an index key before a comparison succeeds.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd></dl></div><div class="glossdiv" title="D"><h3 class="title">D</h3><dl><dt><a id="glos_data_definition_language"></a>data definition language</dt><a id="id287642149" class="indexterm"></a><dd><p>See <a class="glosssee" href="#glos_ddl">DDL</a>.</p></dd><dt><a id="glos_data_dictionary"></a>data dictionary</dt><a id="id287642160" class="indexterm"></a><dd><p>
A set of tables, controlled by the InnoDB storage engine, that keeps track
of InnoDB-related objects such as tables, indexes, and table columns.
These tables are part of the <span class="bold"><strong>system tablespace</strong></span>.
</p><p>
Because the InnoDB Hot Backup product always backs up the system tablespace,
all backups include the contents of the data dictionary.
</p><p>See Also <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>.</p></dd><dt><a id="glos_data_manipulation_language"></a>data manipulation language</dt><a id="id287642181" class="indexterm"></a><dd><p>See <a class="glosssee" href="#glos_dml">DML</a>.</p></dd><dt><a id="glos_data_files"></a>data files</dt><a id="id287642192" class="indexterm"></a><dd><p>
The files that physically contain the InnoDB table and index data.
There can be a one-to-many relationship between data files and
tables, as in the case of the <span class="bold"><strong>system tablespace</strong></span>,
which can hold multiple InnoDB tables as well as the
<span class="bold"><strong>data dictionary</strong></span>.
There can also be a one-to-one relationship between data files and tables,
as when the <span class="bold"><strong>file-per-table</strong></span> setting is enabled, causing each
newly created table to be stored in a separate <span class="bold"><strong>tablespace</strong></span>.
</p><p>
In Embedded InnoDB, data files are stored by default underneath
the current working directory of the application.
You can specify a different location by calling the configuration APIs.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>, <a class="glossseealso" href="#glos_tablespace">tablespace</a>, <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>, <a class="glossseealso" href="#glos_data_dictionary">data dictionary</a>, <a class="glossseealso" href="#glos_file_per_table">file-per-table</a>.</p></dd><dt><a id="glos_database"></a>database</dt><a id="id287642233" class="indexterm"></a><dd><p>
An InnoDB database is largely defined by its <span class="bold"><strong>data files</strong></span>.
</p><p>
For long-time MySQL users, a database is a familiar notion.
Users coming from an Oracle background will find that the
MySQL meaning of a database is closer to what Oracle calls a schema.
</p><p>
The <span class="bold"><strong>Embedded InnoDB</strong></span> product maps a database to a single directory.
</p><p>See Also <a class="glossseealso" href="#glos_data_files">data files</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_ddl"></a>DDL</dt><a id="id287642263" class="indexterm"></a><dd><p>
Data definition language, a set of <span class="bold"><strong>SQL</strong></span> statements
for manipulating the database itself rather than individual table rows.
Includes all forms of the
<code class="literal">CREATE</code>,
<code class="literal">ALTER</code>, and
<code class="literal">DROP</code>
statements.
Also includes the <code class="literal">TRUNCATE</code> statement, because it works
differently than a <code class="literal">DELETE FROM <em class="replaceable"><code>table_name</code></em></code>
statement, even though the ultimate effect is similar.
</p><p>
DDL statements automatically <span class="bold"><strong>commit</strong></span>
the current <span class="bold"><strong>transaction</strong></span>;
they cannot be <span class="bold"><strong>rolled back</strong></span>.
</p><p>
The API of the <span class="bold"><strong>Embedded InnoDB</strong></span> product currently supports
<code class="literal">CREATE</code> and
<code class="literal">DROP</code> operations, but not
<code class="literal">ALTER</code> operations.
</p><p>See Also <a class="glossseealso" href="#glos_sql">SQL</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_commit">commit</a>, <a class="glossseealso" href="#glos_rollback">rollback</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_deadlock"></a>deadlock</dt><a id="id287642417" class="indexterm"></a><dd><p>
A situation where different <span class="bold"><strong>transactions</strong></span> are unable to proceed, because each
holds a <span class="bold"><strong>lock</strong></span> that the other needs.
Because both transactions are waiting for a resource to become available,
neither will ever release the locks it holds.
</p><p>
A deadlock can occur when the transactions acquire locks on multiple tables, but in the opposite order.
A deadlock can also occur when statements such as <code class="literal">UPDATE</code> or
<code class="literal">SELECT ... FOR UPDATE</code> lock ranges of index records
and <span class="bold"><strong>gaps</strong></span>, with each transaction acquiring
some locks but not others due to a timing issue.
</p><p>
To reduce the possibility of deadlocks, use transactions rather than <code class="literal">LOCK TABLE</code> statements;
keep transactions that insert or update data small enough that they do not stay open for
long periods of time; when different transactions update multiple tables or large ranges of rows,
use the same order of operations (such as <code class="literal">SELECT ... FOR UPDATE</code>) in each transaction;
create indexes on the columns used in <code class="literal">SELECT ... FOR UPDATE</code>
and <code class="literal">UPDATE ... WHERE</code> statements.
The possibility of deadlocks is not affected by the <span class="bold"><strong>isolation level</strong></span>,
because the isolation level changes the behavior of read operations, while deadlocks
occur because of write operations.
</p><p>
If a deadlock does occur, InnoDB detects the condition and
<span class="bold"><strong>rolls back</strong></span> one of the transactions
(the <span class="bold"><strong>victim</strong></span>).
Thus, even if your application logic is perfectly correct, you must
still handle the case where a transaction must be retried.
To monitor how frequently deadlocks occur, use the command
<code class="literal">SHOW ENGINE INNODB STATUS</code>.
</p><p>See Also <a class="glossseealso" href="#glos_lock">lock</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_gap">gap</a>, <a class="glossseealso" href="#glos_concurrency">concurrency</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_rollback">rollback</a>.</p></dd><dt><a id="glos_delete"></a>delete</dt><a id="id287642507" class="indexterm"></a><dd><p>
When InnoDB processes a <code class="literal">DELETE</code> statement,
the rows are immediately marked for deletion
and no longer are returned by queries.
The storage is reclaimed sometime later, during the periodic garbage collection
known as the <span class="bold"><strong>purge</strong></span> operation, performed by a separate thread.
</p><p>See Also <a class="glossseealso" href="#glos_purge">purge</a>.</p></dd><dt><a id="glos_dirty_read"></a>dirty read</dt><a id="id287642565" class="indexterm"></a><dd><p>
An operation that retrieves unreliable data, data that was updated by another transaction
but not yet <span class="bold"><strong>committed</strong></span>.
It is only possible with the <span class="bold"><strong>isolation level</strong></span> known as
<span class="bold"><strong>read uncommitted</strong></span>.
</p><p>
This kind of operation does not adhere to the <span class="bold"><strong>ACID</strong></span> principle of
database design.
It is considered very risky,  because the data
could be <span class="bold"><strong>rolled back</strong></span>, or updated further before
being committed; then, the transaction doing the dirty read would
be using data that was never confirmed as accurate.
</p><p>
Its polar opposite is <span class="bold"><strong>consistent read</strong></span>, where InnoDB
goes to great lengths to ensure that a transaction does not
read information updated by another transaction, even if the other
transaction commits in the meantime.
</p><p>See Also <a class="glossseealso" href="#glos_commit">commit</a>, <a class="glossseealso" href="#glos_rollback">rollback</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_consistent_read">consistent read</a>, <a class="glossseealso" href="#glos_read_uncommitted">read uncommitted</a>, <a class="glossseealso" href="#glos_read_committed">read committed</a>.</p></dd><dt><a id="glos_dml"></a>DML</dt><a id="id287642621" class="indexterm"></a><dd><p>
Data manipulation language, a set of <span class="bold"><strong>SQL</strong></span> statements
for performing insert, update, and delete operations.
The <code class="literal">SELECT</code> statement is sometimes considered as a DML
statement, because the <code class="literal">SELECT ... FOR UPDATE</code> form
is subject to the same considerations for <span class="bold"><strong>locking</strong></span>
as
<code class="literal">INSERT</code>,
<code class="literal">UPDATE</code>, and
<code class="literal">DELETE</code>.
</p><p>
DML statements operate in the context of a <span class="bold"><strong>transaction</strong></span>,
so their effects can be <span class="bold"><strong>committed</strong></span> or
<span class="bold"><strong>rolled back</strong></span> as a single unit.
</p><p>
In the <span class="bold"><strong>Embedded InnoDB</strong></span> product, the equivalent operations are performed
using API calls rather than SQL statements.
</p><p>See Also <a class="glossseealso" href="#glos_sql">SQL</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_commit">commit</a>, <a class="glossseealso" href="#glos_rollback">rollback</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_doublewrite_buffer"></a>doublewrite buffer</dt><a id="id287642699" class="indexterm"></a><dd><p>
InnoDB uses a novel file flush technique called doublewrite.
Before writing <span class="bold"><strong>pages</strong></span> to a data file,
InnoDB first writes them to a contiguous area
called the doublewrite buffer.
Only after the write and the flush to the doublewrite buffer have completed,
does InnoDB write the pages to their proper positions in the data file.
If the operating system crashes in the middle of a page write, InnoDB can later find
a good copy of the page from the doublewrite buffer during
<span class="bold"><strong>crash recovery</strong></span>.
</p><p>
Although data is always written twice, the doublewrite buffer does not require twice
as much I/O overhead or twice as many I/O operations.
Data is written to the buffer itself as a large sequential chunk, with a single
<code class="literal">fsync</code> call to the operating system.
</p><p>
The doublewrite buffer can be turned off by specifying the option
<code class="literal">innodb_doublewrite=0</code>.
</p><p>See Also <a class="glossseealso" href="#glos_crash_recovery">crash recovery</a>, <a class="glossseealso" href="#glos_purge">purge</a>.</p></dd><dt><a id="glos_dynamic_row_format"></a>dynamic row format</dt><a id="id287642737" class="indexterm"></a><dd><p>
A row format introduced in the InnoDB Plugin,
available as part of the <span class="bold"><strong>Barracuda</strong></span> file format.
Because <code class="literal">TEXT</code> and <code class="literal">BLOB</code>
fields are stored outside of the rest of the page that
holds the row data, it is very efficient for rows that
include large objects, resulting in fewer I/O operations
when the large fields do not need to be accessed.
</p><p>See Also <a class="glossseealso" href="#glos_row_format">row format</a>, <a class="glossseealso" href="#glos_barracuda">Barracuda</a>.</p></dd></dl></div><div class="glossdiv" title="E"><h3 class="title">E</h3><dl><dt><a id="glos_early_adopter"></a>early adopter</dt><a id="id287642804" class="indexterm"></a><dd><p>
A stage similar to beta, when a software product is typically evaluated
for performance, functionality, and compatibility in a non-mission-critical setting.
InnoDB uses the <span class="bold"><strong>early adopter</strong></span> designation rather than
<span class="bold"><strong>beta</strong></span>, through a succession of point releases leading up to a
<span class="bold"><strong>GA</strong></span> release.
</p><p>See Also <a class="glossseealso" href="#glos_beta">beta</a>, <a class="glossseealso" href="#glos_ga">GA</a>.</p></dd><dt><a id="glos_embedded_innodb"></a>Embedded InnoDB</dt><a id="id287642833" class="indexterm"></a><dd><p>
A product that allows the capabilities of the InnoDB storage engine to
be embedded within an application program, the same as any other library,
without the need for a full MySQL installation.
Instead of using SQL, the application manipulates data using C API calls.
It is intended for applications that require maximal performance and
minimal configuration and setup, such as in the embedded systems market.
</p><p>See Also <a class="glossseealso" href="#glos_cursor">cursor</a>.</p></dd><dt><a id="glos_eviction"></a>eviction</dt><a id="id287642846" class="indexterm"></a><dd><p>
The process of removing an item from a cache or other temporary
storage area.
Often, but not always, uses the the LRU algorithm to determine
which item to remove.
</p><p>See Also <a class="glossseealso" href="#glos_lru">LRU</a>.</p></dd><dt><a id="glos_exclusive_lock"></a>exclusive lock</dt><a id="id287642860" class="indexterm"></a><dd><p>
A kind of <span class="bold"><strong>lock</strong></span> that prevents
any other <span class="bold"><strong>transaction</strong></span> from locking the same row.
Depending on the transaction <span class="bold"><strong>isolation level</strong></span>,
this kind of lock might block other transactions from
writing to the same row, or might also block other
transactions from reading the same row.
The default InnoDB isolation level, <span class="bold"><strong>REPEATABLE READ</strong></span>,
enables higher <span class="bold"><strong>concurrency</strong></span>
by allowing transactions to read rows that have exclusive locks,
a technique known as <span class="bold"><strong>consistent read</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_lock">lock</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_concurrency">concurrency</a>, <a class="glossseealso" href="#glos_repeatable_read">repeatable read</a>, <a class="glossseealso" href="#glos_consistent_read">consistent read</a>, <a class="glossseealso" href="#glos_shared_lock">shared lock</a>.</p></dd></dl></div><div class="glossdiv" title="F"><h3 class="title">F</h3><dl><dt><a id="glos_fast_index_creation"></a>fast index creation</dt><a id="id287642918" class="indexterm"></a><dd><p>
A capability first introduced in the InnoDB Plugin, that speeds up
creation of secondary indexes by avoiding the need to completely rewrite the associated table.
The speedup applies to dropping secondary indexes also.
</p><p>
Because index maintenance can add performance overhead to many data transfer
operations, consider doing operations such as <code class="literal">ALTER TABLE ... ENGINE=INNODB</code>
or <code class="literal">INSERT INTO ... SELECT * FROM ...</code>
without any secondary indexes in place, and creating the indexes afterwards.
</p><p>
Even if you do not use the InnoDB Plugin as your primary storage engine, you
can take advantage of this capability by enabling the Plugin temporarily,
just to create or drop indexes, and then switch back to the built-in
InnoDB storage engine for normal use.
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_secondary_index">secondary index</a>.</p></dd><dt><a id="glos_fast_shutdown"></a>fast shutdown</dt><a id="id287642983" class="indexterm"></a><dd><p>
A shutdown procedure that is required before installation of the InnoDB Plugin.
From the MySQL command line, issue the following
command before performing the shutdown:
</p><pre class="programlisting">SET GLOBAL innodb_fast_shutdown=0;</pre><p>
To make this type of shutdown the default, specify by the configuration parameter
<code class="literal">innodb_fast_shutdown=0</code>.
</p><p>See Also <a class="glossseealso" href="#glos_slow_shutdown">slow shutdown</a>, <a class="glossseealso" href="#glos_shutdown">shutdown</a>.</p></dd><dt><a id="glos_file_format"></a>file format</dt><a id="id287643008" class="indexterm"></a><dd><p>
The format used by InnoDB for its data files named <code class="literal">ibdata1</code>,
<code class="literal">ibdata2</code>, and so on.
Each file format supports one or more row formats.
</p><p>See Also <a class="glossseealso" href="#glos_antelope">Antelope</a>, <a class="glossseealso" href="#glos_barracuda">Barracuda</a>, <a class="glossseealso" href="#glos_ibdata_file">ibdata file</a>, <a class="glossseealso" href="#glos_row_format">row format</a>.</p></dd><dt><a id="glos_file_per_table"></a>file-per-table</dt><a id="id287643037" class="indexterm"></a><dd><p>
A general name for the setting controlled by the <code class="literal">innodb_file_per_table</code> option.
For each table created while this setting is in effect, the data is stored in a separate file rather
than in the system tablespace.
When table data is stored in a separate file, you have more flexibility to choose non-default
<span class="bold"><strong>file formats</strong></span> and <span class="bold"><strong>row formats</strong></span>, which are required for features
such as data compression.
The <code class="literal">TRUNCATE TABLE</code> operation is also much faster, and the reclaimed space can be used by
the operating system rather than remaining reserved for InnoDB.
</p><p>The InnoDB Hot Backup product is more flexible for tables that are in their own files.
For example, tables can be excluded from a backup, but only if they are in separate files.
Thus, this setting is suitable for tables that are backed up less frequently or on a different schedule.
</p><p>
In the <span class="bold"><strong>Embedded InnoDB</strong></span> product, the options do not use the <code class="literal">innodb_</code>
prefix, so the option name there is <code class="literal">file_per_table</code>.
</p><p>See Also <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>, <a class="glossseealso" href="#glos_ibdata_file">ibdata file</a>, <a class="glossseealso" href="#glos_innodb_file_per_table">innodb_file_per_table</a>, <a class="glossseealso" href="#glos_file_format">file format</a>, <a class="glossseealso" href="#glos_row_format">row format</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_fixed_row_format"></a>fixed row format</dt><a id="id287643096" class="indexterm"></a><dd><p>
This row format is used by the MyISAM storage engine, not by InnoDB.
If you create an InnoDB table with the option
<code class="literal">row_format=fixed</code>, InnoDB translates this option
to use the <span class="bold"><strong>compact row format</strong></span> instead, although the
<code class="literal">fixed</code> value might still show up in output
such as <code class="literal">SHOW TABLE STATUS</code> reports.
</p><p>See Also <a class="glossseealso" href="#glos_row_format">row format</a>, <a class="glossseealso" href="#glos_compact_row_format">compact row format</a>.</p></dd><dt><a id="glos_full_table_scan"></a>full table scan</dt><a id="id287643131" class="indexterm"></a><dd><p>
An operation that requires reading the entire contents of a table, rather than
just selected portions using an index.
Typically performed either with small lookup tables, or in data warehousing
situations with large tables where all available data is aggregated and analyzed.
How frequently these operations occur, and the sizes of the tables
relative to available memory, have implications for the algorithms used in
query optimization and managing the buffer pool.
</p><p>
The purpose of <span class="bold"><strong>indexes</strong></span> is to allow lookups for specific values or
ranges of values within a large table, thus avoiding full table scans
when practical.
</p><p>See Also <a class="glossseealso" href="#glos_buffer_pool">buffer pool</a>, <a class="glossseealso" href="#glos_lru">LRU</a>, <a class="glossseealso" href="#glos_index">index</a>.</p></dd></dl></div><div class="glossdiv" title="G"><h3 class="title">G</h3><dl><dt><a id="glos_ga"></a>GA</dt><a id="id287643159" class="indexterm"></a><dd><p>
'Generally available', the stage when a software product leaves beta
and is available for sale, official support, and production use.
</p><p>See Also <a class="glossseealso" href="#glos_beta">beta</a>, <a class="glossseealso" href="#glos_early_adopter">early adopter</a>.</p></dd><dt><a id="glos_gap"></a>gap</dt><a id="id287643210" class="indexterm"></a><dd><p>
A place in an <span class="bold"><strong>index</strong></span> data structure where new values
could be inserted.
When you lock a set of rows with a statement such as
<code class="literal">SELECT ... FOR UPDATE</code>,
InnoDB can create locks that apply to the gaps as well as the actual values
in the index.
For example, if you select all values greater than 10 for update,
a gap lock prevents another transaction from inserting a new value
that is greater than 10.
</p><p>
Gap locks are part of the tradeoff between performance and
<span class="bold"><strong>concurrency</strong></span>, and are used in some
transaction <span class="bold"><strong>isolation levels</strong></span> and not others.
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_concurrency">concurrency</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_supremum_record">supremum record</a>, <a class="glossseealso" href="#glos_infimum_record">infimum record</a>.</p></dd></dl></div><div class="glossdiv" title="H"><h3 class="title">H</h3><dl><dt><a id="glos_handle"></a>handle</dt><a id="id287643255" class="indexterm"></a><dd><p>
In the <span class="bold"><strong>Embedded InnoDB</strong></span> product,
special types that are returned by various create and open calls.
You do not manipulate their contents directly.
You just pass the returned handles as parameters to subsequent function calls.
</p><p>
The Embedded InnoDB API defines handles to represent
<span class="bold"><strong>tuples</strong></span>,
<span class="bold"><strong>transactions</strong></span>,
<span class="bold"><strong>cursors</strong></span>,
<span class="bold"><strong>table schemas</strong></span>,
and
<span class="bold"><strong>index schemas</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>, <a class="glossseealso" href="#glos_tuple">tuple</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_cursor">cursor</a>, <a class="glossseealso" href="#glos_table_schema">table schema</a>, <a class="glossseealso" href="#glos_index_schema">index schema</a>.</p></dd></dl></div><div class="glossdiv" title="I"><h3 class="title">I</h3><dl><dt><a id="glos_ib_logfile"></a>ib_logfile</dt><a id="id287643313" class="indexterm"></a><dd><p>
A set of files,
typically named <code class="literal">ib_logfile0</code> and <code class="literal">ib_logfile1</code>,
that form the <span class="bold"><strong>redo log</strong></span>.
These files record statements that attempt to change data in InnoDB tables.
These statements are replayed automatically to correct data written by incomplete transactions,
on startup following a crash.
</p><p>
This data can not be used for manual recovery; for that type of operation, use the
<span class="bold"><strong>binary log</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_redo_log">redo log</a>.</p></dd><dt><a id="glos_ibdata_file"></a>ibdata file</dt><a id="id287643381" class="indexterm"></a><dd><p>
A set of files with names such as
<code class="literal">ibdata1</code>,
<code class="literal">ibdata2</code>,
and so on,
that make up the InnoDB <span class="bold"><strong>system tablespace</strong></span>.
These files contain metadata about InnoDB tables,
and can contain some or all of the table data also
(depending on whether the file-per-table option is
in effect when each table is created).
</p><p>See Also <a class="glossseealso" href="#glos_antelope">Antelope</a>, <a class="glossseealso" href="#glos_barracuda">Barracuda</a>, <a class="glossseealso" href="#glos_file_format">file format</a>, <a class="glossseealso" href="#glos_file_per_table">file-per-table</a>, <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>.</p></dd><dt><a id="glos_index"></a>index</dt><a id="id287643417" class="indexterm"></a><dd><p>
A data structure that provides a fast lookup capability for rows of
a table, typically by forming a tree structure representing all the
values of a particular column or set of columns.
</p><p>See Also <a class="glossseealso" href="#glos_clustered_index">clustered index</a>, <a class="glossseealso" href="#glos_primary_key">primary key</a>, <a class="glossseealso" href="#glos_secondary_index">secondary index</a>, <a class="glossseealso" href="#glos_b_tree">B-tree</a>, <a class="glossseealso" href="#glos_column_index">column index</a>, <a class="glossseealso" href="#glos_concatenated_index">concatenated index</a>, <a class="glossseealso" href="#glos_covering_index">covering index</a>, <a class="glossseealso" href="#glos_partial_index">partial index</a>.</p></dd><dt><a id="glos_index_prefix"></a>index prefix</dt><a id="id287643447" class="indexterm"></a><dd><p>
In an <span class="bold"><strong>index</strong></span> that applies to multiple columns (known as a
<span class="bold"><strong>concatenated index</strong></span>), 
the initial or leading columns of the index.
A query that references the first 1, 2, 3, and so on columns of a
<span class="bold"><strong>concatenated index</strong></span> can use the index,
even if the query does not reference all the columns in the index.
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_concatenated_index">concatenated index</a>.</p></dd><dt><a id="glos_index_schema"></a>index schema</dt><a id="id287643477" class="indexterm"></a><dd><p>
In the <span class="bold"><strong>Embedded InnoDB</strong></span> product,
representation of the columns in an <span class="bold"><strong>index</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>, <a class="glossseealso" href="#glos_index">index</a>.</p></dd><dt><a id="glos_infimum_record"></a>infimum record</dt><a id="id287643501" class="indexterm"></a><dd><p>
A <span class="bold"><strong>pseudo-record</strong></span> in an index,
representing the <span class="bold"><strong>gap</strong></span> below the smallest value in that index.
If a transaction has a statement such as
<code class="literal">SELECT ... FOR UPDATE ... WHERE col &lt; 10;</code>,
and the smallest value in the column is 5,
it is a lock on the infimum record that
prevents other transactions from inserting even smaller
values such as 0, -10, and so on.
</p><p>See Also <a class="glossseealso" href="#glos_gap">gap</a>, <a class="glossseealso" href="#glos_supremum_record">supremum record</a>, <a class="glossseealso" href="#glos_pseudo_record">pseudo-record</a>.</p></dd><dt><a id="glos_innodb_autoinc_lock_mode"></a>innodb_autoinc_lock_mode</dt><a id="id287643568" class="indexterm"></a><dd><p>
The option that controls the algorithm used for
<span class="bold"><strong>auto-increment locking</strong></span>.
When you have an auto-incrementing primary key, you can use statement-based
replication only with the setting <code class="literal">innodb_autoinc_lock_mode=1</code>.
This setting is known as <span class="bold"><strong>consecutive</strong></span> lock mode, because
multi-row inserts within a transaction receive consecutive auto-increment values.
If you have <code class="literal">innodb_autoinc_lock_mode=2</code>, which allows higher
concurrency for insert operations, use row-based replication rather than
statement-based replication.
This setting is known as <span class="bold"><strong>interleaved</strong></span> lock mode, because
multiple multi-row insert statements running at the same time
can receive autoincrement values that are interleaved.
The setting <code class="literal">innodb_autoinc_lock_mode=0</code> is the previous
(traditional) default setting and should not be used except for compatibility
purposes.
</p><p>See Also <a class="glossseealso" href="#glos_auto_increment_locking">auto-increment locking</a>.</p></dd><dt><a id="glos_innodb_file_format"></a>innodb_file_format</dt><a id="id287643609" class="indexterm"></a><dd><p>
A setting that determines the <span class="bold"><strong>file format</strong></span> for all
<span class="bold"><strong>tablespaces</strong></span> created after you specify a value for this option.
To create tablespaces other than the <span class="bold"><strong>system tablespace</strong></span>,
you must use the <span class="bold"><strong>file-per-table</strong></span> option also.
</p><p>See Also <a class="glossseealso" href="#glos_file_format">file format</a>, <a class="glossseealso" href="#glos_tablespace">tablespace</a>, <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>, <a class="glossseealso" href="#glos_antelope">Antelope</a>, <a class="glossseealso" href="#glos_barracuda">Barracuda</a>, <a class="glossseealso" href="#glos_file_per_table">file-per-table</a>, <a class="glossseealso" href="#glos_innodb_file_per_table">innodb_file_per_table</a>.</p></dd><dt><a id="glos_innodb_file_per_table"></a>innodb_file_per_table</dt><a id="id287643654" class="indexterm"></a><dd><p>
The option that allows you to use the <span class="bold"><strong>file-per-table</strong></span> setting,
which stores newly created tables in their own data files, outside the
<span class="bold"><strong>system tablespace</strong></span>.
This option is needed to take full advantage of many other features, such as
such as table compression in the InnoDB Plugin,
or backups of named tables in InnoDB Hot Backup.
</p><p>
This option was once static, but can now be set using the
<code class="literal">SET GLOBAL</code> command.
</p><p>See Also <a class="glossseealso" href="#glos_data_files">data files</a>, <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>, <a class="glossseealso" href="#glos_file_per_table">file-per-table</a>.</p></dd><dt><a id="glos_insert_buffer"></a>insert buffer</dt><a id="id287643722" class="indexterm"></a><dd><p>
A special index data structure that holds values that are newly inserted into
secondary indexes.
These values could result from both SQL <code class="literal">INSERT</code>
or <code class="literal">UPDATE</code> statements.
Periodically (during times when the system is mostly idle,
and during a normal shutdown or a slow shutdown),
the new index values are written to disk,
merged with the existing values.
The merge operation can write the disk blocks for a series of index values more efficiently
than if each value were written to disk immediately.
</p><p>
The insert buffer is not used if the relevant page from the secondary index
is already in the buffer pool, because that change can be made quickly in memory.
If the relevant page from the secondary index is brought into the buffer pool
while associated changes are still in the insert buffer, the changes for that index
page are merged immediately.
</p><p>
The insert buffer is not used if the secondary index is unique,
because the uniqueness of new values cannot be verified before
the new entries are written out.
</p><p>
Physically, the insert buffer is part of the <span class="bold"><strong>system tablespace</strong></span>, so that in theory,
the new index data could remain buffered across database restarts.
</p><p>
To see information about the current data in the insert buffer, issue the
<code class="literal">SHOW INNODB STATUS</code> command.
</p><p>See Also <a class="glossseealso" href="#glos_crash_recovery">crash recovery</a>, <a class="glossseealso" href="#glos_purge">purge</a>, <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>.</p></dd><dt><a id="glos_intention_exclusive_lock"></a>intention exclusive lock</dt><a id="id287643767" class="indexterm"></a><dd><p>See <a class="glosssee" href="#glos_intention_lock">intention lock</a>.</p></dd><dt><a id="glos_intention_lock"></a>intention lock</dt><a id="id287643779" class="indexterm"></a><dd><p>
A kind of <span class="bold"><strong>lock</strong></span> that applies to the table level, used to indicate
what kind of lock the transaction intends to acquire on rows in the table.
Different transactions can acquire different kinds of intention locks on the
same table, but the first transaction to acquire an <span class="bold"><strong>intention exclusive</strong></span> (IX)
lock on a table prevents other transactions from acquiring any S or X locks
on the table.
Conversely, the first transaction to acquire an <span class="bold"><strong>intention shared</strong></span> (IS) lock
on a table prevents other transactions from acquiring any X locks
on the table.
The two-phase process allows the lock requests to be resolved in order,
without blocking locks and corresponding operations that are compatible.
</p><p>See Also <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_lock_mode">lock mode</a>, <a class="glossseealso" href="#glos_lock">lock</a>.</p></dd><dt><a id="glos_intention_shared_lock"></a>intention shared lock</dt><a id="id287643847" class="indexterm"></a><dd><p>See <a class="glosssee" href="#glos_intention_lock">intention lock</a>.</p></dd><dt><a id="glos_isolation_level"></a>isolation level</dt><a id="id287643859" class="indexterm"></a><dd><p>
One of the foundations of database processing.
Isolation is the <span class="bold"><strong>I</strong></span>
in the acronym <span class="bold"><strong>ACID</strong></span>; the isolation level is the setting that
fine-tunes the balance between performance and reliability, consistency,
and reproducibility of results when multiple <span class="bold"><strong>transactions</strong></span> are
making changes and performing queries at the same time.
</p><p>
From highest amount of consistency and protection to the least, the
isolation levels supported by InnoDB are:
<span class="bold"><strong>serializable read</strong></span>,
<span class="bold"><strong>repeatable read</strong></span>,
<span class="bold"><strong>consistent read</strong></span>,
and
<span class="bold"><strong>read uncommitted</strong></span>.
</p><p>
With the built-in InnoDB storage engine and the InnoDB Plugin, many
users can keep the default isolation level (<span class="bold"><strong>repeatable read</strong></span>)
for all operations.
Expert users might choose the <span class="bold"><strong>read committed</strong></span> level as they push the
boundaries of scalability with OLTP processing, or during data warehousing
operations where minor inconsistencies do not affect the aggregate results
of large amounts of data.
The levels on the edges (<span class="bold"><strong>serializable read</strong></span> and
<span class="bold"><strong>read uncommitted</strong></span>) change the
processing behavior to such an extent that they are rarely used.
</p><p>
For applications that use the Embedded InnoDB product, the isolation
level must be specified for each transaction.
Because Embedded InnoDB is likely to be used in performance-critical
situations, choosing the isolation level for each transaction can be
an important part of the planning process.
</p><p>See Also <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_repeatable_read">repeatable read</a>, <a class="glossseealso" href="#glos_consistent_read">consistent read</a>, <a class="glossseealso" href="#glos_serializable_read">serializable read</a>, <a class="glossseealso" href="#glos_read_uncommitted">read uncommitted</a>.</p></dd></dl></div><div class="glossdiv" title="L"><h3 class="title">L</h3><dl><dt><a id="glos_latch"></a>latch</dt><a id="id287643942" class="indexterm"></a><dd><p>
A lightweight structure used internally by InnoDB to implement a
<span class="bold"><strong>lock</strong></span>.
Often used interchangeably with <span class="bold"><strong>mutex</strong></span>.
Certain latches are the focus of performance tuning within the
InnoDB storage engine, such as the <span class="bold"><strong>data dictionary</strong></span> mutex.
</p><p>See Also <a class="glossseealso" href="#glos_lock">lock</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_mutex">mutex</a>, <a class="glossseealso" href="#glos_data_dictionary">data dictionary</a>.</p></dd><dt><a id="glos_lock"></a>lock</dt><a id="id287644011" class="indexterm"></a><dd><p>
The high-level notion of an object that controls access to a resource,
such as a table, row, or internal data structure,
as part of a <span class="bold"><strong>locking</strong></span> strategy.
For intensive performance tuning, you might delve into the actual
structures that implement locks, such as <span class="bold"><strong>mutexes</strong></span>
and <span class="bold"><strong>latches</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_lock_mode">lock mode</a>, <a class="glossseealso" href="#glos_mutex">mutex</a>, <a class="glossseealso" href="#glos_latch">latch</a>, <a class="glossseealso" href="#glos_pthreads">Pthreads</a>.</p></dd><dt><a id="glos_locking"></a>locking</dt><a id="id287644048" class="indexterm"></a><dd><p>
The system of protecting a <span class="bold"><strong>transaction</strong></span> from seeing or changing
data that is being queried or changed by other transactions.
The locking strategy must balance reliability and consistency of database
operations (the principles of the <span class="bold"><strong>ACID</strong></span> philosophy)
against the performance needed for good <span class="bold"><strong>concurrency</strong></span>.
Fine-tuning the locking strategy often involves choosing an
<span class="bold"><strong>isolation level</strong></span> and ensuring all your database operations
are safe and reliable for that isolation level.
</p><p>See Also <a class="glossseealso" href="#glos_lock">lock</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_mutex">mutex</a>, <a class="glossseealso" href="#glos_latch">latch</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_concurrency">concurrency</a>.</p></dd><dt><a id="glos_lock_mode"></a>lock mode</dt><a id="id287644126" class="indexterm"></a><dd><p>
A shared (S) lock allows a transaction to read a row.
Multiple transactions can acquire an S lock on that same row
at the same time.
</p><p>
An exclusive (X) lock allows a transaction to update or delete a row.
No other transaction can acquire any kind of lock on that same row
at the same time.
</p><p>
<span class="bold"><strong>Intention locks</strong></span> apply to the table level, and are used to indicate
what kind of lock the transaction intends to acquire on rows in the table.
Different transactions can acquire different kinds of intention locks on the
same table, but the first transaction to acquire an intention exclusive (IX)
lock on a table prevents other transactions from acquiring any S or X locks
on the table.
Conversely, the first transaction to acquire an intention shared (IS) lock
on a table prevents other transactions from acquiring any X locks
on the table.
The two-phase process allows the lock requests to be resolved in order,
without blocking locks and corresponding operations that are compatible.
</p><p>See Also <a class="glossseealso" href="#glos_lock">lock</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_intention_lock">intention lock</a>.</p></dd><dt><a id="glos_lru"></a>LRU</dt><a id="id287644153" class="indexterm"></a><dd><p>
An acronym meaning <span class="quote">“<span class="quote">least recently used</span>”</span>,
a common method for managing storage areas.
The items that have not been used
recently are removed, when space is needed to
cache newer items.
InnoDB uses the LRU mechanism by default to manage
the <span class="bold"><strong>pages</strong></span> within
the <span class="bold"><strong>buffer pool</strong></span>, but makes exceptions in
cases where a page might be read only a single time, such as during a full-table scan.
The amount that the buffer cache policy differs from the strict LRU algorithm is governed
by the options
<code class="literal">innodb_old_blocks_pct</code>
and
<code class="literal">innodb_old_blocks_time</code>.
</p><p>See Also <a class="glossseealso" href="#glos_buffer_pool">buffer pool</a>, <a class="glossseealso" href="#glos_eviction">eviction</a>.</p></dd></dl></div><div class="glossdiv" title="M"><h3 class="title">M</h3><dl><dt><a id="glos_multiversion_concurrency_control"></a>multiversion concurrency control</dt><a id="id287644194" class="indexterm"></a><dd><p>See <a class="glosssee" href="#glos_mvcc">MVCC</a>.</p></dd><dt><a id="glos_mutex"></a>mutex</dt><a id="id287644204" class="indexterm"></a><dd><p>
Informal abbreviation for <span class="quote">“<span class="quote">mutex variable</span>”</span>.
The low-level data structure that InnoDB uses to represent and enforce locks.
Mutex itself is short for <span class="quote">“<span class="quote">mutual exclusion</span>”</span>; once the lock is acquired,
any other process, thread, and so on is prevented from acquiring the same lock.
</p><p>See Also <a class="glossseealso" href="#glos_pthreads">Pthreads</a>, <a class="glossseealso" href="#glos_lock">lock</a>, <a class="glossseealso" href="#glos_locking">locking</a>.</p></dd><dt><a id="glos_mvcc"></a>MVCC</dt><a id="id287644264" class="indexterm"></a><dd><p>
Acronym for multiversion concurrency control.
This technique allows InnoDB transactions with certain <span class="bold"><strong>isolation levels</strong></span>
perform <span class="bold"><strong>consistent read</strong></span> operations; that is, to
query rows that are being updated by other transactions, and see the values from
before those updates occurred.
This is a powerful technique to increase <span class="bold"><strong>concurrency</strong></span>, by allowing
queries to proceed without waiting due to <span class="bold"><strong>locks</strong></span> held by the
other transactions.
</p><p>
This technique is not universal in the database world.
Some other database products, and some other storage engines within MySQL,
do not support it.
</p><p>See Also <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_consistent_read">consistent read</a>, <a class="glossseealso" href="#glos_concurrency">concurrency</a>, <a class="glossseealso" href="#glos_lock">lock</a>.</p></dd></dl></div><div class="glossdiv" title="N"><h3 class="title">N</h3><dl><dt><a id="glos_null"></a>NULL</dt><a id="id287644309" class="indexterm"></a><dd><p>
A special value in <span class="bold"><strong>SQL</strong></span>, indicating the absence of data.
Any arithmetic operation or equality test involving a <code class="literal">NULL</code> value,
in turn produces a <code class="literal">NULL</code> result.
(Thus it is similar to the IEEE floating-point concept of NaN,
<span class="bold"><strong>not a number</strong></span>.)
Any aggregate calculation such as <code class="literal">AVG()</code>
ignores rows with <code class="literal">NULL</code> values, when determining how many rows
to divide by.
The only test that works with <code class="literal">NULL</code> values uses the SQL idioms
<code class="literal">IS NULL</code> or <code class="literal">IS NOT NULL</code>.
</p><p>
<code class="literal">NULL</code> values play a part in index operations, because for performance
a database must minimize the overhead of keeping track of missing data values, 
Typically, <code class="literal">NULL</code> values are not represented in an index, because a query that
tests an indexed column using a standard comparison operator could never match
a row with a <code class="literal">NULL</code> value for that column.
For the same reason, unique indexes do not prevent <code class="literal">NULL</code> values; those
values simply are not represented in the index.
Declaring a <code class="literal">NOT NULL</code> constraint on a column provides
reassurance that there are no rows left out of the index, allowing for
better query optimization (accurate counting of rows and estimation of
whether to use the index).
</p><p>
Because the <span class="bold"><strong>primary key</strong></span> must be able
to uniquely identify every row in the table,
a single-column primary key cannot contain any <code class="literal">NULL</code> values, and a multi-column
primary key cannot contain any rows with <code class="literal">NULL</code> values in all columns.
</p><p>
Although the Oracle database allows a <code class="literal">NULL</code> value to be concatenated with a string,
InnoDB treats the result of such an operation as <code class="literal">NULL</code>.
</p><p>See Also <a class="glossseealso" href="#glos_sql">SQL</a>, <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_primary_key">primary key</a>.</p></dd></dl></div><div class="glossdiv" title="P"><h3 class="title">P</h3><dl><dt><a id="glos_page"></a>page</dt><a id="id287644590" class="indexterm"></a><dd><p>
A unit representing how much data InnoDB transfers
at any one time between disk (the <span class="bold"><strong>data files</strong></span>) and
memory (the <span class="bold"><strong>buffer pool</strong></span>).
A page can contain one or more rows, depending on how much
data is in each row.
If a row does not fit entirely into a single page,
InnoDB sets up additional pointer-style data structures so that
the information about the row can be stored in one page.
</p><p>
One way to fit more data in each page is to use
<span class="bold"><strong>compressed row format</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_data_files">data files</a>, <a class="glossseealso" href="#glos_buffer_pool">buffer pool</a>, <a class="glossseealso" href="#glos_page_size">page size</a>, <a class="glossseealso" href="#glos_compressed_row_format">compressed row format</a>.</p></dd><dt><a id="glos_page_size"></a>page size</dt><a id="id287644626" class="indexterm"></a><dd><p>
Currently, this value is fixed at 16 kilobytes.
This is considered a reasonable compromise: large
enough to hold the data for most rows,
yet small enough to minimize the performance overhead
of transferring unneeded data to memory.
Other values are not tested or supported.
</p><p>See Also <a class="glossseealso" href="#glos_page">page</a>.</p></dd><dt><a id="glos_partial_index"></a>partial index</dt><a id="id287644641" class="indexterm"></a><dd><p>
An <span class="bold"><strong>index</strong></span> that represents only part of a column value,
typically the first N characters (the <span class="bold"><strong>prefix</strong></span>)
of a long <code class="literal">VARCHAR</code> value.
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_index_prefix">index prefix</a>.</p></dd><dt><a id="glos_prefix"></a>prefix</dt><a id="id287644669" class="indexterm"></a><dd><p>See <a class="glosssee" href="#glos_index_prefix">index prefix</a>.</p></dd><dt><a id="glos_primary_key"></a>primary key</dt><a id="id287644680" class="indexterm"></a><dd><p>
A set of columns --
and by implication, the index based on this set of columns --
that can uniquely identify every row in a table.
As such, it must be a unique index that does not contain any <code class="literal">NULL</code> values.
</p><p>
InnoDB requires that every table has such an index
(also called the <span class="bold"><strong>clustered index</strong></span>
or <span class="bold"><strong>cluster index</strong></span>),
and organizes the table storage based on the column values of the primary key.
</p><p>See Also <a class="glossseealso" href="#glos_clustered_index">clustered index</a>, <a class="glossseealso" href="#glos_index">index</a>.</p></dd><dt><a id="glos_pseudo_record"></a>pseudo-record</dt><a id="id287644712" class="indexterm"></a><dd><p>
An artificial record in an index, used for <span class="bold"><strong>locking</strong></span> key values or ranges
that do not currently exist.
</p><p>See Also <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_supremum_record">supremum record</a>, <a class="glossseealso" href="#glos_infimum_record">infimum record</a>.</p></dd><dt><a id="glos_pthreads"></a>Pthreads</dt><a id="id287644734" class="indexterm"></a><dd><p>
The POSIX threads standard, which defines an API for threading and locking
operations on UNIX and Linux systems.
On UNIX and Linux systems, InnoDB uses this implementation for mutexes.
</p><p>See Also <a class="glossseealso" href="#glos_mutex">mutex</a>, <a class="glossseealso" href="#glos_lock">lock</a>.</p></dd><dt><a id="glos_purge"></a>purge</dt><a id="id287644750" class="indexterm"></a><dd><p>
A type of garbage collection performed by a separate thread,
running on a periodic schedule.
The purge includes these actions:
removing obsolete values from indexes; physically removing rows that were marked for
deletion by previous <code class="literal">DELETE</code> statements.
</p><p>See Also <a class="glossseealso" href="#glos_delete">delete</a>, <a class="glossseealso" href="#glos_crash_recovery">crash recovery</a>, <a class="glossseealso" href="#glos_doublewrite_buffer">doublewrite buffer</a>.</p></dd></dl></div><div class="glossdiv" title="Q"><h3 class="title">Q</h3><dl><dt><a id="glos_query"></a>query</dt><a id="id287644811" class="indexterm"></a><dd><p>
An operation that reads information from
one or more <span class="bold"><strong>tables</strong></span>
in a <span class="bold"><strong>database</strong></span>.
Depending on the organization of data and the
parameters of the query, the lookup might be optimized
by consulting an <span class="bold"><strong>index</strong></span>.
</p><p>
Normally with MySQL, queries are coded using SQL.
(Even if you are using some other language for the main
application logic.)
</p><p>
With the <span class="bold"><strong>Embedded InnoDB</strong></span> product, you skip SQL and code your own query
logic, through calls to a C API.
</p><p>See Also <a class="glossseealso" href="#glos_table">table</a>, <a class="glossseealso" href="#glos_database">database</a>, <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_sql">SQL</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd></dl></div><div class="glossdiv" title="R"><h3 class="title">R</h3><dl><dt><a id="glos_read_committed"></a>read committed</dt><a id="id287644860" class="indexterm"></a><dd><p>
An <span class="bold"><strong>isolation level</strong></span> that uses a locking strategy
that relaxes some of the
protection between transactions, in the interest of performance.
Transactions cannot see uncommitted data from other transactions,
but they can see data that is committed by another transaction
after the current transaction started.
Thus, a transaction never sees any bad data, but the data that it does
see may depend to some extent on the timing of other transactions.
</p><p>
When a transaction with this isolation level performs
<code class="literal">UPDATE ... WHERE</code> or
<code class="literal">DELETE ... WHERE</code>
operations, other transactions might have to wait.
The transaction can perform <code class="literal">SELECT ... FOR UPDATE</code>,
and <code class="literal">LOCK IN SHARE MODE</code>
operations without making other transactions wait.
</p><p>
In the <span class="bold"><strong>Embedded InnoDB</strong></span>, this isolation level is specified by the constant
<code class="literal">IB_READ_COMMITTED</code>.
</p><p>See Also <a class="glossseealso" href="#glos_repeatable_read">repeatable read</a>, <a class="glossseealso" href="#glos_serializable_read">serializable read</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_read_uncommitted"></a>read uncommitted</dt><a id="id287644922" class="indexterm"></a><dd><p>
The <span class="bold"><strong>isolation level</strong></span> that provides the least amount of
protection between transactions.
Queries employ a <span class="bold"><strong>locking</strong></span> strategy that allows them to proceed
in situations where they would normally wait for another transaction.
However, this extra performance comes at the cost of less reliable results,
including data that has been changed by other transactions and not committed
yet (known as <span class="bold"><strong>dirty read</strong></span>).
Use this isolation level only with great caution, and be aware that the
results might not be consistent or reproducible, depending on what
other transactions are doing at the same time.
Typically, transactions with this isolation level do only queries, not
insert, update, or delete operations.
</p><p>See Also <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_dirty_read">dirty read</a>.</p></dd><dt><a id="glos_read_tuple"></a>read tuple</dt><a id="id287644993" class="indexterm"></a><dd><p>
In the <span class="bold"><strong>Embedded InnoDB</strong></span> product, a read tuple is a larger kind of
<span class="bold"><strong>tuple</strong></span> than a <span class="bold"><strong>search tuple</strong></span>.
It contains extra columns
so that you can retrieve values from all columns, not just from the indexed ones.
When inserting or updating rows, you still use a <span class="bold"><strong>read</strong></span> tuple;
for that reason, we also refer to a <span class="bold"><strong>read/write</strong></span> tuple,
even though physically these structures are the same.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>, <a class="glossseealso" href="#glos_search_tuple">search tuple</a>, <a class="glossseealso" href="#glos_tuple">tuple</a>, <a class="glossseealso" href="#glos_read_write_tuple">read/write tuple</a>.</p></dd><dt><a id="glos_read_write_tuple"></a>read/write tuple</dt><a id="id287645034" class="indexterm"></a><dd><p>
Synonym for <span class="bold"><strong>read tuple</strong></span>.
The same structure is used for retrieving all the columns of a row,
as for performing insert or update operations on a row.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>, <a class="glossseealso" href="#glos_tuple">tuple</a>, <a class="glossseealso" href="#glos_read_tuple">read tuple</a>, <a class="glossseealso" href="#glos_search_tuple">search tuple</a>.</p></dd><dt><a id="glos_redo_log"></a>redo log</dt><a id="id287645061" class="indexterm"></a><dd><p>
A set of files,
typically named <code class="literal">ib_logfile0</code> and <code class="literal">ib_logfile1</code>,
that record statements that attempt to change data in InnoDB tables.
These statements are replayed automatically to correct data written by incomplete transactions,
on startup following a crash.
</p><p>See Also <a class="glossseealso" href="#glos_ib_logfile">ib_logfile</a>.</p></dd><dt><a id="glos_redundant_row_format"></a>redundant row format</dt><a id="id287645083" class="indexterm"></a><dd><p>
The oldest InnoDB row format.
Prior to MySQL 5.0.3, it was the only row format available in InnoDB.
In My SQL 5.0.3 and later, the default is compact row format.
You can still specify redundant row format for compatibility with
older InnoDB tables.
</p><p>See Also <a class="glossseealso" href="#glos_row_format">row format</a>, <a class="glossseealso" href="#glos_compact_row_format">compact row format</a>.</p></dd><dt><a id="glos_repeatable_read"></a>repeatable read</dt><a id="id287645099" class="indexterm"></a><dd><p>
The default <span class="bold"><strong>isolation level</strong></span> for InnoDB.
It prevents any rows that are queried from being changed by
other transactions, thus blocking <span class="bold"><strong>non-repeatable reads</strong></span> but not
<span class="bold"><strong>phantom</strong></span> reads.
It uses a moderately strict <span class="bold"><strong>locking</strong></span> strategy
so that all queries within a transaction see data from the same
snapshot, that is, the data as it was at the time the transaction started.
</p><p>
When a transaction with this isolation level performs
<code class="literal">UPDATE ... WHERE</code>,
<code class="literal">DELETE ... WHERE</code>, <code class="literal">SELECT ... FOR UPDATE</code>,
and <code class="literal">LOCK IN SHARE MODE</code>
operations, other transactions might have to wait.
</p><p>
In the <span class="bold"><strong>Embedded InnoDB</strong></span> product,
this isolation level is specified by the constant
<code class="literal">IB_REPEATABLE_READ</code>.
</p><p>See Also <a class="glossseealso" href="#glos_consistent_read">consistent read</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_serializable_read">serializable read</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_acid">ACID</a>.</p></dd><dt><a id="glos_replication"></a>replication</dt><a id="id287645172" class="indexterm"></a><dd><p>
The practice of sending changes from a <span class="bold"><strong>master database</strong></span>,
to one or more <span class="bold"><strong>slave databases</strong></span>, so that all databases have the same data.
This technique has a wide range of uses, such as load-balancing for better scalability,
disaster recovery, and testing software upgrades and configuration changes.
The changes can be sent between the database by methods called
<span class="bold"><strong>row-based replication</strong></span> and
<span class="bold"><strong>statement-based replication</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_row_based_replication">row-based replication</a>, <a class="glossseealso" href="#glos_statement_based_replication">statement-based replication</a>.</p></dd><dt><a id="glos_rollback"></a>rollback</dt><a id="id287645240" class="indexterm"></a><dd><p>
A <span class="bold"><strong>SQL</strong></span> statement that ends a <span class="bold"><strong>transaction</strong></span>,
undoing any changes made by the transaction.
It is the opposite of <span class="bold"><strong>commit</strong></span>, which makes permanent
any changes made in the transaction.
</p><p>
By default, MySQL uses the <span class="bold"><strong>auto-commit</strong></span> setting,
which automatically issues a commit following each SQL statement.
You must change this setting before you can use the rollback technique.
Because the auto-commit setting is controlled at the MySQL level, it does not apply to
<span class="bold"><strong>Embedded InnoDB</strong></span> programs.
</p><p>See Also <a class="glossseealso" href="#glos_commit">commit</a>, <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_rollback_segment"></a>rollback segment</dt><a id="id287645284" class="indexterm"></a><dd><p>
The storage area containing the <span class="bold"><strong>undo log</strong></span>,
part of the <span class="bold"><strong>system tablespace</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_undo_log">undo log</a>, <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>.</p></dd><dt><a id="glos_row_based_replication"></a>row-based replication</dt><a id="id287645309" class="indexterm"></a><dd><p>
This form of <span class="bold"><strong>replication</strong></span> is safe to use for all settings of the
<span class="bold"><strong>innodb_autoinc_lock_mode</strong></span> option.
</p><p>See Also <a class="glossseealso" href="#glos_replication">replication</a>, <a class="glossseealso" href="#glos_statement_based_replication">statement-based replication</a>, <a class="glossseealso" href="#glos_auto_increment_locking">auto-increment locking</a>, <a class="glossseealso" href="#glos_innodb_autoinc_lock_mode">innodb_autoinc_lock_mode</a>.</p></dd><dt><a id="glos_row_format"></a>row format</dt><a id="id287645338" class="indexterm"></a><dd><p>
The disk storage format for a row from an InnoDB table.
As InnoDB gains new capabilities such as compression,
new row formats are introduced to support the resulting
improvements in storage efficiency and performance.
</p><p>
Each table has its own row format, specified through the
<code class="literal">ROW_FORMAT</code> option.
To see the row format for each InnoDB table, issue the command
<code class="literal">SHOW TABLE STATUS</code>.
Because all the tables in the system tablespace share the same row format,
to take advantage of other row formats typically requires setting the
<code class="literal">innodb_file_per_table</code> option,
so that each table is stored in a separate tablespace.
</p><p>See Also <a class="glossseealso" href="#glos_fixed_row_format">fixed row format</a>, <a class="glossseealso" href="#glos_dynamic_row_format">dynamic row format</a>, <a class="glossseealso" href="#glos_compact_row_format">compact row format</a>, <a class="glossseealso" href="#glos_redundant_row_format">redundant row format</a>, <a class="glossseealso" href="#glos_compressed_row_format">compressed row format</a>.</p></dd><dt><a id="glos_row_lock"></a>row lock</dt><a id="id287645445" class="indexterm"></a><dd><p>
A <span class="bold"><strong>lock</strong></span> that prevents a row from being accessed
in an incompatible way by another <span class="bold"><strong>transaction</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_lock">lock</a>, <a class="glossseealso" href="#glos_lock_mode">lock mode</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>.</p></dd></dl></div><div class="glossdiv" title="S"><h3 class="title">S</h3><dl><dt><a id="glos_savepoint"></a>savepoint</dt><dd><a id="id287645476" class="indexterm"></a><p>
Savepoints help to implement nested <span class="bold"><strong>transactions</strong></span>.
They can be used to provide scope to operations on tables that are part
of a larger transaction.
For example, scheduling a trip in a reservation system might involve
booking several different flights; if a desired flight is unavailable,
you might <span class="bold"><strong>roll back</strong></span> the changes involved in booking that one leg,
without rolling back the earlier flights that were successfully booked.
</p><p>See Also <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_rollback">rollback</a>.</p></dd><dt><a id="glos_search_tuple"></a>search tuple</dt><a id="id287645501" class="indexterm"></a><dd><p>
In the <span class="bold"><strong>Embedded InnoDB</strong></span> product,
a search tuple is a fast, compact structure that only contains the columns
needed to perform a search.
You use this kind of <span class="bold"><strong>tuple</strong></span> to perform queries where the answer requires
only the columns from a single index.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>, <a class="glossseealso" href="#glos_tuple">tuple</a>, <a class="glossseealso" href="#glos_read_tuple">read tuple</a>, <a class="glossseealso" href="#glos_read_write_tuple">read/write tuple</a>.</p></dd><dt><a id="glos_secondary_index"></a>secondary index</dt><a id="id287645530" class="indexterm"></a><dd><p>
A type of InnoDB <span class="bold"><strong>index</strong></span> that represents a subset of table columns.
An InnoDB table can have zero, one, or many secondary indexes.
(Contrast with the <span class="bold"><strong>clustered index</strong></span>, which is required for each
InnoDB table, and stores the data for all the table columns.)
</p><p>
A secondary index can be used to satisfy queries that only require values
from the indexed columns.
For more complex queries, it can be used to
identify the relevant rows in the table, which are then retrieved
through lookups using the clustered index.
</p><p>
Creating and dropping secondary indexes has traditionally involved
significant overhead from copying all the data in the InnoDB table.
The <span class="bold"><strong>fast index creation</strong></span> feature of the InnoDB Plugin
makes both <code class="literal">CREATE INDEX</code> and
<code class="literal">DROP INDEX</code> statements much faster
for InnoDB secondary indexes.
</p><p>See Also <a class="glossseealso" href="#glos_index">index</a>, <a class="glossseealso" href="#glos_clustered_index">clustered index</a>, <a class="glossseealso" href="#glos_fast_index_creation">fast index creation</a>.</p></dd><dt><a id="glos_semi_consistent_read"></a>semi-consistent read</dt><a id="id287645610" class="indexterm"></a><dd><p>
A type of read operation used for <code class="literal">UPDATE</code> statements,
that is a combination of <span class="bold"><strong>read committed</strong></span>
and <span class="bold"><strong>consistent read</strong></span>.
When an <code class="literal">UPDATE</code> statement examines a row that is already locked,
InnoDB returns the latest committed version to MySQL
so that MySQL can determine whether the row matches the
<code class="literal">WHERE</code> condition of the <code class="literal">UPDATE</code>.
If the row matches (must be updated), MySQL reads the row again,
and this time InnoDB either locks it or waits for a lock on it.
This type of read operation can only happen when the transaction has the
read committed <span class="bold"><strong>isolation level</strong></span>,
or when the <code class="literal">innodb_locks_unsafe_for_binlog</code> option is enabled.
</p><p>See Also <a class="glossseealso" href="#glos_read_committed">read committed</a>, <a class="glossseealso" href="#glos_consistent_read">consistent read</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>.</p></dd><dt><a id="glos_serializable_read"></a>serializable read</dt><a id="id287645664" class="indexterm"></a><dd><p>
The <span class="bold"><strong>isolation level</strong></span> that uses
the most conservative locking strategy, to prevent any other transactions
from inserting or changing data that was read by this transaction,
until it is finished.
This way, the same query can be run over and over within a transaction,
and be certain to retrieve the same set of results each time.
Any attempt to change data that was committed by another transaction
since the start of the current transaction, cause the current transaction
to wait.
</p><p>
This is the default isolation level specified by the SQL standard.
In practice, this degree of strictness is rarely needed,
so the default isolation level for InnoDB
is the next most strict, <span class="bold"><strong>repeatable read</strong></span>.
</p><p>
In Embedded InnoDB, this isolation level is specified by the constant
<code class="literal">IB_SERIALIZABLE</code>.
</p><p>See Also <a class="glossseealso" href="#glos_repeatable_read">repeatable read</a>, <a class="glossseealso" href="#glos_consistent_read">consistent read</a>, <a class="glossseealso" href="#glos_locking">locking</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_acid">ACID</a>.</p></dd><dt><a id="glos_shared_lock"></a>shared lock</dt><a id="id287645705" class="indexterm"></a><dd><p>
A kind of <span class="bold"><strong>lock</strong></span> that allows
other <span class="bold"><strong>transactions</strong></span> to read the locked object,
and to also acquire other shared locks on it,
but not to write to it.
The opposite of <span class="bold"><strong>exclusive lock</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_lock">lock</a>, <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_exclusive_lock">exclusive lock</a>.</p></dd><dt><a id="glos_shutdown"></a>shutdown</dt><a id="id287645738" class="indexterm"></a><dd><p>
The process of stopping the InnoDB storage engine.
This process can do various cleanup operations, so it is
<span class="bold"><strong>slow</strong></span> to shut down but fast to start up later;
or it can skip the cleanup operations, so it is
<span class="bold"><strong>fast</strong></span> to shut down
but must do the cleanup the next time it starts.
</p><p>
In normal MySQL usage, the shutdown mode is controlled by
the <code class="literal">innodb_fast_shutdown</code> option.
In the <span class="bold"><strong>Embedded InnoDB</strong></span> product, you specify the
shutdown mode as a parameter to the shutdown API.
</p><p>See Also <a class="glossseealso" href="#glos_slow_shutdown">slow shutdown</a>, <a class="glossseealso" href="#glos_fast_shutdown">fast shutdown</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_slow_shutdown"></a>slow shutdown</dt><a id="id287645776" class="indexterm"></a><dd><p>
A type of shutdown that does additional flushing operations before completing.
Specified by the configuration parameter <code class="literal">innodb_fast_shutdown=0</code>.

Although the shutdown itself can take longer, that time will be saved
on the subsequent startup.

</p><p>See Also <a class="glossseealso" href="#glos_shutdown">shutdown</a>, <a class="glossseealso" href="#glos_fast_shutdown">fast shutdown</a>.</p></dd><dt><a id="glos_statement_based_replication"></a>statement-based replication</dt><a id="id287645836" class="indexterm"></a><dd><p>
This form of <span class="bold"><strong>replication</strong></span> requires some care with the setting for
the <span class="bold"><strong>innodb_autoinc_lock_mode</strong></span> option, to
avoid potential timing problems with
<span class="bold"><strong>auto-increment locking</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_replication">replication</a>, <a class="glossseealso" href="#glos_auto_increment_locking">auto-increment locking</a>, <a class="glossseealso" href="#glos_innodb_autoinc_lock_mode">innodb_autoinc_lock_mode</a>, <a class="glossseealso" href="#glos_row_based_replication">row-based replication</a>.</p></dd><dt><a id="glos_sql"></a>SQL</dt><a id="id287645869" class="indexterm"></a><dd><p>
The Structured Query Language that is standard for performing database operations.
Often divided into the categories
<span class="bold"><strong>DDL</strong></span>, <span class="bold"><strong>DML</strong></span>,
and <span class="bold"><strong>queries</strong></span>.
</p><p>
The Embedded InnoDB product provides a C/C++ API for performing database operations,
allowing you to skip the SQL language processing.
</p><p>See Also <a class="glossseealso" href="#glos_ddl">DDL</a>, <a class="glossseealso" href="#glos_dml">DML</a>, <a class="glossseealso" href="#glos_query">query</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_supremum_record"></a>supremum record</dt><a id="id287645907" class="indexterm"></a><dd><p>
A <span class="bold"><strong>pseudo-record</strong></span> in an index,
representing the <span class="bold"><strong>gap</strong></span> above the largest value in that index.
If a transaction has a statement such as
<code class="literal">SELECT ... FOR UPDATE ... WHERE col &gt; 10;</code>,
and the largest value in the column is 20,
it is a lock on the supremum record that
prevents other transactions from inserting even larger
values such as 50, 100, and so on.
</p><p>See Also <a class="glossseealso" href="#glos_gap">gap</a>, <a class="glossseealso" href="#glos_infimum_record">infimum record</a>, <a class="glossseealso" href="#glos_pseudo_record">pseudo-record</a>.</p></dd><dt><a id="glos_system_tablespace"></a>system tablespace</dt><a id="id287645938" class="indexterm"></a><dd><p>
By default, this single data file stores all the table data for a database,
as well as all the metadata for InnoDB-related objects (the
<span class="bold"><strong>data dictionary</strong></span>).
</p><p>
Turning on the <span class="bold"><strong>innodb_file_per_table</strong></span> option causes each newly
created table to be stored in its own <span class="bold"><strong>tablespace</strong></span>,
reducing the size of, and dependencies on, the system tablespace.
</p><p>
Keeping all table data in the system tablespace has implications for
the InnoDB Hot Backup product (backing up one large file rather than several
smaller files), and prevents you from using certain InnoDB features that
require the newer <span class="bold"><strong>Barracuda</strong></span> file format.
on the
</p><p>See Also <a class="glossseealso" href="#glos_data_dictionary">data dictionary</a>, <a class="glossseealso" href="#glos_file_per_table">file-per-table</a>, <a class="glossseealso" href="#glos_innodb_file_per_table">innodb_file_per_table</a>, <a class="glossseealso" href="#glos_ibdata_file">ibdata file</a>, <a class="glossseealso" href="#glos_tablespace">tablespace</a>, <a class="glossseealso" href="#glos_file_format">file format</a>, <a class="glossseealso" href="#glos_barracuda">Barracuda</a>.</p></dd></dl></div><div class="glossdiv" title="T"><h3 class="title">T</h3><dl><dt><a id="glos_table"></a>table</dt><a id="id287646024" class="indexterm"></a><dd><p>
Although a table is a distinct, addressable object in the context of SQL,
for backup purposes we are often concerned with whether the table is part
of the system tablespace, or was created under the file-per-table setting
and so resides in its own tablespace.
</p><p>See Also <a class="glossseealso" href="#glos_clustered_index">clustered index</a>, <a class="glossseealso" href="#glos_file_per_table">file-per-table</a>, <a class="glossseealso" href="#glos_table">table</a>, <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>.</p></dd><dt><a id="glos_table_schema"></a>table schema</dt><a id="id287646044" class="indexterm"></a><dd><p>
In the <span class="bold"><strong>Embedded InnoDB</strong></span> product,
a representation of the columns and <span class="bold"><strong>indexes</strong></span>
for a <span class="bold"><strong>table</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>, <a class="glossseealso" href="#glos_table">table</a>, <a class="glossseealso" href="#glos_index">index</a>.</p></dd><dt><a id="glos_tablespace"></a>tablespace</dt><a id="id287646110" class="indexterm"></a><dd><p>
A data file that can hold data for one or more tables.
The <span class="bold"><strong>system tablespace</strong></span> contains the tables that
make up the <span class="bold"><strong>data dictionary</strong></span>, and by default holds
all the other InnoDB tables.
Turning on the <code class="literal">innodb_file_per_table</code> option allows
newly created tables to each have their own tablespace, with a separate
data file for each table.
</p><p>
Tablespaces created by the built-in InnoDB storage engine are upward compatible
with the InnoDB Plugin.
Tablespaces created by the InnoDB Plugin are downward compatible with the
built-in InnoDB storage engine, if they use the <span class="bold"><strong>Antelope</strong></span>
file format.
</p><p>
Tablespaces created with the built-in InnoDB storage engine or the InnoDB Plugin
can be interchanged with Embedded InnoDB applications, subject to restrictions.
Likewise, tablespaces created by Embedded InnoDB applications
can be interchanged with the InnoDB storage engine running as part of
MySQL, either the built-in InnoDB or the InnoDB Plugin.
For a tablespace created by the InnoDB storage engine in MySQL to be used by
an Embedded InnoDB application, the Embedded InnoDB library must be compiled
with compression enabled, if any tables use the <span class="bold"><strong>Barracuda</strong></span>
file format and <span class="bold"><strong>compressed row format</strong></span>.
</p><p>See Also <a class="glossseealso" href="#glos_file_per_table">file-per-table</a>, <a class="glossseealso" href="#glos_innodb_file_per_table">innodb_file_per_table</a>, <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>, <a class="glossseealso" href="#glos_data_dictionary">data dictionary</a>, <a class="glossseealso" href="#glos_ibdata_file">ibdata file</a>, <a class="glossseealso" href="#glos_antelope">Antelope</a>, <a class="glossseealso" href="#glos_barracuda">Barracuda</a>, <a class="glossseealso" href="#glos_compressed_row_format">compressed row format</a>.</p></dd><dt><a id="glos_transaction"></a>transaction</dt><a id="id287646170" class="indexterm"></a><dd><p>
Transactions are atomic units of work that can be
committed or rolled back.
When a transaction makes multiple changes to the database,
either all the changes succeed when the transaction is committed,
or all the changes are undone when the transaction is rolled back.
</p><p>
Database transactions, as implemented by InnoDB, have properties
that are collectively known by the acronym <span class="bold"><strong>ACID</strong></span>,
for atomicity, consistency, isolation, and durability.
</p><p>See Also <a class="glossseealso" href="#glos_acid">ACID</a>, <a class="glossseealso" href="#glos_commit">commit</a>, <a class="glossseealso" href="#glos_rollback">rollback</a>, <a class="glossseealso" href="#glos_lock">lock</a>, <a class="glossseealso" href="#glos_isolation_level">isolation level</a>.</p></dd><dt><a id="glos_truncate"></a>truncate</dt><a id="id287646507" class="indexterm"></a><dd><p>
A <span class="bold"><strong>DDL</strong></span> operation that removes the entire contents of a table.
Although conceptually it has the same result as a <code class="literal">DELETE</code>
statement with no <code class="literal">WHERE</code> clause, it operates differently
behind the scenes:
InnoDB creates a new empty table, drops the old table, then renames the new table
to take the place of the old one.
Because this is a DDL operation, it cannot be <span class="bold"><strong>rolled back</strong></span>.
</p><p>
If the table being truncated contains foreign keys that reference another table,
the truncation operation uses a slower method of operation, deleting one row at a time
so that corresponding rows in the referenced table can be deleted as needed by any
<code class="literal">ON DELETE CASCADE</code> clause.
</p><p>
In the API for the Embedded InnoDB product, truncating a table gives the table
a new ID, so that you must open the table again by name before using it.
Any cursors that were open on the old table are invalid and produce undefined results.
</p><p>See Also <a class="glossseealso" href="#glos_ddl">DDL</a>, <a class="glossseealso" href="#glos_rollback">rollback</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>.</p></dd><dt><a id="glos_tuple"></a>tuple</dt><a id="id287646586" class="indexterm"></a><dd><p>

In the <span class="bold"><strong>Embedded InnoDB</strong></span> product,
a data structure holding one or more table columns.
The tuple is an intermediate holding area where query results are stored
before the columns are extracted, or where column values are stored before
being used in an insert or update operation.
</p><p>See Also <a class="glossseealso" href="#glos_cursor">cursor</a>, <a class="glossseealso" href="#glos_embedded_innodb">Embedded InnoDB</a>, <a class="glossseealso" href="#glos_read_tuple">read tuple</a>, <a class="glossseealso" href="#glos_read_write_tuple">read/write tuple</a>, <a class="glossseealso" href="#glos_search_tuple">search tuple</a>.</p></dd></dl></div><div class="glossdiv" title="U"><h3 class="title">U</h3><dl><dt><a id="glos_undo_log"></a>undo log</dt><a id="id287646618" class="indexterm"></a><dd><p>
A storage area that holds copies of data modified by active <span class="bold"><strong>transactions</strong></span>.
If another transaction needs to see the original data (as part of a
<span class="bold"><strong>consistent read</strong></span> operation), the unmodified data is retrieved from this storage area.
This area is physically part of the <span class="bold"><strong>system tablespace</strong></span>.
It is split into separate portions, the <span class="bold"><strong>insert undo buffer</strong></span> and the
<span class="bold"><strong>update undo buffer</strong></span>.
Collectively, these parts are also known as the <span class="bold"><strong>rollback segment</strong></span>,
a familiar term for Oracle DBAs.
</p><p>See Also <a class="glossseealso" href="#glos_transaction">transaction</a>, <a class="glossseealso" href="#glos_consistent_read">consistent read</a>, <a class="glossseealso" href="#glos_system_tablespace">system tablespace</a>, <a class="glossseealso" href="#glos_rollback_segment">rollback segment</a>.</p></dd></dl></div><div class="glossdiv" title="W"><h3 class="title">W</h3><dl><dt><a id="glos_windows"></a>Windows</dt><a id="id287646668" class="indexterm"></a><dd><p>
The built-in InnoDB storage engine and the InnoDB Plugin
are supported on all the same Microsoft Windows
versions as MySQL.
</p><p>
The InnoDB Hot Backup product is available on Windows,
although the <code class="literal">innobackup</code> Perl script
is not part of the Windows edition of the product.
</p><p>
The Embedded InnoDB product is available on Windows.
Building from source requires the Microsoft Visual Studio product.
The table compression feature also requires the <code class="literal">zlib</code>
library, which is not a standard part of Windows; you can turn this feature
off when building from source, to eliminate this dependency.
</p></dd></dl></div></div><div class="index" title="Index"><div class="titlepage"><div><div><h2 class="title"><a id="api-ix"></a>Index</h2></div></div></div><div class="index"><div class="indexdiv"><h3>A</h3><dl><dt>ACID, <a class="indexterm" href="#overview.dbappdev">
Comparison with Database Application Development
</a>, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>Antelope, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>API reference, <a class="indexterm" href="#c-api">C API Reference for Embedded InnoDB</a></dt><dt>application programming interface, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>auto-increment, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>auto-increment locking, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt>B-tree, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>Barracuda, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>beta, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>buffer pool, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt>C API reference, <a class="indexterm" href="#c-api">C API Reference for Embedded InnoDB</a></dt><dt>clustered index, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>column index, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>column prefix, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>commit, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>compact row format, <a class="indexterm" href="#types-table-format">Table Format types</a>, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>compressed row format, <a class="indexterm" href="#types-table-format">Table Format types</a>, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>concatenated index, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>concurrency, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>consistent read, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>constants, <a class="indexterm" href="#constants">Constants</a></dt><dt>covering index, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>crash recovery, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>cursor, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>cursor match mode, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>Cursor match modes, <a class="indexterm" href="#ib_match_mode_t">Cursor Match Modes</a></dt><dt>cursor search mode, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>Cursor search modes, <a class="indexterm" href="#modes-search">Cursor Search Modes</a></dt><dt>cursors, <a class="indexterm" href="#id287624779">Overview of Cursors</a></dt></dl></div><div class="indexdiv"><h3>D</h3><dl><dt>data definition language, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>data dictionary, <a class="indexterm" href="#id287624629">Overview of the Data Dictionary</a>, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>data files, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>data manipulation language, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>database, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>DDL, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>deadlock, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>delete, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>dirty read, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>DML, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>doublewrite buffer, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>dynamic row format, <a class="indexterm" href="#types-table-format">Table Format types</a>, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt>early adopter, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>Embedded InnoDB, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>eviction, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>exclusive lock, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>fast index creation, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>fast shutdown, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>file format, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>file-per-table, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>fixed row format, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>FTS, <a class="indexterm" href="#id287626771">Full Table Scan</a></dt><dt>full table scan, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>full table scan (FTS), <a class="indexterm" href="#id287626771">Full Table Scan</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt>GA, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>gap, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>H</h3><dl><dt>handle, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt>ibdata file, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>ib_api_version, <a class="indexterm" href="#ib_api_version">ib_api_version</a></dt><dt>ib_cfg_get, <a class="indexterm" href="#ib_cfg_get">ib_cfg_get</a></dt><dt>ib_cfg_get_all, <a class="indexterm" href="#ib_cfg_get_all">ib_cfg_get_all</a></dt><dt>ib_cfg_set_bool_off, <a class="indexterm" href="#ib_cfg_set_bool_off">ib_cfg_set_bool_off</a></dt><dt>ib_cfg_set_bool_on, <a class="indexterm" href="#ib_cfg_set_bool_on">ib_cfg_set_bool_on</a></dt><dt>ib_cfg_set_callback, <a class="indexterm" href="#ib_cfg_set_callback">ib_cfg_set_callback</a></dt><dt>ib_cfg_set_int, <a class="indexterm" href="#ib_cfg_set_int">ib_cfg_set_int</a></dt><dt>ib_cfg_set_text, <a class="indexterm" href="#ib_cfg_set_text">ib_cfg_set_text</a></dt><dt>ib_cfg_var_get_type, <a class="indexterm" href="#ib_cfg_var_get_type">ib_cfg_var_get_type</a></dt><dt>ib_clust_read_tuple_create, <a class="indexterm" href="#ib_clust_read_tuple_create">ib_clust_read_tuple_create</a></dt><dt>ib_clust_search_tuple_create, <a class="indexterm" href="#ib_clust_search_tuple_create">ib_clust_search_tuple_create</a></dt><dt>ib_col_copy_value, <a class="indexterm" href="#ib_col_copy_value">ib_col_copy_value</a></dt><dt>ib_col_get_len, <a class="indexterm" href="#ib_col_get_len">ib_col_get_len</a></dt><dt>ib_col_get_meta, <a class="indexterm" href="#ib_col_get_meta">ib_col_get_meta</a></dt><dt>ib_col_get_value, <a class="indexterm" href="#ib_col_get_value">ib_col_get_value</a></dt><dt>ib_col_set_value, <a class="indexterm" href="#ib_col_set_value">ib_col_set_value</a></dt><dt>ib_cursor_attach_trx, <a class="indexterm" href="#ib_cursor_attach_trx">ib_cursor_attach_trx</a></dt><dt>ib_cursor_close, <a class="indexterm" href="#ib_cursor_close">ib_cursor_close</a></dt><dt>ib_cursor_delete_row, <a class="indexterm" href="#ib_cursor_delete_row">ib_cursor_delete_row</a></dt><dt>ib_cursor_first, <a class="indexterm" href="#ib_cursor_first">ib_cursor_first</a></dt><dt>ib_cursor_insert_row, <a class="indexterm" href="#ib_cursor_insert_row">ib_cursor_insert_row</a></dt><dt>ib_cursor_is_positioned, <a class="indexterm" href="#ib_cursor_is_positioned">ib_cursor_is_positioned</a></dt><dt>ib_cursor_last, <a class="indexterm" href="#ib_cursor_last">ib_cursor_last</a></dt><dt>ib_cursor_lock, <a class="indexterm" href="#ib_cursor_lock">ib_cursor_lock</a></dt><dt>ib_cursor_moveto, <a class="indexterm" href="#ib_cursor_moveto">ib_cursor_moveto</a></dt><dt>ib_cursor_next, <a class="indexterm" href="#ib_cursor_next">ib_cursor_next</a></dt><dt>ib_cursor_open_index_using_id, <a class="indexterm" href="#ib_cursor_open_index_using_id">ib_cursor_open_index_using_id</a></dt><dt>ib_cursor_open_index_using_name, <a class="indexterm" href="#ib_cursor_open_index_using_name">ib_cursor_open_index_using_name</a></dt><dt>ib_cursor_open_table, <a class="indexterm" href="#ib_cursor_open_table">ib_cursor_open_table</a></dt><dt>ib_cursor_open_table_using_id, <a class="indexterm" href="#id287631358">ib_cursor_open_table_using_id</a></dt><dt>ib_cursor_prev, <a class="indexterm" href="#ib_cursor_prev">ib_cursor_prev</a></dt><dt>ib_cursor_read_row, <a class="indexterm" href="#ib_cursor_read_row">ib_cursor_read_row</a></dt><dt>ib_cursor_reset, <a class="indexterm" href="#ib_cursor_reset">ib_cursor_reset</a></dt><dt>ib_cursor_set_cluster_access, <a class="indexterm" href="#ib_cursor_set_cluster_access">ib_cursor_set_cluster_access</a></dt><dt>ib_cursor_set_lock_mode, <a class="indexterm" href="#ib_cursor_set_lock_mode">ib_cursor_set_lock_mode</a></dt><dt>ib_cursor_set_match_mode, <a class="indexterm" href="#ib_cursor_set_match_mode">ib_cursor_set_match_mode</a></dt><dt>ib_cursor_set_simple_select, <a class="indexterm" href="#ib_cursor_set_simple_select">ib_cursor_set_simple_select</a></dt><dt>ib_cursor_stmt_begin, <a class="indexterm" href="#ib_cursor_stmt_begin">ib_cursor_stmt_begin</a></dt><dt>ib_cursor_truncate, <a class="indexterm" href="#ib_cursor_truncate">ib_cursor_truncate</a></dt><dt>ib_cursor_update_row, <a class="indexterm" href="#ib_cursor_update_row">ib_cursor_update_row</a></dt><dt>ib_database_create, <a class="indexterm" href="#ib_database_create">ib_database_create</a></dt><dt>ib_database_drop, <a class="indexterm" href="#ib_database_drop">ib_database_drop</a></dt><dt>ib_index_create, <a class="indexterm" href="#ib_index_create">ib_index_create</a></dt><dt>ib_index_drop, <a class="indexterm" href="#ib_index_drop">ib_index_drop</a></dt><dt>ib_index_get_id, <a class="indexterm" href="#ib_index_get_id">ib_index_get_id</a></dt><dt>ib_index_schema_add_col, <a class="indexterm" href="#ib_index_schema_add_col">ib_index_schema_add_col</a></dt><dt>ib_index_schema_create, <a class="indexterm" href="#ib_index_schema_create">ib_index_schema_create</a></dt><dt>ib_index_schema_delete, <a class="indexterm" href="#ib_index_schema_delete">ib_index_schema_delete</a></dt><dt>ib_index_schema_set_clustered, <a class="indexterm" href="#ib_index_schema_set_clustered">ib_index_schema_set_clustered</a></dt><dt>ib_index_schema_set_unique, <a class="indexterm" href="#ib_index_schema_set_unique">ib_index_schema_set_unique</a></dt><dt>ib_init, <a class="indexterm" href="#ib_init">ib_init</a></dt><dt>ib_logfile, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>ib_logger_set, <a class="indexterm" href="#ib_logger_set">ib_logger_set</a></dt><dt>ib_savepoint_release, <a class="indexterm" href="#ib_savepoint_release">ib_savepoint_release</a></dt><dt>ib_savepoint_rollback, <a class="indexterm" href="#ib_savepoint_rollback">ib_savepoint_rollback</a></dt><dt>ib_savepoint_take, <a class="indexterm" href="#ib_savepoint_take">ib_savepoint_take</a></dt><dt>ib_schema_lock_exclusive, <a class="indexterm" href="#ib_schema_lock_exclusive">ib_schema_lock_exclusive</a></dt><dt>ib_schema_lock_is_exclusive, <a class="indexterm" href="#ib_schema_lock_is_exclusive">ib_schema_lock_is_exclusive</a></dt><dt>ib_schema_lock_is_shared, <a class="indexterm" href="#ib_schema_lock_is_shared">ib_schema_lock_is_shared</a></dt><dt>ib_schema_lock_shared, <a class="indexterm" href="#ib_schema_lock_shared">ib_schema_lock_shared</a></dt><dt>ib_schema_tables_iterate, <a class="indexterm" href="#ib_schema_tables_iterate">ib_schema_tables_iterate</a></dt><dt>ib_schema_unlock, <a class="indexterm" href="#ib_schema_unlock">ib_schema_unlock</a></dt><dt>ib_sec_read_tuple_create, <a class="indexterm" href="#ib_sec_read_tuple_create">ib_sec_read_tuple_create</a></dt><dt>ib_sec_search_tuple_create, <a class="indexterm" href="#ib_sec_search_tuple_create">ib_sec_search_tuple_create</a></dt><dt>ib_set_client_compare, <a class="indexterm" href="#ib_set_client_compare">ib_set_client_compare</a></dt><dt>ib_shutdown, <a class="indexterm" href="#ib_shutdown">ib_shutdown</a></dt><dt>ib_startup, <a class="indexterm" href="#ib_startup">ib_startup</a></dt><dt>ib_status_get_i64, <a class="indexterm" href="#id287636200">ib_status_get_i64</a></dt><dt>ib_strerror, <a class="indexterm" href="#ib_strerror">ib_strerror</a></dt><dt>ib_table_create, <a class="indexterm" href="#ib_table_create">ib_table_create</a></dt><dt>ib_table_drop, <a class="indexterm" href="#ib_table_drop">ib_table_drop</a></dt><dt>ib_table_get_id, <a class="indexterm" href="#ib_table_get_id">ib_table_get_id</a></dt><dt>ib_table_lock, <a class="indexterm" href="#ib_table_lock">ib_table_lock</a></dt><dt>ib_table_rename, <a class="indexterm" href="#ib_table_rename">ib_table_rename</a></dt><dt>ib_table_schema_add_col, <a class="indexterm" href="#ib_table_schema_add_col">ib_table_schema_add_col</a></dt><dt>ib_table_schema_add_index, <a class="indexterm" href="#ib_table_schema_add_index">ib_table_schema_add_index</a></dt><dt>ib_table_schema_create, <a class="indexterm" href="#ib_table_schema_create">ib_table_schema_create</a></dt><dt>ib_table_schema_delete, <a class="indexterm" href="#ib_table_schema_delete">ib_table_schema_delete</a></dt><dt>ib_table_schema_visit, <a class="indexterm" href="#ib_table_schema_visit">ib_table_schema_visit</a></dt><dt>ib_table_truncate, <a class="indexterm" href="#ib_table_truncate">ib_table_truncate</a></dt><dt>ib_trx_begin, <a class="indexterm" href="#ib_trx_begin">ib_trx_begin</a></dt><dt>ib_trx_commit, <a class="indexterm" href="#ib_trx_commit">ib_trx_commit</a></dt><dt>ib_trx_release, <a class="indexterm" href="#ib_trx_release">ib_trx_release</a></dt><dt>ib_trx_rollback, <a class="indexterm" href="#ib_trx_rollback">ib_trx_rollback</a></dt><dt>ib_trx_start, <a class="indexterm" href="#ib_trx_start">ib_trx_start</a></dt><dt>ib_trx_state, <a class="indexterm" href="#ib_trx_state">ib_trx_state</a></dt><dt>ib_tuple_clear, <a class="indexterm" href="#ib_tuple_clear">ib_tuple_clear</a></dt><dt>ib_tuple_copy, <a class="indexterm" href="#ib_tuple_copy">ib_tuple_copy</a></dt><dt>ib_tuple_delete, <a class="indexterm" href="#ib_tuple_delete">ib_tuple_delete</a></dt><dt>ib_tuple_get_cluster_key, <a class="indexterm" href="#ib_tuple_get_cluster_key">ib_tuple_get_cluster_key</a></dt><dt>ib_tuple_get_n_cols, <a class="indexterm" href="#ib_tuple_get_n_cols">ib_tuple_get_n_cols</a></dt><dt>ib_tuple_get_n_user_cols, <a class="indexterm" href="#ib_tuple_get_n_user_cols">ib_tuple_get_n_user_cols</a></dt><dt>ib_tuple_read_double, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_read_float, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_read_i16, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_read_i32, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_read_i64, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_read_i8, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_read_u16, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_read_u32, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_read_u64, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_read_u8, <a class="indexterm" href="#ib_tuple_read_numeric">Functions to read numeric columns</a></dt><dt>ib_tuple_write_double, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>ib_tuple_write_float, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>ib_tuple_write_i16, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>ib_tuple_write_i32, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>ib_tuple_write_i64, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>ib_tuple_write_i8, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>ib_tuple_write_u16, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>ib_tuple_write_u32, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>ib_tuple_write_u64, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>ib_tuple_write_u8, <a class="indexterm" href="#ib_tuple_write_numeric">Functions to write numeric columns</a></dt><dt>index, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>index prefix, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>index schema, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>indexes, <a class="indexterm" href="#indexes">Overview of Indexes</a></dt><dt>infimum record, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>innodb_autoinc_lock_mode, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>innodb_file_format, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>innodb_file_per_table, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>insert buffer, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>intention exclusive lock, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>intention locks, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>intention shared lock, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>isolation level, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt>latch, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>lock, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>lock mode, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>locking, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>locks</dt><dd><dl><dt>exclusive, <a class="indexterm" href="#modes-lock">Lock Modes</a></dt><dt>modes, <a class="indexterm" href="#modes-lock">Lock Modes</a></dt><dt>shared, <a class="indexterm" href="#modes-lock">Lock Modes</a></dt></dl></dd><dt>LRU, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>M</h3><dl><dt>multiversion concurrency control, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>mutex, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>MVCC, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt>NULL, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt>page, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>page size, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>partial index, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>prefix, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>primary key, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>pseudo-record, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>Pthreads, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>purge, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>Q</h3><dl><dt>query, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt>read committed, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>read tuple, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>read uncommitted, <a class="indexterm" href="#trx-isolation-levels">Transaction Isolation Levels</a>, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>read/write tuple, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>redo log, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>redundant row format, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>reference, <a class="indexterm" href="#c-api">C API Reference for Embedded InnoDB</a></dt><dt>repeatable read, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>replication, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>rollback, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>rollback segment, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>row format, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>row lock, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>row-based replication, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt>savepoint, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>savepoints, <a class="indexterm" href="#id287624993">Overview of Savepoints</a></dt><dt>search tuple, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>secondary index, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>semi-consistent read, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>serializable read, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>shared lock, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>shutdown, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>slow shutdown, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>SQL, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>statement-based replication, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>supremum record, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>system tablespace, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt>table, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>table schema, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>tablespace, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>transaction, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>transactions, <a class="indexterm" href="#id287624881">Overview of Transactions</a></dt><dt>truncate, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>tuple, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt><dt>tuples, <a class="indexterm" href="#id287624823">Overview of Tuples</a></dt><dt>types, <a class="indexterm" href="#types">Data Types</a></dt></dl></div><div class="indexdiv"><h3>U</h3><dl><dt>undo log, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div><div class="indexdiv"><h3>W</h3><dl><dt>Windows, <a class="indexterm" href="#glossary">Embedded InnoDB Glossary</a></dt></dl></div></div></div></div>
<!--
     FILE ARCHIVED ON 14:08:32 Jun 05, 2010 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 13:43:39 Sep 18, 2018.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
<!--
playback timings (ms):
  LoadShardBlock: 150.47 (3)
  esindex: 0.007
  captures_list: 168.231
  CDXLines.iter: 11.951 (3)
  PetaboxLoader3.datanode: 166.322 (5)
  exclusion.robots: 0.308
  exclusion.robots.policy: 0.298
  RedisCDXSource: 2.025
  PetaboxLoader3.resolve: 140.132
  load_resource: 373.591 (2)
--></body></html>
